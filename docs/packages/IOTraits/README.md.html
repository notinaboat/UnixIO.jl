<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc-markdown-css-theme" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Copyright Sam O'Connor." />
  <meta name="dcterms.date" content="2021-09-07" />
  <title>README</title>
  <link rel="stylesheet" href="../../css/theme.css" />
  <link rel="stylesheet" href="../../css/paper.css" />
  <link rel="stylesheet" href="../../css/skylighting-paper-theme.css" />
  <link rel="stylesheet" href="../../css/readmedocs.css" />
</head>
<body>

<header>

<table class="xrt_head">
  <tr><td>
  <b><a href="https://github.com/notinaboat/UnixIO.jl" style="white-space: pre">https://github.com/notinaboat/UnixIO.jl</a></b>
  <td width="100%" style="text-align: center">
  <b>Copyright OC Technology Pty Ltd</b>
  </td><td style="text-align: right">
  <font face="Helvetica">
  <font size="+2.5">
  <b><font color="#0080FF">oc</font><font color="#000000">tech</font></b>
  </font>
  </td></tr>
</table>
<hr style="margin-top: 0;">
<table class="xrt_head">
<tr><td><code>v0.3.2-2-g4aab1a6</code></td><td style="text-align: right">2021-09-07</td></tr>
</table>

</header>

<nav id="TOC" role="doc-toc">
    <strong>Contents</strong><label for="contents">⊕</label>
  <input type="checkbox" id="contents">
  <ul>
  <li><a href="#iotraits.jl">IOTraits.jl</a>
  <ul>
  <li><a href="#background">Background</a></li>
  <li><a href="#overview">Overview</a></li>
  <li><a href="#io-interface-model">IO Interface Model</a>
  <ul>
  <li><a href="#io-or-stream">IO or Stream?</a></li>
  <li><a href="#aspects-of-the-stream-interface">Aspects of the Stream interface</a></li>
  <li><a href="#methods-of-base-functions-for-streams">Methods of Base Functions for Streams</a></li>
  <li><a href="#stream-delegation-wrappers">Stream Delegation Wrappers</a></li>
  </ul></li>
  <li><a href="#unfiled-notes">Unfiled Notes</a></li>
  </ul></li>
  <li><a href="#transfer-direction-trait">Transfer Direction Trait</a></li>
  <li><a href="#io-indexing-trait">IO Indexing Trait</a></li>
  <li><a href="#data-transfer-function">Data Transfer Function</a>
  <ul>
  <li><a href="#transfera-b"><code>transfer(a =&gt; b)</code></a></li>
  </ul></li>
  <li><a href="#buffer-interface-traits">Buffer Interface Traits</a></li>
  <li><a href="#transfer-function-dispatch">Transfer Function Dispatch</a>
  <ul>
  <li><a href="#start-index-normalisation"><code>start</code> Index Normalisation</a></li>
  <li><a href="#applicaiton-of-direction-and-buffer-interface-traits">Applicaiton of Direction and Buffer Interface Traits</a></li>
  <li><a href="#transfer-specialisations-for-indexable-buffers">Transfer Specialisations for Indexable Buffers</a></li>
  <li><a href="#transfer-specialisations-for-iterable-buffers">Transfer Specialisations for Iterable Buffers</a></li>
  <li><a href="#transfer-specialisations-for-collection-buffers">Transfer Specialisations for Collection Buffers</a></li>
  <li><a href="#transfer-specialisations-for-io-buffers">Transfer Specialisations for IO Buffers</a></li>
  </ul></li>
  <li><a href="#total-data-size-trait">Total Data Size Trait</a></li>
  <li><a href="#transfer-size-trait">Transfer Size Trait</a></li>
  <li><a href="#data-fragmentation-trait">Data Fragmentation Trait</a></li>
  <li><a href="#performance-traits">Performance Traits</a></li>
  <li><a href="#cursor-traits-mark-seek">Cursor Traits (Mark &amp; Seek)</a></li>
  <li><a href="#event-notification-mechanism-trait">Event Notification Mechanism Trait</a>
  <ul>
  <li><a href="#preferred-polling-mechanism">Preferred Polling Mechanism</a></li>
  </ul></li>
  <li><a href="#null-streams">Null Streams</a></li>
  <li><a href="#bufferedio">BufferedIO</a>
  <ul>
  <li><a href="#bufferedin">BufferedIn</a></li>
  <li><a href="#lazybufferedin">LazyBufferedIn</a></li>
  </ul></li>
  <li><a href="#timeout-io">Timeout IO</a></li>
  <li><a href="#base.io-interface">Base.IO Interface</a>
  <ul>
  <li><a href="#function-bytesavailable">Function <code>bytesavailable</code></a></li>
  <li><a href="#function-eof">Function <code>eof</code></a></li>
  <li><a href="#function-readio-t">Function <code>read(io, T)</code></a></li>
  <li><a href="#function-lengthio">Function <code>length(io)</code></a></li>
  <li><a href="#function-readbytes">Function <code>readbytes!</code></a></li>
  <li><a href="#function-readio">Function <code>read(io)</code></a></li>
  <li><a href="#function-readio-n">Function <code>read(io, n)</code></a></li>
  <li><a href="#function-unsafe_read">Function <code>unsafe_read</code></a></li>
  <li><a href="#function-readavailable">Function <code>readavailable</code></a></li>
  <li><a href="#function-readline">Function <code>readline</code></a>
  <ul>
  <li><a href="#readlineio-readslines"><code>readline(io, ::ReadsLines)</code></a></li>
  </ul></li>
  <li><a href="#function-readuntil">Function <code>readuntil</code></a></li>
  </ul></li>
  <li><a href="#exports">Exports</a>
  <ul>
  <li><a href="#possibly-related-issues">Possibly Related Issues</a></li>
  </ul></li>
  <li><a href="#method-resolution-info">Method Resolution Info</a>
  <ul>
  <li><a href="#bufferedin-1">BufferedIn</a></li>
  <li><a href="#io-traits">IO Traits</a></li>
  <li><a href="#core-read-methods">Core Read Methods</a></li>
  <li><a href="#core-write-methods">Core Write Methods</a></li>
  <li><a href="#state-methods">State Methods</a></li>
  <li><a href="#cursor-methods">Cursor Methods</a></li>
  <li><a href="#extra-read-methods">Extra Read Methods</a></li>
  <li><a href="#nullin">NullIn</a></li>
  <li><a href="#io-traits-1">IO Traits</a></li>
  <li><a href="#core-read-methods-1">Core Read Methods</a></li>
  <li><a href="#core-write-methods-1">Core Write Methods</a></li>
  <li><a href="#state-methods-1">State Methods</a></li>
  <li><a href="#cursor-methods-1">Cursor Methods</a></li>
  <li><a href="#extra-read-methods-1">Extra Read Methods</a></li>
  </ul></li>
  </ul>
</nav>

<main>
<h1 id="iotraits.jl">IOTraits.jl</h1>
<p><a href="https://www.juliabloggers.com/the-emergent-features-of-julialang-part-ii-traits/">Trait types</a> for describing the capabilities and behaviour of IO interfaces.</p>
<div class="sourceCode" id="cb1" data-startFrom="7"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 6;"><span id="cb1-7"><a href="#cb1-7"></a><span class="kw">module</span> IOTraits</span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">include</span>(<span class="st">&quot;idoc.jl&quot;</span>)</span></code></pre></div>
<h2 id="background">Background</h2>
<p>This collection of Trait types began as a tool for resolving method selection issues in the UnixIO.jl package. Everything in Unix is a file, but there are many types of file, many types of Unix, and many ways a file handled can be configured.</p>
<p>Selection of correct (or most efficient) methods can often be achieved with a simple type hierarchy. However traits seemed to be useful way to deal with variations in behaviour that depend file handle configuration and platform. In general <code>libc</code>’s <code>write(2)</code> and <code>read(2)</code> can be used to transfer data to or from any Unix file descriptor. However, the precise behaviour of these functions depends on many factors.</p>
<p>Will <code>read</code> block?, if not, will it return less than the requested number of bytes? Can I query the number of bytes available to read first? How should I wait for more bytes? If more than one line is buffered will <code>read</code> return all of them? Will read ever return a partial line? Will every call to <code>write(2)</code> result in a packet being transmitted? Is it efficient to write one byte at a time? Does <code>lseek</code> work with this file? Does <code>FIONREAD</code> work with this file?</p>
<p>The answers depend on combinations of file type, configuration and platform.</p>
<p>IOTraits expands on the traits from UnixIO.jl in the hope of making them more broadly useful. According to the <a href="https://en.wikipedia.org/wiki/Law_of_the_hammer">law of the hammer</a> some of this is probably overkill. The intention is to consider the application of Trait types to various aspects of IO and to see where it leads.</p>
<h2 id="overview">Overview</h2>
<p>The IOTraits interface is built around the <code>transfer(stream, buffer)</code> function. This function transfers data between a stream and a buffer.</p>
<p>Traits are used to specify the behaviour of the stream and the buffer.</p>
<table>
<colgroup>
<col style="width: 33%" />
<col style="width: 66%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Trait</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>TransferDirection</code></td>
<td style="text-align: left;">Which way is the transfer?<br />
(<code>In</code>, <code>Out</code> or <code>Exchange</code>).</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>StreamIndexing</code></td>
<td style="text-align: left;">Is indexing (e.g. <code>pread(2)</code>) supported?<br />
(<code>NotIndexable</code>, <code>IndexableIO</code>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>FromBufferInterface</code></td>
<td style="text-align: left;">How to get data from the buffer?<br />
(<code>FromIO</code>, <code>FromPop</code>, <code>FromTake</code>, <code>UsingIndex</code>, <code>FromIteration</code> or <code>UsingPtr</code>)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>ToBufferInterface</code></td>
<td style="text-align: left;">How to put data into the buffer?<br />
(<code>ToIO</code>, <code>ToPush</code>, <code>ToPut</code>, <code>UsingIndex</code> or <code>UsingPtr</code>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>TotalSize</code></td>
<td style="text-align: left;">How much data is available?<br />
(<code>UnknownTotalSize</code>, <code>VariableTotalSize</code>, <code>FixedTotalSize</code>, or <code>InfiniteTotalSize</code>)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>TransferSize</code></td>
<td style="text-align: left;">How much data can be moved in a single transfer?<br />
(<code>UnknownTransferSize</code>, <code>KnownTransferSize</code>, <code>LimitedTransferSize</code> or <code>FixedTransferSize</code>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>ReadFragmentation</code></td>
<td style="text-align: left;">What guarantees are made about fragmentation?<br />
(<code>ReadsBytes</code>, <code>ReadsLines</code>, <code>ReadsPackets</code> or <code>ReadsRequestedSize</code>)</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>CursorSupport</code></td>
<td style="text-align: left;">Are <code>mark</code> and <code>seek</code> supported?<br />
(<code>NoCursors</code>, <code>Seekable</code> or <code>Markable</code>)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>WaitingMechanism</code></td>
<td style="text-align: left;">How to wait for activity?<br />
(<code>WaitBySleeping</code>, <code>WaitUsingPosixPoll</code>, <code>WaitUsingEPoll</code>, <code>WaitUsingPidFD</code> or <code>WaitUsingKQueue</code>)</td>
</tr>
</tbody>
</table>
<h2 id="io-interface-model">IO Interface Model</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode julia"><code class="sourceCode julia"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>julia<span class="op">&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>help?<span class="op">&gt;</span> <span class="bu">Base</span>.<span class="dt">IO</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  No documentation found.</span></code></pre></div>
<p>As it stands Julia doesn’t have a well defined generic interface for IO. It isn’t possible to write a generic library that accepts <code>&lt;: IO</code> objects because specification of the <code>IO</code> interface is not complete and the reference implementations are inconsistent. <span class="sidenote-wrapper"><label for="sn-0" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-0" class="margin-toggle"/><span class="sidenote">Issue <a href="https://github.com/JuliaLang/julia/issues/24526">24526</a> “Review of IO blocking behaviour” describes inconsistencies in blocking, termination and allocation behaviour. There are both inconsistencies between behaviour of different functions and between different methods of the same functions.<br />
<br />
</span></span> There are also instances where <code>IO</code> behaviour is well defined but function naming isn’t ideal, or default behaviour can be surprising.<span class="sidenote-wrapper"><label for="sn-1" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-1" class="margin-toggle"/><span class="sidenote">e.g. <code>eof(io) -&gt; Bool</code> looks like a simple query function but it actually blocks to wait for data.<br />
<br />
</span></span></p>
<h3 id="io-or-stream">IO or Stream?</h3>
<p>The Julia IO interface is built around the abstract type <code>Base.IO</code>. The <code>IO</code> interface specifications refer to <code>IO</code> objects as “stream” in some places and “io” in others.<span class="sidenote-wrapper"><label for="sn-2" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-2" class="margin-toggle"/><span class="sidenote">Examples from function signatures: <code>close(stream)</code>, <code>bytesavailable(io)</code>, <code>readavailable(stream)</code>, <code>isreadable(io)</code>, <code>read(io::IO, String)</code>, <code>eof(stream)</code>.<br />
Examples from function descriptions: “The IO stream”, “the specified IO object” “the given I/O stream”, “the stream <code>io</code>”, “the stream or file”.<br />
Note: <code>Base.IOStream</code> is a concrete subtype of <code>IO</code> that implements local file system IO. References to “stream” and “IO stream” in existing <code>IO</code> interface specifications are not related to <code>Base.IOStream</code>.<br />
<br />
</span></span> The IOTraits interface defines <code>IOTraits.Stream</code> and uses the word “stream” to refer to instances of this type. To avoid ambiguity: instances of <code>IO</code> are referred to as “a <code>Base.IO</code> object”. Also, for clarity <code>IOTraits.Stream</code> is not a subtype of <code>Base.IO</code>.</p>
<p>The <code>Stream</code> type models byte-streams. Many common operations involve transferring data to and from byte streams. e.g. writing data to a local file; receiving data from a network server; or typing commands into a terminal.</p>
<div class="sourceCode" id="cb3" data-startFrom="147"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 146;"><span id="cb3-147"><a href="#cb3-147"></a><span class="kw">abstract type</span> Stream <span class="kw">end</span></span></code></pre></div>
<p><code>TraitsIO(::Stream) -&gt; IO</code> creates a <code>Base.IO</code> compatible wrapper around a stream. Similarities and differences between the <code>Base.IO</code> model and the <code>IOTraits.Stream</code> model can be seen by reading the <code>TraitsIO</code> implementations of the <code>Base.IO</code> functions below.</p>
<div class="sourceCode" id="cb4" data-startFrom="156"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 155;"><span id="cb4-156"><a href="#cb4-156"></a><span class="kw">struct</span> TraitsIO{T<span class="op">&lt;:</span><span class="dt">Stream</span>} <span class="op">&lt;:</span><span class="dt"> Base.IO</span></span>
<span id="cb4-157"><a href="#cb4-157"></a>    stream<span class="op">::</span><span class="dt">T</span></span>
<span id="cb4-158"><a href="#cb4-158"></a><span class="kw">end</span></span></code></pre></div>
<h3 id="aspects-of-the-stream-interface">Aspects of the Stream interface</h3>
<p>Issue <a href="https://github.com/JuliaLang/julia/issues/24526#issuecomment-431567472">24526</a> identified three aspects of behaviour in the <code>Base.read*</code> interface that, without precise specification, lead to ambiguity and inconsistency:</p>
<ul>
<li>allocation: read into the caller’s buffer? (resize this buffer?) or return a new buffer?</li>
<li>termination: read a specified size?, up to a delimiter? or read as much as possible?</li>
<li>blocking: wait however long it takes for the termination condition to be reached? or return early if insufficient data is available?</li>
</ul>
<p>The IOTraits interface attempts to limit the number of behavioural permutations as much as possible by choosing a default behaviour for each aspect and supporting other behaviours only by addition of clean wrapper layers.</p>
<p><strong>Allocation:</strong> The <code>transfer</code> function never allocates buffers or resizes buffers it simply transfers bytes to or from the buffer provided. Exceptions to this rule are possible through the <a href="#buffer-interface-traits">Buffer Interface Traits</a> <span class="sidenote-wrapper"><label for="sn-3" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-3" class="margin-toggle"/><span class="sidenote">e.g. if <code>ToBufferInterface(buffer) == ToPush()</code> data is pushed into the buffer, which may lead to resizing.<br />
<br />
</span></span>. The interface aims to support implementations that wish to avoid unnecessary buffering. It should be simple to write a transfer method that passes a supplied buffer directly to an OS system call. Buffering can be added in wrapper layers as needed.</p>
<p><strong>Termination:</strong> The <code>transfer</code> function is specified to “transfer at most <code>n</code> items” and “Return the number of items transferred”. i.e. if some amount of data is available, return it right away rather than waiting for the entire requested amount. This behaviour can easily be wrapped with a retry layer to support cases where all <code>n</code> items are required.</p>
<p><strong>Blocking:</strong> By default the <code>transfer</code> function waits indefinitely for data to be available. Control over this behaviour is provided by the optional <code>deadline=</code> argument. <code>transfer</code> stops waiting when <code>deadline &gt; time()</code>. This interface allows non-blocking transfers (<code>deadline=0</code>), blocking transfers (<code>deadline=Inf</code>) or anything in between.<span class="sidenote-wrapper"><label for="sn-4" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-4" class="margin-toggle"/><span class="sidenote">Note that <code>transfer</code> will always return data that is immediately available irrespective of the deadline. i.e. There is no race condition when <code>deadline ~= time()</code>.<br />
<br />
</span></span></p>
<p>The combination of the chosen termination and blocking behavior leads to two cases where <code>transfer</code> returns zero: End of stream (EOF), and deadline expired. This seems like a nice unification of the treatment of streams that have a distinct end and those that don’t. The caller can specify a deadline that makes sense for their application and not have to worry about what type of underlying OS stream is involved.<span class="sidenote-wrapper"><label for="sn-5" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-5" class="margin-toggle"/><span class="sidenote">With the current <code>IO</code> interface, there are inconsistencies. e.g. reading log messages from a pipe with <code>readline(io)</code> will block and wait for a line to be available, but reading log messages from a file will yield endless empty stings at the end of the file. The empty strings can be avoided by <code>while !eof(io) readline(io) ...</code>, but <code>eof(io)</code> returns true when all the currently available lines have been read, so to wait for more lines we would need an additional polling loop.<br />
<br />
</span></span></p>
<p>Another relevant aspect is transfer direction. Does a stream support input?, output? or both? Most operating systems have a mixture of bi-directional and uni-directional stream APIs.<span class="sidenote-wrapper"><label for="sn-6" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-6" class="margin-toggle"/><span class="sidenote">In some places Unix uses bi-directional streams. e.g. files can be opened for reading and writing and sockets are usually bi-directional. However, in many instances Unix uses distinct streams for input and output. e.g. STDIN and STDOUT are distinct streams and <code>pipe(2)</code> returns the “read end” and the “write end” of a one-way pipe. Even where Unix supports bi-directional streams there are cases where is is best to use two seperate streams for a particular resource. e.g. to eliminate ambiguity in <code>poll(2)</code> events.<br />
<br />
</span></span> Streams that are both readable and writable can be confusing<span class="sidenote-wrapper"><label for="sn-7" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-7" class="margin-toggle"/><span class="sidenote">e.g. What does <code>close(::IO)</code> do for a bi-directional stream? (<a href="https://github.com/JuliaLang/julia/issues/41995">41995</a>) Does <code>Base.position(io)</code> refer to the input position or the output position?<br />
<br />
</span></span> and difficult to implement correctly.<span class="sidenote-wrapper"><label for="sn-8" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-8" class="margin-toggle"/><span class="sidenote"><a href="https://github.com/JuliaLang/julia/issues/39727">39727</a> “Bi-directional IOStream seems to mix input and output”<br />
<br />
</span></span> It seems simpler and more general to use a model where all streams are uni-directional.</p>
<p><strong>Direction:</strong> In general a stream supports input, or output but not both. The <a href="#transfer-direction-trait">Transfer Direction Trait</a> specifies which.<span class="sidenote-wrapper"><label for="sn-9" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-9" class="margin-toggle"/><span class="sidenote">Note the <a href="#transfer-direction-trait">Transfer Direction Trait</a> supports direction: <code>Exchange</code> for interfaces like <a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface">SPI</a> where data must be synchronously exchanged between a buffer and the interface (i.e. input and output are not separable). This can be though of as having exactly the same behavior as direction <code>Out</code> except that incoming data appears in the output buffer after each output transfer.<br />
<br />
</span></span> This restriction simplifies the specification of things like <code>position</code>, <code>mark</code> and <code>seek</code>. It also avoids the need for distinctions like <code>close</code> vs <code>closewrite</code> (<a href="https://github.com/JuliaLang/julia/issues/41995">41995</a>). Bi-directonal streams can easily be added by a wrapper layer that combines two streams e.g. see DuplexIO.jl.</p>
<h3 id="methods-of-base-functions-for-streams">Methods of Base Functions for Streams</h3>
<p>The IOTraits interface avoids defining methods of Base functions that have incomplete or ambiguous specifications. It also avoids local function names names that shadow Base functions. In some cases a similar function name with an underscore prefix is used to differentiate local functions.</p>
<p>The IOTraits interface defines methods for the following well defined Base functions (the default methods for the generic <code>Stream</code> type dispatch to a wrapped delegate stream if the <code>StreamDelegation</code> trait is in effect).</p>
<div class="sourceCode" id="cb5" data-startFrom="272"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 271;"><span id="cb5-272"><a href="#cb5-272"></a><span class="bu">Base</span>.<span class="fu">isopen</span>(s<span class="op">::</span><span class="dt">Stream)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(s) ? <span class="fu">isopen</span>(<span class="fu">unwrap</span>(s)) <span class="op">:</span> <span class="cn">false</span></span>
<span id="cb5-273"><a href="#cb5-273"></a></span>
<span id="cb5-274"><a href="#cb5-274"></a><span class="bu">Base</span>.<span class="fu">close</span>(s<span class="op">::</span><span class="dt">Stream)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(s) ? <span class="fu">close</span>(<span class="fu">unwrap</span>(s)) <span class="op">:</span> <span class="cn">nothing</span></span>
<span id="cb5-275"><a href="#cb5-275"></a></span>
<span id="cb5-276"><a href="#cb5-276"></a><span class="bu">Base</span>.<span class="fu">wait</span>(s<span class="op">::</span><span class="dt">Stream)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(s) ? <span class="fu">wait</span>(<span class="fu">unwrap</span>(s)) <span class="op">:</span></span>
<span id="cb5-277"><a href="#cb5-277"></a>                                     <span class="fu">wait</span>(s<span class="op">,</span> <span class="fu">WaitingMechanism</span>(s))</span></code></pre></div>
<p>FIXME<span class="sidenote-wrapper"><label for="sn-10" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-10" class="margin-toggle"/><span class="sidenote">⚠️ wait timeout ? deadline ? args for wait ?<br />
<br />
</span></span></p>
<h3 id="stream-delegation-wrappers">Stream Delegation Wrappers</h3>
<p>The StreamDelegation trait allows a Stream subtype to delegate most method calls to a wrapped substream while redefining other methods as needed.</p>
<p>Wrappers are used to augment low level IO drivers with features like buffering or defragmentation. Wrappers are also used to make <code>Stream</code> objects compatible with <code>Base.IO</code>.</p>
<p><code>StreamDelegation(stream)</code> returns one of:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Interface</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>NotDelegated()</code></td>
<td style="text-align: left;">This stream has its own stream interface methods.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>DelegatedToSubStream()</code></td>
<td style="text-align: left;">This stream is a proxy for a sub stream.</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb6" data-startFrom="299"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 298;"><span id="cb6-299"><a href="#cb6-299"></a><span class="kw">abstract type</span> StreamDelegation <span class="kw">end</span></span>
<span id="cb6-300"><a href="#cb6-300"></a><span class="kw">struct</span> NotDelegated <span class="op">&lt;:</span><span class="dt"> StreamDelegation </span><span class="kw">end</span></span>
<span id="cb6-301"><a href="#cb6-301"></a><span class="kw">struct</span> DelegatedToSubStream <span class="op">&lt;:</span><span class="dt"> StreamDelegation </span><span class="kw">end</span></span>
<span id="cb6-302"><a href="#cb6-302"></a><span class="fu">StreamDelegation</span>(s) <span class="op">=</span> <span class="fu">StreamDelegation</span>(<span class="fu">typeof</span>(s))</span>
<span id="cb6-303"><a href="#cb6-303"></a><span class="fu">StreamDelegation</span>(<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">NotDelegated</span>()</span>
<span id="cb6-304"><a href="#cb6-304"></a></span>
<span id="cb6-305"><a href="#cb6-305"></a><span class="fu">is_proxy</span>(s) <span class="op">=</span> <span class="fu">StreamDelegation</span>(s) <span class="op">!=</span> <span class="fu">NotDelegated</span>()</span></code></pre></div>
<p><code>unwrap(stream)</code> Retrieves the underlying stream that is wrapped by a proxy stream.</p>
<div class="sourceCode" id="cb7" data-startFrom="312"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 311;"><span id="cb7-312"><a href="#cb7-312"></a><span class="fu">unwrap</span>(s) <span class="op">=</span> <span class="fu">unwrap</span>(s<span class="op">,</span> <span class="fu">StreamDelegation</span>(s))</span>
<span id="cb7-313"><a href="#cb7-313"></a><span class="fu">unwrap</span>(s<span class="op">,</span> <span class="op">::</span><span class="dt">NotDelegated)</span> <span class="op">=</span> s</span>
<span id="cb7-314"><a href="#cb7-314"></a><span class="fu">unwrap</span>(s<span class="op">,</span> <span class="op">::</span><span class="dt">DelegatedToSubStream)</span> <span class="op">=</span> s.stream</span></code></pre></div>
<h2 id="unfiled-notes">Unfiled Notes</h2>
<ul>
<li>How could <code>Base.isready</code> apply to IO? It’s definition is nice and concise: “Determine whether a Channel has a value stored to it. Returns immediately, does not block.”</li>
<li>Build <code>ReadlineMux &lt;: IOMux</code> and <code>ReadlineDemux &lt;: IODemux</code> as an example of a traits aware IO mechanism. e.g. merge multiple streams onto a single IO with a mux/demux header.</li>
<li>Consider traits to select special purpose IO functions where appropriate: <code>pread</code>, <code>readv</code>, <code>writev</code>, <code>sendfile</code> ?</li>
<li>Consider using traits to identify inefficient access patterns.
<ul>
<li>Keep stats per file
<ul>
<li>No. tranfers, No. bytes, No. seeks.</li>
<li>Time between transfers (rolling avg?)</li>
<li>Warn if stats don’t align with traits</li>
<li>e.g. large number of small reads for high per-call overhead IO.</li>
</ul></li>
</ul></li>
<li>Consider trait to characterise access speed:
<ul>
<li>fast mmap - ok for small and large requests</li>
<li>fast local - but slow for small requests</li>
<li>fast network - but slow for small requests</li>
<li>slow serial - no problem with small requests</li>
</ul></li>
<li>content:
<ul>
<li>Has bytes</li>
<li>no content (links)</li>
<li>directory</li>
</ul></li>
<li>writing
<ul>
<li>needs flush?</li>
<li>efficient to write one byte at a time?</li>
<li>natural page size?</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb8" data-startFrom="350"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 349;"><span id="cb8-350"><a href="#cb8-350"></a><span class="kw">using</span> Preconditions</span>
<span id="cb8-351"><a href="#cb8-351"></a><span class="kw">using</span> Markdown</span>
<span id="cb8-352"><a href="#cb8-352"></a><span class="kw">using</span> Preferences</span>
<span id="cb8-353"><a href="#cb8-353"></a><span class="kw">using</span> <span class="bu">Mmap</span></span>
<span id="cb8-354"><a href="#cb8-354"></a><span class="fu">include</span>(<span class="st">&quot;../../../src/macroutils.jl&quot;</span>)</span></code></pre></div>
<h1 id="transfer-direction-trait">Transfer Direction Trait</h1>
<p>The <code>TransferDirection</code> trait describes the direction of data transfer supported by a stream.</p>
<p><code>TransferDirection(stream)</code> returns one of:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Interface</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>In()</code></td>
<td style="text-align: left;">data is “read” from the <code>IO</code> into a buffer.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Out()</code></td>
<td style="text-align: left;">data from a buffer is “written” to the <code>IO</code>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>Exchange()</code></td>
<td style="text-align: left;">data is exchanged between the <code>IO</code> and a buffer.<span class="sidenote-wrapper"><label for="sn-11" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-11" class="margin-toggle"/><span class="sidenote">e.g. a <a href="https://en.wikipedia.org/wiki/Serial_Peripheral_Interface">SPI</a> interface receives a byte for every byte transmitted.<br />
<br />
</span></span></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb9" data-startFrom="376"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 375;"><span id="cb9-376"><a href="#cb9-376"></a><span class="kw">abstract type</span> TransferDirection <span class="kw">end</span></span>
<span id="cb9-377"><a href="#cb9-377"></a><span class="kw">struct</span> In <span class="op">&lt;:</span><span class="dt"> TransferDirection </span><span class="kw">end</span></span>
<span id="cb9-378"><a href="#cb9-378"></a><span class="kw">struct</span> Out <span class="op">&lt;:</span><span class="dt"> TransferDirection </span><span class="kw">end</span></span>
<span id="cb9-379"><a href="#cb9-379"></a><span class="kw">struct</span> Exchange <span class="op">&lt;:</span><span class="dt"> TransferDirection </span><span class="kw">end</span></span>
<span id="cb9-380"><a href="#cb9-380"></a><span class="kw">const</span> AnyDirection <span class="op">=</span> TransferDirection</span>
<span id="cb9-381"><a href="#cb9-381"></a><span class="fu">TransferDirection</span>(s) <span class="op">=</span> <span class="fu">TransferDirection</span>(<span class="fu">typeof</span>(s))</span>
<span id="cb9-382"><a href="#cb9-382"></a><span class="fu">TransferDirection</span>(T<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(T) ? <span class="fu">TransferDirection</span>(<span class="fu">unwrap</span>(T)) <span class="op">:</span></span>
<span id="cb9-383"><a href="#cb9-383"></a>                                           <span class="cn">nothing</span></span>
<span id="cb9-384"><a href="#cb9-384"></a></span>
<span id="cb9-385"><a href="#cb9-385"></a><span class="fu">_isreadable</span>(s) <span class="op">=</span> <span class="fu">TransferDirection</span>(s) <span class="op">!=</span> <span class="fu">Out</span>()</span>
<span id="cb9-386"><a href="#cb9-386"></a><span class="fu">_iswritable</span>(s) <span class="op">=</span> <span class="fu">TransferDirection</span>(s) <span class="op">!=</span> <span class="fu">In</span>()</span></code></pre></div>
<h1 id="io-indexing-trait">IO Indexing Trait</h1>
<p>Is indexing (e.g. <code>pread(2)</code>) supported?</p>
<div class="sourceCode" id="cb10" data-startFrom="396"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 395;"><span id="cb10-396"><a href="#cb10-396"></a><span class="kw">abstract type</span> StreamIndexing <span class="kw">end</span></span>
<span id="cb10-397"><a href="#cb10-397"></a><span class="kw">struct</span> NotIndexable <span class="op">&lt;:</span><span class="dt"> StreamIndexing </span><span class="kw">end</span></span>
<span id="cb10-398"><a href="#cb10-398"></a><span class="kw">struct</span> IndexableIO <span class="op">&lt;:</span><span class="dt"> StreamIndexing </span><span class="kw">end</span></span>
<span id="cb10-399"><a href="#cb10-399"></a><span class="fu">StreamIndexing</span>(s) <span class="op">=</span> <span class="fu">StreamIndexing</span>(<span class="fu">typeof</span>(s))</span>
<span id="cb10-400"><a href="#cb10-400"></a><span class="fu">StreamIndexing</span>(T<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(T) ? <span class="fu">StreamIndexing</span>(<span class="fu">unwrap</span>(T)) <span class="op">:</span></span>
<span id="cb10-401"><a href="#cb10-401"></a>                                        NotIndexable</span>
<span id="cb10-402"><a href="#cb10-402"></a></span>
<span id="cb10-403"><a href="#cb10-403"></a><span class="fu">stream_is_indexable</span>(s) <span class="op">=</span> <span class="fu">StreamIndexing</span>(s) <span class="op">==</span> <span class="fu">IndexableIO</span>()</span>
<span id="cb10-404"><a href="#cb10-404"></a></span>
<span id="cb10-405"><a href="#cb10-405"></a></span>
<span id="cb10-406"><a href="#cb10-406"></a><span class="fu">ioeltype</span>(s) <span class="op">=</span> <span class="fu">isabstracttype</span>(<span class="fu">eltype</span>(s)) ? <span class="dt">UInt8</span> <span class="op">:</span> <span class="fu">eltype</span>(s)</span></code></pre></div>
<h1 id="data-transfer-function">Data Transfer Function</h1>
<pre><code>transfer(stream, buffer, [n]; start=1, deadline=Inf) -&gt; n_transfered</code></pre>
<p>Transfer at most <code>n</code> items between <code>stream</code> and <code>buffer</code>.<span class="sidenote-wrapper"><label for="sn-12" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-12" class="margin-toggle"/><span class="sidenote">If <code>n</code> is not specified then the number of items transferred depends on the number of items available and the capacity of <code>buffer</code>.<br />
<br />
</span></span> Return the number of items transferred.</p>
<p>If no items are immediately available, wait until <code>time() &gt; deadline</code> for at least one item to be transferred.<span class="sidenote-wrapper"><label for="sn-13" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-13" class="margin-toggle"/><span class="sidenote">The <a href="#event-notification-mechanism-trait"><code>WaitingMechanism</code></a> trait determines what polling mechamism is used.<br />
<br />
</span></span> If the optional <code>timeout=</code> argument is provided then the deadline is <code>time() + timeout</code>.</p>
<p><code>start</code> specifies a buffer index at which the transfer begins. If <code>stream</code> is indexable then <code>start</code> can be a tuple of two indexes: <code>(stream_start_byte_index, buffer_start_index)</code>.</p>
<p>The direction of transfer (<code>In</code>, <code>Out</code> or <code>Exchange</code>) depends on <code>TransferDirection(stream)</code>.</p>
<p>The type of items transferred depends on <code>ioeltype(buffer)</code>.<span class="sidenote-wrapper"><label for="sn-14" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-14" class="margin-toggle"/><span class="sidenote">By default <code>ioeltype(x) = eltype(x)</code>.<br />
<br />
</span></span></p>
<p>The <code>buffer</code> can be an <code>AbstractArray</code>, an <code>AbstractChannel</code>, a <code>URI</code>, an <code>IO</code>, or another <code>Stream</code>. Or, the <code>buffer</code> can be any collection that implements the Iteration Interface, the Indexing Interface, the AbstractChannel interface, or the <code>push!</code>/<code>pop!</code> interface.<span class="sidenote-wrapper"><label for="sn-15" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-15" class="margin-toggle"/><span class="sidenote">In some cases it is necessary to define a method of <a href="#buffer-interface-traits"><code>ToBufferInterface</code> or <code>FromBufferInterface</code></a> to specify the interface to use for a particular buffer type (e.g. if a buffer implements more than one of the supported interfaces). Defining these trait methods can also help to ensure that the most efficient interface is used for a particular buffer type.<br />
<br />
</span></span></p>
<p>If either the <code>stream</code> or the <code>buffer</code> is a <code>URI</code> then items are transferred to (or from) the identified resource. A transfer to a <code>URI</code> creates a new resource or replaces the resource (i.e. HTTP PUT semantics).</p>
<div class="sourceCode" id="cb12" data-startFrom="456"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 455;"><span id="cb12-456"><a href="#cb12-456"></a><span class="kw">function</span> <span class="fu">transfer</span>(stream<span class="op">,</span> buf<span class="op">,</span> n<span class="op">=</span><span class="cn">missing</span><span class="op">;</span></span>
<span id="cb12-457"><a href="#cb12-457"></a>                  start<span class="op">::</span><span class="dt">Union{Integer, NTuple{2,Integer}}=</span><span class="fl">1</span><span class="op">,</span></span>
<span id="cb12-458"><a href="#cb12-458"></a>                  timeout<span class="op">=</span><span class="cn">Inf</span><span class="op">,</span></span>
<span id="cb12-459"><a href="#cb12-459"></a>                  deadline<span class="op">=</span><span class="cn">Inf</span>)</span>
<span id="cb12-460"><a href="#cb12-460"></a></span>
<span id="cb12-461"><a href="#cb12-461"></a>    <span class="pp">@require</span> <span class="fu">isopen</span>(stream)</span>
<span id="cb12-462"><a href="#cb12-462"></a>    <span class="cf">if</span> timeout <span class="op">!=</span> <span class="cn">Inf</span></span>
<span id="cb12-463"><a href="#cb12-463"></a>        deadline <span class="op">=</span> <span class="fu">time</span>() <span class="op">+</span> timeout</span>
<span id="cb12-464"><a href="#cb12-464"></a>    <span class="cf">end</span></span>
<span id="cb12-465"><a href="#cb12-465"></a>    n <span class="op">=</span> <span class="fu">transfer</span>(stream<span class="op">,</span> buf<span class="op">,</span> n<span class="op">,</span> start<span class="op">,</span> deadline)</span>
<span id="cb12-466"><a href="#cb12-466"></a>    <span class="fu">transfer_complete</span>(stream<span class="op">,</span> buf<span class="op">,</span> n)</span>
<span id="cb12-467"><a href="#cb12-467"></a>    <span class="cf">return</span> n</span>
<span id="cb12-468"><a href="#cb12-468"></a><span class="kw">end</span></span></code></pre></div>
<p><code>transfer_complete</code> is called at the end of the top-level <code>transfer</code> method. A single call to the top-level <code>tansfer</code> method may result in many calls to low level driver methods. e.g. to transfer every item in a collection. The <code>transfer_complete</code> hook can be used, for example, to flush an output buffer at end of a transfer.</p>
<div class="sourceCode" id="cb13" data-startFrom="478"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 477;"><span id="cb13-478"><a href="#cb13-478"></a><span class="fu">transfer_complete</span>(stream<span class="op">,</span> buf<span class="op">,</span> n) <span class="op">=</span> <span class="cn">nothing</span></span></code></pre></div>
<h3 id="transfera-b"><code>transfer(a =&gt; b)</code></h3>
<pre><code>transfer(stream =&gt; buffer, [n]; start=(1 =&gt; 1), kw...) -&gt; n_transfered
transfer(buffer =&gt; stream, [n]; start=(1 =&gt; 1), kw...) -&gt; n_transfered</code></pre>
<p><code>stream</code> and <code>buffer</code> can be passed to <code>transfer</code> as a pair. <code>In</code> streams must be on the left. <code>Out</code> streams must be on the right.</p>
<div class="sourceCode" id="cb15" data-startFrom="491"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 490;"><span id="cb15-491"><a href="#cb15-491"></a><span class="kw">function</span> <span class="fu">transfer</span>(t<span class="op">::</span><span class="dt">Pair{&lt;:Stream,&lt;:Any},</span> a<span class="op">...;</span> start<span class="op">=</span>(<span class="fl">1</span> <span class="op">=&gt;</span> <span class="fl">1</span>)<span class="op">,</span> kw<span class="op">...</span>)</span>
<span id="cb15-492"><a href="#cb15-492"></a>    <span class="pp">@require</span> <span class="fu">TransferDirection</span>(t[<span class="fl">1</span>]) <span class="op">==</span> <span class="fu">In</span>()</span>
<span id="cb15-493"><a href="#cb15-493"></a>    <span class="cf">if</span> start isa <span class="dt">Pair</span></span>
<span id="cb15-494"><a href="#cb15-494"></a>        start <span class="op">=</span> (start[<span class="fl">1</span>]<span class="op">,</span> start[<span class="fl">2</span>])</span>
<span id="cb15-495"><a href="#cb15-495"></a>    <span class="cf">end</span></span>
<span id="cb15-496"><a href="#cb15-496"></a>    <span class="fu">transfer</span>(t[<span class="fl">1</span>]<span class="op">,</span> t[<span class="fl">2</span>]<span class="op">,</span> a<span class="op">...;</span> start<span class="op">,</span> kw<span class="op">...</span>)</span>
<span id="cb15-497"><a href="#cb15-497"></a><span class="kw">end</span></span>
<span id="cb15-498"><a href="#cb15-498"></a></span>
<span id="cb15-499"><a href="#cb15-499"></a><span class="kw">function</span> <span class="fu">transfer</span>(t<span class="op">::</span><span class="dt">Pair{&lt;:Any,&lt;:Stream},</span> a<span class="op">...;</span> start<span class="op">=</span>(<span class="fl">1</span> <span class="op">=&gt;</span> <span class="fl">1</span>)<span class="op">,</span> kw<span class="op">...</span>)</span>
<span id="cb15-500"><a href="#cb15-500"></a>    <span class="pp">@require</span> <span class="fu">TransferDirection</span>(t[<span class="fl">2</span>]) <span class="op">==</span> <span class="fu">Out</span>()</span>
<span id="cb15-501"><a href="#cb15-501"></a>    <span class="cf">if</span> start isa <span class="dt">Pair</span></span>
<span id="cb15-502"><a href="#cb15-502"></a>        start <span class="op">=</span> (start[<span class="fl">2</span>]<span class="op">,</span> start[<span class="fl">1</span>])</span>
<span id="cb15-503"><a href="#cb15-503"></a>    <span class="cf">end</span></span>
<span id="cb15-504"><a href="#cb15-504"></a>    <span class="fu">transfer</span>(t[<span class="fl">2</span>]<span class="op">,</span> t[<span class="fl">1</span>]<span class="op">,</span> a<span class="op">...;</span> start<span class="op">=</span>start<span class="op">,</span> kw<span class="op">...</span>)</span>
<span id="cb15-505"><a href="#cb15-505"></a><span class="kw">end</span></span></code></pre></div>
<h1 id="buffer-interface-traits">Buffer Interface Traits</h1>
<div class="sourceCode" id="cb16" data-startFrom="511"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 510;"><span id="cb16-511"><a href="#cb16-511"></a><span class="kw">abstract type</span> BufferInterface <span class="kw">end</span></span>
<span id="cb16-512"><a href="#cb16-512"></a><span class="kw">struct</span> UsingIndex <span class="op">&lt;:</span><span class="dt"> BufferInterface </span><span class="kw">end</span></span>
<span id="cb16-513"><a href="#cb16-513"></a><span class="kw">struct</span> UsingPtr <span class="op">&lt;:</span><span class="dt"> BufferInterface </span><span class="kw">end</span></span>
<span id="cb16-514"><a href="#cb16-514"></a><span class="kw">struct</span> RawPtr <span class="op">&lt;:</span><span class="dt"> BufferInterface </span><span class="kw">end</span></span>
<span id="cb16-515"><a href="#cb16-515"></a><span class="kw">struct</span> FromIO <span class="op">&lt;:</span><span class="dt"> BufferInterface </span><span class="kw">end</span></span>
<span id="cb16-516"><a href="#cb16-516"></a><span class="kw">struct</span> FromPop <span class="op">&lt;:</span><span class="dt"> BufferInterface </span><span class="kw">end</span></span>
<span id="cb16-517"><a href="#cb16-517"></a><span class="kw">struct</span> FromTake <span class="op">&lt;:</span><span class="dt"> BufferInterface </span><span class="kw">end</span></span>
<span id="cb16-518"><a href="#cb16-518"></a><span class="kw">struct</span> FromIteration <span class="op">&lt;:</span><span class="dt"> BufferInterface </span><span class="kw">end</span></span>
<span id="cb16-519"><a href="#cb16-519"></a><span class="kw">struct</span> ToIO <span class="op">&lt;:</span><span class="dt"> BufferInterface </span><span class="kw">end</span></span>
<span id="cb16-520"><a href="#cb16-520"></a><span class="kw">struct</span> ToPush <span class="op">&lt;:</span><span class="dt"> BufferInterface </span><span class="kw">end</span></span>
<span id="cb16-521"><a href="#cb16-521"></a><span class="kw">struct</span> ToPut <span class="op">&lt;:</span><span class="dt"> BufferInterface </span><span class="kw">end</span></span></code></pre></div>
<p>The <code>FromBufferInterface</code> trait defines what interface is used to take data from a particular buffer type (or what interface is preferred for best performance).</p>
<p><code>FromBufferInterface(buffer)</code> returns one of:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Interface</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>FromIO()</code></td>
<td style="text-align: left;">Take data from the buffer using the <code>Base.IO</code> interface.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>FromPop()</code></td>
<td style="text-align: left;">Use <code>pop!(buffer)</code> to read from the buffer.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>FromTake()</code></td>
<td style="text-align: left;">Use <code>take!(buffer)</code>.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>FromIteration()</code></td>
<td style="text-align: left;">Use <code>for x in buffer...</code>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>UsingIndex()</code></td>
<td style="text-align: left;">Use <code>buffer[i]</code> (the default).</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>UsingPtr()</code></td>
<td style="text-align: left;">Use <code>unsafe_copyto!(pointer(buffer), x, n)</code>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>RawPtr()</code></td>
<td style="text-align: left;">Use <code>unsafe_copyto!(buffer, x, n)</code>.</td>
</tr>
</tbody>
</table>
<p>Default <code>FromBufferInterface</code> methods are built in for common buffer types:</p>
<div class="sourceCode" id="cb17" data-startFrom="543"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 542;"><span id="cb17-543"><a href="#cb17-543"></a><span class="fu">FromBufferInterface</span>(x) <span class="op">=</span> <span class="fu">FromBufferInterface</span>(<span class="fu">typeof</span>(x))</span>
<span id="cb17-544"><a href="#cb17-544"></a><span class="fu">FromBufferInterface</span>(<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">FromIteration</span>()</span>
<span id="cb17-545"><a href="#cb17-545"></a><span class="fu">FromBufferInterface</span>(<span class="op">::</span><span class="dt">Type{&lt;:IO})</span> <span class="op">=</span> <span class="fu">FromIO</span>()</span>
<span id="cb17-546"><a href="#cb17-546"></a><span class="fu">FromBufferInterface</span>(<span class="op">::</span><span class="dt">Type{&lt;:AbstractChannel})</span> <span class="op">=</span> <span class="fu">FromTake</span>()</span>
<span id="cb17-547"><a href="#cb17-547"></a><span class="fu">FromBufferInterface</span>(<span class="op">::</span><span class="dt">Type{&lt;:Ptr})</span> <span class="op">=</span> <span class="fu">RawPtr</span>()</span>
<span id="cb17-548"><a href="#cb17-548"></a><span class="fu">FromBufferInterface</span>(<span class="op">::</span><span class="dt">Type{&lt;:Ref})</span> <span class="op">=</span> <span class="fu">UsingPtr</span>()</span></code></pre></div>
<p>Pointers can be used for <code>AbstractArray</code> buffers of Bits types.</p>
<div class="sourceCode" id="cb18" data-startFrom="554"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 553;"><span id="cb18-554"><a href="#cb18-554"></a><span class="fu">FromBufferInterface</span>(T<span class="op">::</span><span class="dt">Type{&lt;:AbstractArray})</span> <span class="op">=</span> <span class="fu">ArrayIOInterface</span>(T)</span>
<span id="cb18-555"><a href="#cb18-555"></a></span>
<span id="cb18-556"><a href="#cb18-556"></a><span class="fu">ArrayIOInterface</span>(<span class="op">::</span><span class="dt">Type{&lt;:Array{T}})</span> <span class="kw">where</span> T <span class="op">=</span></span>
<span id="cb18-557"><a href="#cb18-557"></a>    <span class="fu">isbitstype</span>(T) ? <span class="fu">UsingPtr</span>() <span class="op">:</span> <span class="fu">UsingIndex</span>()</span>
<span id="cb18-558"><a href="#cb18-558"></a></span>
<span id="cb18-559"><a href="#cb18-559"></a><span class="fu">ArrayIOInterface</span>(<span class="op">::</span><span class="dt">Type{&lt;:Base.FastContiguousSubArray{T,&lt;:Any,&lt;:Array{T}}})</span> <span class="kw">where</span> T <span class="op">=</span></span>
<span id="cb18-560"><a href="#cb18-560"></a>    <span class="fu">isbitstype</span>(T) ? <span class="fu">UsingPtr</span>() <span class="op">:</span> <span class="fu">UsingIndex</span>()</span></code></pre></div>
<p>The <code>ToBufferInterface</code> trait defines what interface is used to store data in a particular type of buffer (or what interface is preferred for best performance).</p>
<p><code>ToBufferInterface(buffer)</code> one of:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Interface</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>ToIO</code></td>
<td style="text-align: left;">Write data to the buffer using the <code>Base.IO</code> interface.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>ToPush</code></td>
<td style="text-align: left;">Use <code>push!(buffer, data)</code>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>ToPut</code></td>
<td style="text-align: left;">Use <code>put!(buffer, data)</code>.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>UsingIndex</code></td>
<td style="text-align: left;">Use <code>buffer[i] = data (the default)</code>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>UsingPtr</code></td>
<td style="text-align: left;">Use <code>unsafe_copyto!(x, pointer(buffer), n)</code>.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>RawPtr</code></td>
<td style="text-align: left;">Use <code>unsafe_copyto!(x, buffer, n)</code>.</td>
</tr>
</tbody>
</table>
<p>Default <code>ToBufferInterface</code> methods are built in for common buffer types.</p>
<div class="sourceCode" id="cb19" data-startFrom="583"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 582;"><span id="cb19-583"><a href="#cb19-583"></a><span class="fu">ToBufferInterface</span>(x) <span class="op">=</span> <span class="fu">ToBufferInterface</span>(<span class="fu">typeof</span>(x))</span>
<span id="cb19-584"><a href="#cb19-584"></a><span class="fu">ToBufferInterface</span>(<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">ToPush</span>()</span>
<span id="cb19-585"><a href="#cb19-585"></a><span class="fu">ToBufferInterface</span>(<span class="op">::</span><span class="dt">Type{&lt;:IO})</span> <span class="op">=</span> <span class="fu">ToIO</span>()</span>
<span id="cb19-586"><a href="#cb19-586"></a><span class="fu">ToBufferInterface</span>(<span class="op">::</span><span class="dt">Type{&lt;:AbstractChannel})</span> <span class="op">=</span> <span class="fu">ToPut</span>()</span>
<span id="cb19-587"><a href="#cb19-587"></a><span class="fu">ToBufferInterface</span>(<span class="op">::</span><span class="dt">Type{&lt;:Ref})</span> <span class="op">=</span> <span class="fu">UsingPtr</span>()</span>
<span id="cb19-588"><a href="#cb19-588"></a><span class="fu">ToBufferInterface</span>(<span class="op">::</span><span class="dt">Type{&lt;:Ptr})</span> <span class="op">=</span> <span class="fu">RawPtr</span>()</span>
<span id="cb19-589"><a href="#cb19-589"></a><span class="fu">ToBufferInterface</span>(T<span class="op">::</span><span class="dt">Type{&lt;:AbstractArray})</span> <span class="op">=</span> <span class="fu">ArrayIOInterface</span>(T)</span></code></pre></div>
<h1 id="transfer-function-dispatch">Transfer Function Dispatch</h1>
<p>The top level <code>transfer</code> method promotes the keyword arguments (<code>start</code> and <code>deadline</code>) to positional arguments so we can dispatch on their types.</p>
<h2 id="start-index-normalisation"><code>start</code> Index Normalisation</h2>
<p>If <code>start</code> is a Tuple of indexes it is normalised by the method below. The <code>StreamIndexing</code> trait is used to check that <code>stream</code> supports indexing. Indexable streams are replaced by a <code>Tuple</code> containing <code>stream</code> and the stream index.</p>
<div class="sourceCode" id="cb20" data-startFrom="607"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 606;"><span id="cb20-607"><a href="#cb20-607"></a><span class="kw">function</span> <span class="fu">transfer</span>(stream<span class="op">,</span> buf<span class="op">,</span> n<span class="op">,</span> start<span class="op">::</span><span class="dt">Tuple,</span> deadline)</span>
<span id="cb20-608"><a href="#cb20-608"></a>    <span class="pp">@require</span> <span class="fu">StreamIndexing</span>(stream) <span class="op">==</span> <span class="fu">IndexableIO</span>() <span class="op">||</span> start[<span class="fl">1</span>] <span class="op">==</span> <span class="fl">1</span></span>
<span id="cb20-609"><a href="#cb20-609"></a>    <span class="cf">if</span> start[<span class="fl">1</span>] <span class="op">!=</span> <span class="fl">1</span></span>
<span id="cb20-610"><a href="#cb20-610"></a>        stream <span class="op">=</span> (stream<span class="op">,</span> start[<span class="fl">1</span>])</span>
<span id="cb20-611"><a href="#cb20-611"></a>    <span class="cf">end</span></span>
<span id="cb20-612"><a href="#cb20-612"></a>    <span class="fu">transfer</span>(stream<span class="op">,</span> buf<span class="op">,</span> n<span class="op">,</span> start[<span class="fl">2</span>]<span class="op">,</span> deadline)</span>
<span id="cb20-613"><a href="#cb20-613"></a><span class="kw">end</span></span></code></pre></div>
<p>From here on, <code>start</code> is always a simple <code>Integer</code> index into <code>buf</code>.</p>
<h2 id="applicaiton-of-direction-and-buffer-interface-traits">Applicaiton of Direction and Buffer Interface Traits</h2>
<p>Next, the <code>IODriection</code> and <code>BufferInterface</code> traits are inserted into the argument list.<span class="sidenote-wrapper"><label for="sn-16" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-16" class="margin-toggle"/><span class="sidenote">Note that although the <code>IODirection</code> is part of the argument list and it is best to avoid premature specialisation on direction. Eventually most transfers will end up calling an OS <code>read</code> or <code>write</code> function. However, much of the transfer logic is the same irrespective of direction. For example, the methods for <code>UsingPtr</code> and <code>UsingIndex</code> below work for both input and output. (Another consideration is supporting interfaces with <code>IODirection</code> <code>Exchange</code>).<br />
<br />
</span></span></p>
<div class="sourceCode" id="cb21" data-startFrom="632"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 631;"><span id="cb21-632"><a href="#cb21-632"></a><span class="fu">transfer</span>(stream<span class="op">,</span> buf<span class="op">,</span> n<span class="op">,</span> start<span class="op">::</span><span class="dt">Integer,</span> deadline) <span class="op">=</span> </span>
<span id="cb21-633"><a href="#cb21-633"></a>    <span class="fu">transfer</span>(stream<span class="op">,</span> <span class="fu">TransferDirection</span>(stream)<span class="op">,</span> buf<span class="op">,</span> n<span class="op">,</span> start<span class="op">,</span> deadline)</span>
<span id="cb21-634"><a href="#cb21-634"></a></span>
<span id="cb21-635"><a href="#cb21-635"></a><span class="fu">transfer</span>(stream<span class="op">,</span> <span class="op">::</span><span class="dt">In,</span> buf<span class="op">,</span> n<span class="op">,</span> start<span class="op">,</span> deadline) <span class="op">=</span></span>
<span id="cb21-636"><a href="#cb21-636"></a>    <span class="fu">transfer</span>(stream<span class="op">,</span> <span class="fu">In</span>()<span class="op">,</span> buf<span class="op">,</span> <span class="fu">ToBufferInterface</span>(buf)<span class="op">,</span> n<span class="op">,</span> start<span class="op">,</span> deadline)</span>
<span id="cb21-637"><a href="#cb21-637"></a></span>
<span id="cb21-638"><a href="#cb21-638"></a><span class="fu">transfer</span>(stream<span class="op">,</span> <span class="op">::</span><span class="dt">Out,</span> buf<span class="op">,</span> n<span class="op">,</span> start<span class="op">,</span> deadline) <span class="op">=</span></span>
<span id="cb21-639"><a href="#cb21-639"></a>    <span class="fu">transfer</span>(stream<span class="op">,</span> <span class="fu">Out</span>()<span class="op">,</span> buf<span class="op">,</span> <span class="fu">FromBufferInterface</span>(buf)<span class="op">,</span> n<span class="op">,</span> start<span class="op">,</span> deadline)</span></code></pre></div>
<h2 id="transfer-specialisations-for-indexable-buffers">Transfer Specialisations for Indexable Buffers</h2>
<p>Try to use the whole length of the buffer if <code>n</code> is missing.</p>
<div class="sourceCode" id="cb22" data-startFrom="648"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 647;"><span id="cb22-648"><a href="#cb22-648"></a><span class="kw">function</span> <span class="fu">transfer</span>(stream<span class="op">,</span> <span class="op">::</span><span class="dt">AnyDirection,</span></span>
<span id="cb22-649"><a href="#cb22-649"></a>                  buf<span class="op">,</span> <span class="op">::</span><span class="dt">Union{RawPtr, UsingPtr, UsingIndex},</span></span>
<span id="cb22-650"><a href="#cb22-650"></a>                  n<span class="op">::</span><span class="dt">Missing,</span> start<span class="op">,</span> deadline)</span>
<span id="cb22-651"><a href="#cb22-651"></a>    n <span class="op">=</span> <span class="fu">length</span>(buffer) <span class="op">-</span> (start <span class="op">-</span> <span class="fl">1</span>)</span>
<span id="cb22-652"><a href="#cb22-652"></a>    <span class="fu">transfer</span>(stream<span class="op">,</span> buffer<span class="op">,</span> n<span class="op">,</span> start<span class="op">,</span> deadline)</span>
<span id="cb22-653"><a href="#cb22-653"></a><span class="kw">end</span></span></code></pre></div>
<p>Convert pointer-compatible buffers to pointers.</p>
<div class="sourceCode" id="cb23" data-startFrom="659"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 658;"><span id="cb23-659"><a href="#cb23-659"></a><span class="kw">function</span> <span class="fu">transfer</span>(stream<span class="op">,</span> <span class="op">::</span><span class="dt">AnyDirection,</span> buf<span class="op">,</span> <span class="op">::</span><span class="dt">UsingPtr,</span> n<span class="op">,</span> start<span class="op">,</span> deadline)</span>
<span id="cb23-660"><a href="#cb23-660"></a>    <span class="fu">checkbounds</span>(buf<span class="op">,</span> (start<span class="op">-</span><span class="fl">1</span>) <span class="op">+</span> n)</span>
<span id="cb23-661"><a href="#cb23-661"></a>    GC.<span class="pp">@preserve</span> buf <span class="fu">transfer</span>(stream<span class="op">,</span> <span class="fu">pointer</span>(buf)<span class="op">,</span> n<span class="op">,</span> start<span class="op">,</span> deadline)</span>
<span id="cb23-662"><a href="#cb23-662"></a><span class="kw">end</span></span></code></pre></div>
<p>Transfer one item at a time for indexable buffers that are not accessible through pointers.</p>
<div class="sourceCode" id="cb24" data-startFrom="669"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 668;"><span id="cb24-669"><a href="#cb24-669"></a><span class="kw">function</span> <span class="fu">transfer</span>(stream<span class="op">,</span> d<span class="op">::</span><span class="dt">AnyDirection,</span> buf<span class="op">,</span> <span class="op">::</span><span class="dt">UsingIndex,</span> n<span class="op">,</span> start<span class="op">,</span> deadline)</span>
<span id="cb24-670"><a href="#cb24-670"></a>    T <span class="op">=</span> <span class="fu">ioeltype</span>(buf)</span>
<span id="cb24-671"><a href="#cb24-671"></a>    x <span class="op">=</span> <span class="fu">Ref</span><span class="dt">{T}(</span>)</span>
<span id="cb24-672"><a href="#cb24-672"></a>    count <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb24-673"><a href="#cb24-673"></a>    <span class="cf">for</span> i <span class="kw">in</span> <span class="fu">eachindex</span>(<span class="fu">view</span>(buf<span class="op">,</span> start<span class="op">:</span>(start<span class="op">-</span><span class="fl">1</span>)<span class="op">+</span>n))</span>
<span id="cb24-674"><a href="#cb24-674"></a>        d <span class="op">==</span> <span class="fu">In</span>() <span class="op">||</span> (x[] <span class="op">=</span> buf[i])</span>
<span id="cb24-675"><a href="#cb24-675"></a>        n <span class="op">=</span> <span class="fu">transfer</span>(stream<span class="op">,</span> x<span class="op">,</span> <span class="fl">1</span><span class="op">,</span> <span class="fl">1</span><span class="op">,</span> deadline)</span>
<span id="cb24-676"><a href="#cb24-676"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb24-677"><a href="#cb24-677"></a>            <span class="cf">break</span></span>
<span id="cb24-678"><a href="#cb24-678"></a>        <span class="cf">end</span></span>
<span id="cb24-679"><a href="#cb24-679"></a>        d <span class="op">==</span> <span class="fu">Out</span>() <span class="op">||</span> (buf[i] <span class="op">=</span> x[])</span>
<span id="cb24-680"><a href="#cb24-680"></a>        count <span class="op">+=</span> n</span>
<span id="cb24-681"><a href="#cb24-681"></a>        stream <span class="op">=</span> <span class="fu">next_stream_index</span>(stream<span class="op">,</span> T)</span>
<span id="cb24-682"><a href="#cb24-682"></a>    <span class="cf">end</span></span>
<span id="cb24-683"><a href="#cb24-683"></a>    <span class="cf">return</span> count</span>
<span id="cb24-684"><a href="#cb24-684"></a><span class="kw">end</span></span>
<span id="cb24-685"><a href="#cb24-685"></a></span>
<span id="cb24-686"><a href="#cb24-686"></a><span class="fu">next_stream_index</span>((stream<span class="op">,</span> i)<span class="op">,</span> T) <span class="op">=</span> (stream<span class="op">,</span> i <span class="op">+</span> <span class="fu">sizeof</span>(T))</span>
<span id="cb24-687"><a href="#cb24-687"></a><span class="fu">next_stream_index</span>(stream<span class="op">::</span><span class="dt">Stream,</span> T) <span class="op">=</span> stream</span></code></pre></div>
<h2 id="transfer-specialisations-for-iterable-buffers">Transfer Specialisations for Iterable Buffers</h2>
<p>Iterate over <code>buf</code> (skip items until <code>start</code> index is reached). Transfer each item one at a time.</p>
<div class="sourceCode" id="cb25" data-startFrom="696"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 695;"><span id="cb25-696"><a href="#cb25-696"></a><span class="kw">function</span> <span class="fu">transfer</span>(stream<span class="op">,</span> <span class="op">::</span><span class="dt">In,</span> buf<span class="op">,</span> <span class="op">::</span><span class="dt">FromIteration,</span> n<span class="op">,</span> start<span class="op">,</span> deadline)</span>
<span id="cb25-697"><a href="#cb25-697"></a>    count <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb25-698"><a href="#cb25-698"></a>    <span class="cf">for</span> x <span class="kw">in</span> buf</span>
<span id="cb25-699"><a href="#cb25-699"></a>        <span class="cf">if</span> start <span class="op">&gt;</span> <span class="fl">1</span></span>
<span id="cb25-700"><a href="#cb25-700"></a>            start <span class="op">-=</span> <span class="fl">1</span></span>
<span id="cb25-701"><a href="#cb25-701"></a>            <span class="cf">continue</span></span>
<span id="cb25-702"><a href="#cb25-702"></a>        <span class="cf">end</span></span>
<span id="cb25-703"><a href="#cb25-703"></a>        n <span class="op">=</span> <span class="fu">transfer</span>(stream<span class="op">,</span> <span class="fu">Ref</span>(x)<span class="op">,</span> <span class="fl">1</span><span class="op">,</span> <span class="fl">1</span><span class="op">,</span> deadline)</span>
<span id="cb25-704"><a href="#cb25-704"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb25-705"><a href="#cb25-705"></a>            <span class="cf">break</span></span>
<span id="cb25-706"><a href="#cb25-706"></a>        <span class="cf">end</span></span>
<span id="cb25-707"><a href="#cb25-707"></a>        count <span class="op">+=</span> n</span>
<span id="cb25-708"><a href="#cb25-708"></a>        stream <span class="op">=</span> <span class="fu">next_stream_index</span>(stream<span class="op">,</span> <span class="fu">ioeltype</span>(buf))</span>
<span id="cb25-709"><a href="#cb25-709"></a>    <span class="cf">end</span></span>
<span id="cb25-710"><a href="#cb25-710"></a>    <span class="cf">return</span> count</span>
<span id="cb25-711"><a href="#cb25-711"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="transfer-specialisations-for-collection-buffers">Transfer Specialisations for Collection Buffers</h2>
<div class="sourceCode" id="cb26" data-startFrom="716"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 715;"><span id="cb26-716"><a href="#cb26-716"></a><span class="fu">transfer</span>(s<span class="op">,</span> dir<span class="op">,</span> buf<span class="op">,</span> <span class="op">::</span><span class="dt">ToPut,</span> a<span class="op">...</span>) <span class="op">=</span> <span class="fu">transfer</span>(s<span class="op">,</span> dir<span class="op">,</span> buf<span class="op">,</span> put<span class="op">!,</span> a<span class="op">...</span>)</span>
<span id="cb26-717"><a href="#cb26-717"></a><span class="fu">transfer</span>(s<span class="op">,</span> dir<span class="op">,</span> buf<span class="op">,</span> <span class="op">::</span><span class="dt">ToPush,</span> a<span class="op">...</span>) <span class="op">=</span> <span class="fu">transfer</span>(s<span class="op">,</span> dir<span class="op">,</span> buf<span class="op">,</span> push<span class="op">!,</span> a<span class="op">...</span>)</span>
<span id="cb26-718"><a href="#cb26-718"></a><span class="fu">transfer</span>(s<span class="op">,</span> dir<span class="op">,</span> buf<span class="op">,</span> <span class="op">::</span><span class="dt">FromPop,</span> a<span class="op">...</span>) <span class="op">=</span> <span class="fu">transfer</span>(s<span class="op">,</span> dir<span class="op">,</span> buf<span class="op">,</span> pop<span class="op">!,</span> a<span class="op">...</span>)</span>
<span id="cb26-719"><a href="#cb26-719"></a><span class="fu">transfer</span>(s<span class="op">,</span> dir<span class="op">,</span> buf<span class="op">,</span> <span class="op">::</span><span class="dt">FromTake,</span> a<span class="op">...</span>) <span class="op">=</span> <span class="fu">transfer</span>(s<span class="op">,</span> dir<span class="op">,</span> buf<span class="op">,</span> take<span class="op">!,</span> a<span class="op">...</span>)</span>
<span id="cb26-720"><a href="#cb26-720"></a></span>
<span id="cb26-721"><a href="#cb26-721"></a><span class="kw">function</span> <span class="fu">transfer</span>(s<span class="op">,</span> d<span class="op">::</span><span class="dt">TransferDirection,</span> buf<span class="op">,</span> f<span class="op">::</span><span class="dt">Function,</span> n<span class="op">,</span> start<span class="op">,</span> deadline)</span>
<span id="cb26-722"><a href="#cb26-722"></a>    <span class="pp">@require</span> start <span class="op">==</span> <span class="fl">1</span></span>
<span id="cb26-723"><a href="#cb26-723"></a>    T <span class="op">=</span> <span class="fu">ioeltype</span>(buf)</span>
<span id="cb26-724"><a href="#cb26-724"></a>    x <span class="op">=</span> <span class="fu">Ref</span><span class="dt">{T}(</span>)</span>
<span id="cb26-725"><a href="#cb26-725"></a>    count <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb26-726"><a href="#cb26-726"></a>    <span class="cf">while</span> count <span class="op">&lt;</span> n</span>
<span id="cb26-727"><a href="#cb26-727"></a>        d <span class="op">==</span> <span class="fu">In</span>() <span class="op">||</span> (x[] <span class="op">=</span> <span class="fu">f</span>(buf))</span>
<span id="cb26-728"><a href="#cb26-728"></a>        n <span class="op">=</span> <span class="fu">transfer</span>(s<span class="op">,</span> x<span class="op">,</span> <span class="fl">1</span><span class="op">,</span> <span class="fl">1</span><span class="op">,</span> deadline)</span>
<span id="cb26-729"><a href="#cb26-729"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb26-730"><a href="#cb26-730"></a>            <span class="cf">break</span></span>
<span id="cb26-731"><a href="#cb26-731"></a>        <span class="cf">end</span></span>
<span id="cb26-732"><a href="#cb26-732"></a>        d <span class="op">==</span> <span class="fu">Out</span>() <span class="op">||</span> <span class="fu">f</span>(buf<span class="op">,</span> x[])</span>
<span id="cb26-733"><a href="#cb26-733"></a>        count <span class="op">+=</span> n</span>
<span id="cb26-734"><a href="#cb26-734"></a>        s <span class="op">=</span> <span class="fu">next_stream_index</span>(s<span class="op">,</span> T)</span>
<span id="cb26-735"><a href="#cb26-735"></a>    <span class="cf">end</span></span>
<span id="cb26-736"><a href="#cb26-736"></a>    <span class="cf">return</span> count</span>
<span id="cb26-737"><a href="#cb26-737"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="transfer-specialisations-for-io-buffers">Transfer Specialisations for IO Buffers</h2>
<div class="sourceCode" id="cb27" data-startFrom="742"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 741;"><span id="cb27-742"><a href="#cb27-742"></a><span class="kw">function</span> <span class="fu">transfer</span>(s1<span class="op">,</span> <span class="op">::</span><span class="dt">In,</span> s2<span class="op">,</span> <span class="op">::</span><span class="dt">ToIO,</span> n<span class="op">,</span> start<span class="op">,</span> deadline)</span>
<span id="cb27-743"><a href="#cb27-743"></a>    n <span class="op">=</span> <span class="fu">min</span>(n<span class="op">,</span> <span class="fu">max</span>(<span class="fu">default_buffer_size</span>(s1)<span class="op">,</span></span>
<span id="cb27-744"><a href="#cb27-744"></a>                   <span class="fu">default_buffer_size</span>(s2)))</span>
<span id="cb27-745"><a href="#cb27-745"></a>    buf <span class="op">=</span> <span class="fu">Vector</span><span class="dt">{UInt8}(</span><span class="cn">undef</span><span class="op">,</span> n)</span>
<span id="cb27-746"><a href="#cb27-746"></a>    <span class="cf">while</span> <span class="cn">true</span></span>
<span id="cb27-747"><a href="#cb27-747"></a>        n <span class="op">=</span> <span class="fu">transfer</span>(s1 <span class="op">=&gt;</span> buf)</span>
<span id="cb27-748"><a href="#cb27-748"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb27-749"><a href="#cb27-749"></a>            <span class="cf">break</span></span>
<span id="cb27-750"><a href="#cb27-750"></a>        <span class="cf">end</span></span>
<span id="cb27-751"><a href="#cb27-751"></a>        <span class="fu">transfer</span>(buf <span class="op">=&gt;</span> s2<span class="op">,</span> n)</span>
<span id="cb27-752"><a href="#cb27-752"></a>    <span class="cf">end</span></span>
<span id="cb27-753"><a href="#cb27-753"></a>    <span class="pp">@assert</span> <span class="cn">false</span></span>
<span id="cb27-754"><a href="#cb27-754"></a>    <span class="co">#FIXME should this return as soon as something has been transferred?</span></span>
<span id="cb27-755"><a href="#cb27-755"></a>    <span class="co">#FIXME should it read byteavailable from io1, transfer all of that, then return?</span></span>
<span id="cb27-756"><a href="#cb27-756"></a><span class="kw">end</span></span></code></pre></div>
<h1 id="total-data-size-trait">Total Data Size Trait</h1>
<div class="sourceCode" id="cb28" data-startFrom="762"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 761;"><span id="cb28-762"><a href="#cb28-762"></a><span class="kw">abstract type</span> TotalSize <span class="kw">end</span></span>
<span id="cb28-763"><a href="#cb28-763"></a><span class="kw">struct</span> UnknownTotalSize <span class="op">&lt;:</span><span class="dt"> TotalSize </span><span class="kw">end</span></span>
<span id="cb28-764"><a href="#cb28-764"></a><span class="kw">struct</span> InfiniteTotalSize <span class="op">&lt;:</span><span class="dt"> TotalSize </span><span class="kw">end</span></span>
<span id="cb28-765"><a href="#cb28-765"></a><span class="kw">abstract type</span> KnownTotalSize <span class="kw">end</span></span>
<span id="cb28-766"><a href="#cb28-766"></a><span class="kw">struct</span> VariableTotalSize <span class="op">&lt;:</span><span class="dt"> KnownTotalSize </span><span class="kw">end</span></span>
<span id="cb28-767"><a href="#cb28-767"></a><span class="kw">struct</span> FixedTotalSize <span class="op">&lt;:</span><span class="dt"> KnownTotalSize </span><span class="kw">end</span></span></code></pre></div>
<p>The <code>TotalSize</code> trait describes how much data is available from an IO interface.</p>
<p><code>TotalSize(stream)</code> returns one of:</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Total Size</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>VariableTotalSize()</code></td>
<td style="text-align: left;">The total amount of data available can be queried using the <code>length</code> function. Note: the total size can change. e.g. new lines might be appended to a log file.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>FixedTotalSize()</code></td>
<td style="text-align: left;">The amount of data is known and will not change. Applicable to block devices. Applicable to some network streams. e.g. a HTTP Message where Content-Length is known.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>InfiniteTotalSize()</code></td>
<td style="text-align: left;">End of file will never be reached. Applicable to some device files.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>UnknownTotalSize()</code></td>
<td style="text-align: left;">No known data size limit.</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb29" data-startFrom="793"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 792;"><span id="cb29-793"><a href="#cb29-793"></a><span class="fu">TotalSize</span>(x) <span class="op">=</span> <span class="fu">TotalSize</span>(<span class="fu">typeof</span>(x))</span>
<span id="cb29-794"><a href="#cb29-794"></a><span class="fu">TotalSize</span>(T<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(T) ? <span class="fu">TotalSize</span>(<span class="fu">unwrap</span>(T)) <span class="op">:</span></span>
<span id="cb29-795"><a href="#cb29-795"></a>                                   <span class="fu">UnknownTotalSize</span>()</span>
<span id="cb29-796"><a href="#cb29-796"></a></span>
<span id="cb29-797"><a href="#cb29-797"></a><span class="kw">abstract type</span> MmapSupport <span class="kw">end</span></span>
<span id="cb29-798"><a href="#cb29-798"></a><span class="kw">struct</span> Mappable <span class="op">&lt;:</span><span class="dt"> MmapSupport </span><span class="kw">end</span></span>
<span id="cb29-799"><a href="#cb29-799"></a><span class="kw">struct</span> NotMappable <span class="op">&lt;:</span><span class="dt"> MmapSupport </span><span class="kw">end</span></span>
<span id="cb29-800"><a href="#cb29-800"></a><span class="fu">MmapSupport</span>(x) <span class="op">=</span> <span class="fu">MmapSupport</span>(<span class="fu">typeof</span>(x))</span>
<span id="cb29-801"><a href="#cb29-801"></a><span class="fu">MmapSupport</span>(T<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(T) ? <span class="fu">MmapSupport</span>(<span class="fu">unwrap</span>(T)) <span class="op">:</span></span>
<span id="cb29-802"><a href="#cb29-802"></a>                                     <span class="fu">NotMappable</span>()</span>
<span id="cb29-803"><a href="#cb29-803"></a></span>
<span id="cb29-804"><a href="#cb29-804"></a><span class="kw">abstract type</span> SizeMechanism <span class="kw">end</span></span>
<span id="cb29-805"><a href="#cb29-805"></a><span class="kw">struct</span> NoSizeMechanism <span class="op">&lt;:</span><span class="dt"> SizeMechanism </span><span class="kw">end</span></span>
<span id="cb29-806"><a href="#cb29-806"></a><span class="kw">struct</span> SupportsStatSize <span class="op">&lt;:</span><span class="dt"> SizeMechanism </span><span class="kw">end</span></span>
<span id="cb29-807"><a href="#cb29-807"></a><span class="kw">struct</span> SupportsFIONREAD <span class="op">&lt;:</span><span class="dt"> SizeMechanism </span><span class="kw">end</span></span>
<span id="cb29-808"><a href="#cb29-808"></a><span class="fu">TotalSizeMechanism</span>(x) <span class="op">=</span> <span class="fu">TotalSizeMechanism</span>(<span class="fu">typeof</span>(x))</span>
<span id="cb29-809"><a href="#cb29-809"></a><span class="fu">TotalSizeMechanism</span>(T<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(T) ? <span class="fu">TotalSizeMechanism</span>(<span class="fu">unwrap</span>(T)) <span class="op">:</span></span>
<span id="cb29-810"><a href="#cb29-810"></a>                                            <span class="fu">NoSizeMechanism</span>()</span></code></pre></div>
<h1 id="transfer-size-trait">Transfer Size Trait</h1>
<div class="sourceCode" id="cb30" data-startFrom="815"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 814;"><span id="cb30-815"><a href="#cb30-815"></a><span class="kw">abstract type</span> TransferSize <span class="kw">end</span></span>
<span id="cb30-816"><a href="#cb30-816"></a><span class="kw">struct</span> UnknownTransferSize <span class="op">&lt;:</span><span class="dt"> TransferSize </span><span class="kw">end</span></span>
<span id="cb30-817"><a href="#cb30-817"></a><span class="kw">struct</span> KnownTransferSize <span class="op">&lt;:</span><span class="dt"> TransferSize </span><span class="kw">end</span></span>
<span id="cb30-818"><a href="#cb30-818"></a><span class="kw">struct</span> LimitedTransferSize <span class="op">&lt;:</span><span class="dt"> TransferSize </span><span class="kw">end</span></span>
<span id="cb30-819"><a href="#cb30-819"></a><span class="kw">struct</span> FixedTransferSize <span class="op">&lt;:</span><span class="dt"> TransferSize </span><span class="kw">end</span></span>
<span id="cb30-820"><a href="#cb30-820"></a><span class="kw">const</span> AnyTransferSize <span class="op">=</span> TransferSize</span></code></pre></div>
<p>The <code>TransferSize</code> trait describes how much data can be moved in a single transfer.</p>
<p><code>TransferSize(stream)</code> returns one of:</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Transfer Size</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>UnknownTransferSize()</code></td>
<td style="text-align: left;">Transfer size is not known in advance. The only way to know how much data is available is to attempt a transfer.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>KnownTransferSize()</code></td>
<td style="text-align: left;">The amount of data immediately available for transfer can be queried using the <code>bytesavailable</code> function.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>LimitedTransferSize()</code></td>
<td style="text-align: left;">The amount of data that can be moved in a single transfer is limited. e.g. by a device block size or buffer size. The maximum transfer size can queried using the <code>max_transfer_size</code> function. The amount of data immediately available for transfer can be queried using the <code>bytesavailable</code> function.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>FixedTransferSize()</code></td>
<td style="text-align: left;">The amount of data moved by a single transfer is fixed. e.g. <code>/dev/input/event0</code> device always transfers <code>sizeof(input_event)</code> bytes.</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb31" data-startFrom="850"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 849;"><span id="cb31-850"><a href="#cb31-850"></a><span class="fu">TransferSize</span>(s) <span class="op">=</span> <span class="fu">TransferSize</span>(<span class="fu">typeof</span>(s))</span>
<span id="cb31-851"><a href="#cb31-851"></a><span class="fu">TransferSize</span>(T<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(T) ?</span>
<span id="cb31-852"><a href="#cb31-852"></a>                        <span class="fu">TransferSize</span>(<span class="fu">unwrap</span>(T)) <span class="op">:</span></span>
<span id="cb31-853"><a href="#cb31-853"></a>                            <span class="fu">TransferSizeMechanism</span>(T) <span class="op">==</span> <span class="fu">NoSizeMechanism</span>() ?</span>
<span id="cb31-854"><a href="#cb31-854"></a>                            <span class="fu">UnknownTransferSize</span>() <span class="op">:</span></span>
<span id="cb31-855"><a href="#cb31-855"></a>                            <span class="fu">KnownTransferSize</span>()</span>
<span id="cb31-856"><a href="#cb31-856"></a></span>
<span id="cb31-857"><a href="#cb31-857"></a><span class="fu">max_transfer_size</span>(stream) <span class="op">=</span> <span class="fu">max_transfer_size</span>(stream<span class="op">,</span> <span class="fu">TransferSize</span>(stream))</span>
<span id="cb31-858"><a href="#cb31-858"></a><span class="fu">max_transfer_size</span>(stream<span class="op">,</span> <span class="op">::</span><span class="dt">Union{UnknownTransferSize,</span></span>
<span id="cb31-859"><a href="#cb31-859"></a><span class="dt">                                  KnownTransferSize})</span> <span class="op">=</span> <span class="fu">typemax</span>(<span class="dt">Int</span>)</span></code></pre></div>
<p><code>TransferSizeMechanism(stream)</code> returns one of:</p>
<ul>
<li><code>SupportsFIONREAD()</code> – The underlying device supports <code>ioctl(2), FIONREAD</code>.</li>
<li><code>SupportsStatSize()</code> – The underlying device supports <code>fstat(2), st_size</code>.</li>
</ul>
<div class="sourceCode" id="cb32" data-startFrom="868"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 867;"><span id="cb32-868"><a href="#cb32-868"></a><span class="fu">TransferSizeMechanism</span>(s) <span class="op">=</span> <span class="fu">TransferSizeMechanism</span>(<span class="fu">typeof</span>(s))</span>
<span id="cb32-869"><a href="#cb32-869"></a><span class="fu">TransferSizeMechanism</span>(T<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(T) ?</span>
<span id="cb32-870"><a href="#cb32-870"></a>                                 <span class="fu">TransferSizeMechanism</span>(<span class="fu">unwrap</span>(T)) <span class="op">:</span></span>
<span id="cb32-871"><a href="#cb32-871"></a>                                 <span class="fu">NoSizeMechanism</span>()</span></code></pre></div>
<h1 id="data-fragmentation-trait">Data Fragmentation Trait</h1>
<div class="sourceCode" id="cb33" data-startFrom="877"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 876;"><span id="cb33-877"><a href="#cb33-877"></a><span class="kw">abstract type</span> ReadFragmentation <span class="kw">end</span></span>
<span id="cb33-878"><a href="#cb33-878"></a><span class="kw">struct</span> ReadsBytes         <span class="op">&lt;:</span><span class="dt"> ReadFragmentation </span><span class="kw">end</span></span>
<span id="cb33-879"><a href="#cb33-879"></a><span class="kw">struct</span> ReadsLines         <span class="op">&lt;:</span><span class="dt"> ReadFragmentation </span><span class="kw">end</span></span>
<span id="cb33-880"><a href="#cb33-880"></a><span class="kw">struct</span> ReadsPackets       <span class="op">&lt;:</span><span class="dt"> ReadFragmentation </span><span class="kw">end</span></span>
<span id="cb33-881"><a href="#cb33-881"></a><span class="kw">struct</span> ReadsRequestedSize <span class="op">&lt;:</span><span class="dt"> ReadFragmentation </span><span class="kw">end</span></span>
<span id="cb33-882"><a href="#cb33-882"></a><span class="kw">const</span> AnyReadFragmentation <span class="op">=</span> ReadFragmentation </span></code></pre></div>
<p>The <code>ReadFragmentation</code> trait describes what guarantees a stream makes about fragmentation of data returned by the underlying <code>read(2)</code> system call.</p>
<p><code>ReadFragmentation(stream)</code> returns one of:</p>
<table>
<colgroup>
<col style="width: 29%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Data Fragmentation</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>ReadsBytes()</code></td>
<td style="text-align: left;">No special guarantees about what is returned by <code>read(2)</code>. This is the default.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>ReadsLines()</code></td>
<td style="text-align: left;"><code>read(2)</code> returns exactly one line at a time. Does not return partially buffered lines unless an explicit <code>EOL</code> or <code>EOF</code> control character is received. Applicable to Character devices in canonical mode. See <a href="https://man7.org/linux/man-pages/man3/termios.3.html">termios(3)</a>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>ReadsPackets()</code></td>
<td style="text-align: left;"><code>read(2)</code> returns exactly one packet at a time. Does not return partially buffered packets. Applicable to some sockets and pipes depending on configuration. e.g. See the <code>O_DIRECT</code> flag in <a href="https://man7.org/linux/man-pages/man2/pipe.2.html">pipe(2)</a>.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>ReadsRequestedSize()</code></td>
<td style="text-align: left;"><code>read(2)</code> returns exactly the number of elements requested. Applicable to local files and some virtual files (e.g. <code>/dev/random</code>, <code>/dev/null</code>).</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb34" data-startFrom="914"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 913;"><span id="cb34-914"><a href="#cb34-914"></a><span class="fu">ReadFragmentation</span>(s) <span class="op">=</span> <span class="fu">ReadFragmentation</span>(<span class="fu">typeof</span>(s))</span>
<span id="cb34-915"><a href="#cb34-915"></a><span class="fu">ReadFragmentation</span>(T<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(T) ? <span class="fu">ReadFragmentation</span>(<span class="fu">unwrap</span>(T)) <span class="op">:</span></span>
<span id="cb34-916"><a href="#cb34-916"></a>                                           <span class="fu">ReadsBytes</span>()</span></code></pre></div>
<h1 id="performance-traits">Performance Traits</h1>
<div class="sourceCode" id="cb35" data-startFrom="921"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 920;"><span id="cb35-921"><a href="#cb35-921"></a><span class="kw">abstract type</span> TransferCost <span class="kw">end</span></span>
<span id="cb35-922"><a href="#cb35-922"></a><span class="kw">struct</span> HighTransferCost <span class="op">&lt;:</span><span class="dt"> TransferCost </span><span class="kw">end</span></span>
<span id="cb35-923"><a href="#cb35-923"></a><span class="kw">struct</span> LowTransferCost <span class="op">&lt;:</span><span class="dt"> TransferCost </span><span class="kw">end</span></span>
<span id="cb35-924"><a href="#cb35-924"></a><span class="fu">TransferCost</span>(s) <span class="op">=</span> <span class="fu">TransferCost</span>(<span class="fu">typeof</span>(s))</span>
<span id="cb35-925"><a href="#cb35-925"></a><span class="fu">TransferCost</span>(T<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(T) ? <span class="fu">TransferCost</span>(T) <span class="op">:</span></span>
<span id="cb35-926"><a href="#cb35-926"></a>                                      <span class="fu">HighTransferCost</span>()</span>
<span id="cb35-927"><a href="#cb35-927"></a></span>
<span id="cb35-928"><a href="#cb35-928"></a><span class="kw">const</span> kBytesPerSecond <span class="op">=</span> <span class="fu">Int</span>(<span class="fl">1e3</span>)</span>
<span id="cb35-929"><a href="#cb35-929"></a><span class="kw">const</span> MBytesPerSecond <span class="op">=</span> <span class="fu">Int</span>(<span class="fl">1e6</span>)</span>
<span id="cb35-930"><a href="#cb35-930"></a><span class="kw">const</span> GBytesPerSecond <span class="op">=</span> <span class="fu">Int</span>(<span class="fl">1e9</span>)</span>
<span id="cb35-931"><a href="#cb35-931"></a><span class="fu">DataRate</span>(s) <span class="op">=</span> <span class="fu">DataRate</span>(<span class="fu">typeof</span>(s))</span>
<span id="cb35-932"><a href="#cb35-932"></a><span class="fu">DataRate</span>(T<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(T) ? <span class="fu">DataRate</span>(<span class="fu">unwrap</span>(T)) <span class="op">:</span></span>
<span id="cb35-933"><a href="#cb35-933"></a>                                  MBytesPerSecond</span></code></pre></div>
<h1 id="cursor-traits-mark-seek">Cursor Traits (Mark &amp; Seek)</h1>
<div class="sourceCode" id="cb36" data-startFrom="938"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 937;"><span id="cb36-938"><a href="#cb36-938"></a><span class="kw">abstract type</span> CursorSupport <span class="kw">end</span></span>
<span id="cb36-939"><a href="#cb36-939"></a><span class="kw">abstract type</span> AbstractSeekable <span class="op">&lt;:</span><span class="dt"> CursorSupport </span><span class="kw">end</span></span>
<span id="cb36-940"><a href="#cb36-940"></a><span class="kw">struct</span> NoCursors <span class="op">&lt;:</span><span class="dt"> CursorSupport </span><span class="kw">end</span></span>
<span id="cb36-941"><a href="#cb36-941"></a><span class="kw">struct</span> Seekable  <span class="op">&lt;:</span><span class="dt"> AbstractSeekable </span><span class="kw">end</span></span>
<span id="cb36-942"><a href="#cb36-942"></a><span class="kw">struct</span> Markable  <span class="op">&lt;:</span><span class="dt"> AbstractSeekable </span><span class="kw">end</span></span></code></pre></div>
<p>The <code>CursorSupport</code> trait describes mark and seek capabilities.</p>
<p><code>CursorSupport(stream)</code> returns one of:</p>
<table>
<colgroup>
<col style="width: 20%" />
<col style="width: 79%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Cursor Support</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>NoCursors()</code></td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>Seekable()</code></td>
<td style="text-align: left;">Supports <code>seek</code>, <code>skip</code>, <code>seekstart</code> and <code>seekend</code>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>Markable()</code></td>
<td style="text-align: left;">Is seekable, and also supports <code>mark</code>, <code>ismarked</code>, <code>unmark</code>, <code>reset</code>.</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb37" data-startFrom="960"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 959;"><span id="cb37-960"><a href="#cb37-960"></a><span class="fu">CursorSupport</span>(s) <span class="op">=</span> <span class="fu">CursorSupport</span>(<span class="fu">typeof</span>(s))</span>
<span id="cb37-961"><a href="#cb37-961"></a><span class="fu">CursorSupport</span>(T<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(T) ? <span class="fu">CursorSupport</span>(<span class="fu">unwrap</span>(T)) <span class="op">:</span></span>
<span id="cb37-962"><a href="#cb37-962"></a>                                       <span class="fu">NoCursors</span>()</span>
<span id="cb37-963"><a href="#cb37-963"></a><span class="kw">const</span> NotMarkable <span class="op">=</span> <span class="dt">Union</span>{NoCursors<span class="op">,</span>Seekable}</span>
<span id="cb37-964"><a href="#cb37-964"></a></span>
<span id="cb37-965"><a href="#cb37-965"></a><span class="fu">trait_error</span>(s<span class="op">,</span> trait) <span class="op">=</span></span>
<span id="cb37-966"><a href="#cb37-966"></a>    <span class="fu">throw</span>(<span class="fu">ArgumentError</span>(<span class="st">&quot;$(typeof(s)) does not implement $trait&quot;</span>))</span>
<span id="cb37-967"><a href="#cb37-967"></a></span>
<span id="cb37-968"><a href="#cb37-968"></a><span class="bu">Base</span>.<span class="fu">seek</span>(io<span class="op">::</span><span class="dt">TraitsIO,</span> pos) <span class="op">=</span> <span class="fu">seek</span>(io.stream<span class="op">,</span> <span class="fu">CursorSupport</span>(io.stream)<span class="op">,</span> pos)</span>
<span id="cb37-969"><a href="#cb37-969"></a><span class="fu">_seek</span>(s<span class="op">,</span> <span class="op">::</span><span class="dt">NoCursors,</span> pos) <span class="op">=</span> <span class="fu">trait_error</span>(s<span class="op">,</span> Seekable)</span>
<span id="cb37-970"><a href="#cb37-970"></a></span>
<span id="cb37-971"><a href="#cb37-971"></a><span class="bu">Base</span>.<span class="fu">skip</span>(io<span class="op">::</span><span class="dt">TraitsIO,</span> offset) <span class="op">=</span> <span class="fu">_skip</span>(io.stream<span class="op">,</span> <span class="fu">CursorSupport</span>(io.stream)<span class="op">,</span> offset)</span>
<span id="cb37-972"><a href="#cb37-972"></a><span class="fu">_skip</span>(s<span class="op">,</span> <span class="op">::</span><span class="dt">NoCursors,</span> offset) <span class="op">=</span> <span class="fu">trait_error</span>(s<span class="op">,</span> Seekable)</span>
<span id="cb37-973"><a href="#cb37-973"></a></span>
<span id="cb37-974"><a href="#cb37-974"></a><span class="bu">Base</span>.<span class="fu">position</span>(io<span class="op">::</span><span class="dt">TraitsIO)</span> <span class="op">=</span> <span class="fu">_position</span>(io.stream<span class="op">,</span> <span class="fu">CursorSupport</span>(io.stream))</span>
<span id="cb37-975"><a href="#cb37-975"></a><span class="fu">_position</span>(s<span class="op">,</span> <span class="op">::</span><span class="dt">NoCursors)</span> <span class="op">=</span> <span class="cn">nothing</span></span>
<span id="cb37-976"><a href="#cb37-976"></a></span>
<span id="cb37-977"><a href="#cb37-977"></a><span class="bu">Base</span>.<span class="fu">seekend</span>(io<span class="op">::</span><span class="dt">TraitsIO)</span> <span class="op">=</span> <span class="fu">_seekend</span>(io.stream<span class="op">,</span> <span class="fu">CursorSupport</span>(io.stream))</span>
<span id="cb37-978"><a href="#cb37-978"></a><span class="fu">_seekend</span>(s<span class="op">,</span> <span class="op">::</span><span class="dt">NoCursors)</span> <span class="op">=</span> <span class="cn">nothing</span></span>
<span id="cb37-979"><a href="#cb37-979"></a></span>
<span id="cb37-980"><a href="#cb37-980"></a><span class="bu">Base</span>.<span class="fu">mark</span>(io<span class="op">::</span><span class="dt">TraitsIO)</span> <span class="op">=</span> <span class="fu">_mark</span>(io.stream<span class="op">,</span> <span class="fu">CursorSupport</span>(io.stream))</span>
<span id="cb37-981"><a href="#cb37-981"></a><span class="fu">_mark</span>(s<span class="op">,</span> <span class="op">::</span><span class="dt">NotMarkable)</span> <span class="op">=</span> <span class="fu">trait_error</span>(s<span class="op">,</span> Markable)</span>
<span id="cb37-982"><a href="#cb37-982"></a></span>
<span id="cb37-983"><a href="#cb37-983"></a><span class="bu">Base</span>.<span class="fu">unmark</span>(io<span class="op">::</span><span class="dt">TraitsIO)</span> <span class="op">=</span> <span class="fu">_unmark</span>(io.stream<span class="op">,</span> <span class="fu">CursorSupport</span>(io.stream))</span>
<span id="cb37-984"><a href="#cb37-984"></a><span class="fu">_unmark</span>(s<span class="op">,</span> <span class="op">::</span><span class="dt">NotMarkable)</span> <span class="op">=</span> <span class="fu">trait_error</span>(s<span class="op">,</span> Markable)</span>
<span id="cb37-985"><a href="#cb37-985"></a></span>
<span id="cb37-986"><a href="#cb37-986"></a><span class="bu">Base</span>.<span class="fu">reset</span>(io<span class="op">::</span><span class="dt">TraitsIO)</span> <span class="op">=</span> <span class="fu">_reset</span>(io.stream<span class="op">,</span> <span class="fu">CursorSupport</span>(io.stream))</span>
<span id="cb37-987"><a href="#cb37-987"></a><span class="fu">_reset</span>(s<span class="op">,</span> <span class="op">::</span><span class="dt">NotMarkable)</span> <span class="op">=</span> <span class="fu">trait_error</span>(s<span class="op">,</span> Markable)</span>
<span id="cb37-988"><a href="#cb37-988"></a></span>
<span id="cb37-989"><a href="#cb37-989"></a><span class="bu">Base</span>.<span class="fu">ismarked</span>(io<span class="op">::</span><span class="dt">TraitsIO)</span> <span class="op">=</span> <span class="fu">_ismarked</span>(io.stream<span class="op">,</span> <span class="fu">CursorSupport</span>(io.stream))</span>
<span id="cb37-990"><a href="#cb37-990"></a><span class="fu">_ismarked</span>(s<span class="op">,</span> <span class="op">::</span><span class="dt">NotMarkable)</span> <span class="op">=</span> <span class="fu">trait_error</span>(s<span class="op">,</span> Markable)</span></code></pre></div>
<h1 id="event-notification-mechanism-trait">Event Notification Mechanism Trait</h1>
<div class="sourceCode" id="cb38" data-startFrom="996"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 995;"><span id="cb38-996"><a href="#cb38-996"></a><span class="kw">abstract type</span> WaitingMechanism <span class="kw">end</span></span>
<span id="cb38-997"><a href="#cb38-997"></a><span class="kw">struct</span> WaitBySleeping     <span class="op">&lt;:</span><span class="dt"> WaitingMechanism </span><span class="kw">end</span></span>
<span id="cb38-998"><a href="#cb38-998"></a><span class="kw">struct</span> WaitUsingPosixPoll <span class="op">&lt;:</span><span class="dt"> WaitingMechanism </span><span class="kw">end</span></span>
<span id="cb38-999"><a href="#cb38-999"></a><span class="kw">struct</span> WaitUsingEPoll     <span class="op">&lt;:</span><span class="dt"> WaitingMechanism </span><span class="kw">end</span></span>
<span id="cb38-1000"><a href="#cb38-1000"></a><span class="kw">struct</span> WaitUsingPidFD     <span class="op">&lt;:</span><span class="dt"> WaitingMechanism </span><span class="kw">end</span></span>
<span id="cb38-1001"><a href="#cb38-1001"></a><span class="kw">struct</span> WaitUsingKQueue    <span class="op">&lt;:</span><span class="dt"> WaitingMechanism </span><span class="kw">end</span></span></code></pre></div>
<p>The <code>WaitingMechanism</code> trait describes ways of waiting for OS resources that are not immediately available. e.g. when <code>read(2)</code> returns <code>EAGAIN</code> (<code>EWOULDBLOCK</code>), or when <code>waitpid(2)</code> returns <code>0</code>.</p>
<p>Resource types, <code>R</code>, that have an applicable <code>WaitingMechanism</code>, <code>T</code>, define a method of <code>Base.wait(::T, r::R)</code>. <code>WaitBySleeping</code> is the default.<span class="sidenote-wrapper"><label for="sn-17" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-17" class="margin-toggle"/><span class="sidenote">This may be the most efficient mechanism for small systems with simple IO requirements, for large systems where throughput is more important than latency, or for systems that simply do not spend a lot of time waiting for IO. Sleeping allows other Julia tasks to run immediately, whereas the other polling mechanisms all have some amount of book-keeping and system call overhead.<br />
<br />
</span></span></p>
<p>If a <code>WaitingMechanism</code>, <code>T</code>, is not available on a particular OS then <code>Base.isvalid(::T)</code> should be defined to return <code>false</code>.<span class="sidenote-wrapper"><label for="sn-18" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-18" class="margin-toggle"/><span class="sidenote">⚠️ Consider Linux AIO <code>io_getevents</code> for disk io?<br />
<br />
</span></span></p>
<p><code>WaitingMechanism(stream)</code> returns one of:</p>
<table>
<colgroup>
<col style="width: 27%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Waiting Mechanism</th>
<th style="text-align: left;">Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><code>WaitBySleeping</code></td>
<td style="text-align: left;">Wait using a dumb retry/sleep loop.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>WaitUsingPosixPoll</code></td>
<td style="text-align: left;">Wait using the POXSX <code>poll</code> mechanism. Wait for activity on a set of file descriptors. Applicable to FIFO pipes, sockets and character devices (but not local files). See <a href="https://man7.org/linux/man-pages/man2/poll.2.html"><code>poll(2)</code></a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>WaitUsingEPoll</code></td>
<td style="text-align: left;">Wait using the Linux <code>epoll</code> mechanism. Like <code>poll</code> but scales better for workloads with a large number of waiting streams. See <a href="https://man7.org/linux/man-pages/man7/epoll.7.html"><code>epoll(7)</code></a></td>
</tr>
<tr class="even">
<td style="text-align: left;"><code>WaitUsingKQueue</code></td>
<td style="text-align: left;">Wait using the BSD <code>kqueue</code> mechanism. Like <code>epoll</code> but can also wait for files, processes, signals etc. See <a href="https://www.freebsd.org/cgi/man.cgi?kqueue"><code>kqueue(2)</code></a></td>
</tr>
<tr class="odd">
<td style="text-align: left;"><code>WaitUsingPidFD()</code></td>
<td style="text-align: left;">Wait for process termination using the Linux <code>pidfd</code> mechanism. A <code>pidfd</code> is a special process monitoring file descriptor that can in turn be monitored by <code>poll</code> or <code>epoll</code>. See <a href="http://man7.org/linux/man-pages/man2/pidfd_open.2.html"><code>pidfd_open(2)</code></a></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb39" data-startFrom="1057"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1056;"><span id="cb39-1057"><a href="#cb39-1057"></a><span class="fu">WaitingMechanism</span>(x) <span class="op">=</span> <span class="fu">WaitingMechanism</span>(<span class="fu">typeof</span>(x))</span>
<span id="cb39-1058"><a href="#cb39-1058"></a><span class="fu">WaitingMechanism</span>(T<span class="op">::</span><span class="dt">Type)</span> <span class="op">=</span> <span class="fu">is_proxy</span>(T) ? <span class="fu">WaitingMechanism</span>(<span class="fu">unwrap</span>(T)) <span class="op">:</span></span>
<span id="cb39-1059"><a href="#cb39-1059"></a>                                          <span class="fu">WaitBySleeping</span>()</span>
<span id="cb39-1060"><a href="#cb39-1060"></a></span>
<span id="cb39-1061"><a href="#cb39-1061"></a><span class="bu">Base</span>.<span class="fu">isvalid</span>(<span class="op">::</span><span class="dt">WaitingMechanism)</span> <span class="op">=</span> <span class="cn">true</span></span>
<span id="cb39-1062"><a href="#cb39-1062"></a><span class="bu">Base</span>.<span class="fu">isvalid</span>(<span class="op">::</span><span class="dt">WaitUsingEPoll)</span> <span class="op">=</span> <span class="bu">Sys</span>.<span class="fu">islinux</span>()</span>
<span id="cb39-1063"><a href="#cb39-1063"></a><span class="bu">Base</span>.<span class="fu">isvalid</span>(<span class="op">::</span><span class="dt">WaitUsingPidFD)</span> <span class="op">=</span> <span class="bu">Sys</span>.<span class="fu">islinux</span>()</span>
<span id="cb39-1064"><a href="#cb39-1064"></a><span class="bu">Base</span>.<span class="fu">isvalid</span>(<span class="op">::</span><span class="dt">WaitUsingKQueue)</span> <span class="op">=</span> <span class="bu">Sys</span>.<span class="fu">isbsd</span>() <span class="op">&amp;&amp;</span> <span class="cn">false</span> <span class="co"># not yet implemented.</span></span>
<span id="cb39-1065"><a href="#cb39-1065"></a></span>
<span id="cb39-1066"><a href="#cb39-1066"></a><span class="fu">firstvalid</span>(x<span class="op">,</span> xs<span class="op">...</span>) <span class="op">=</span> <span class="fu">isvalid</span>(x) ? x <span class="op">:</span> <span class="fu">firstvalid</span>(xs<span class="op">...</span>)</span>
<span id="cb39-1067"><a href="#cb39-1067"></a></span>
<span id="cb39-1068"><a href="#cb39-1068"></a><span class="kw">const</span> default_poll_mechanism <span class="op">=</span> <span class="fu">firstvalid</span>(<span class="fu">WaitUsingKQueue</span>()<span class="op">,</span></span>
<span id="cb39-1069"><a href="#cb39-1069"></a>                                          <span class="fu">WaitUsingEPoll</span>()<span class="op">,</span></span>
<span id="cb39-1070"><a href="#cb39-1070"></a>                                          <span class="fu">WaitUsingPosixPoll</span>()<span class="op">,</span></span>
<span id="cb39-1071"><a href="#cb39-1071"></a>                                          <span class="fu">WaitBySleeping</span>())</span>
<span id="cb39-1072"><a href="#cb39-1072"></a></span>
<span id="cb39-1073"><a href="#cb39-1073"></a><span class="bu">Base</span>.<span class="fu">wait</span>(x<span class="op">,</span> <span class="op">::</span><span class="dt">WaitBySleeping)</span> <span class="op">=</span> <span class="fu">sleep</span>(<span class="fl">0.1</span>)</span></code></pre></div>
<h2 id="preferred-polling-mechanism">Preferred Polling Mechanism</h2>
<pre><code>set_poll_mechanism(name)</code></pre>
<p>Configure the preferred event polling mechanism: “kqueue”, “epoll”, “poll”, or “sleep”.<span class="sidenote-wrapper"><label for="sn-19" class="margin-toggle sidenote-number"></label><input type="checkbox" id="sn-19" class="margin-toggle"/><span class="sidenote">This setting applies only to <code>poll(2)</code>-compatible file descriptors (i.e. it does not apply to local disk files).<br />
<br />
</span></span> This setting is persistently stored through <a href="https://github.com/JuliaPackaging/Preferences.jl">Preferences.jl</a>.</p>
<p>By default, IOTraits will try to choose the best available mechanism (see <code>default_poll_mechanism</code>).</p>
<p>To find out what mechanism is used for a particular <code>FD</code> call: <code>WaitingMechanism(fd)</code></p>
<div class="sourceCode" id="cb41" data-startFrom="1097"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1096;"><span id="cb41-1097"><a href="#cb41-1097"></a><span class="kw">function</span> <span class="fu">set_poll_mechanism</span>(x)</span>
<span id="cb41-1098"><a href="#cb41-1098"></a>    <span class="pp">@require</span> <span class="fu">poll_mechanism</span>(x) <span class="op">!=</span> <span class="cn">nothing</span></span>
<span id="cb41-1099"><a href="#cb41-1099"></a>    <span class="pp">@require</span> <span class="fu">isvalid</span>(<span class="fu">poll_mechanism</span>(x))</span>
<span id="cb41-1100"><a href="#cb41-1100"></a>    <span class="pp">@set_preferences</span><span class="op">!</span>(<span class="st">&quot;waiting_mechanism&quot;</span> <span class="op">=&gt;</span> x)</span>
<span id="cb41-1101"><a href="#cb41-1101"></a>    <span class="pp">@warn</span> <span class="st">&quot;Preferred IOTraits.WaitingMechanism set to $(poll_mechanism(x)).&quot;</span> <span class="op">*</span></span>
<span id="cb41-1102"><a href="#cb41-1102"></a>          <span class="st">&quot;UnixIO must be recompiled for this setting to take effect.&quot;</span></span>
<span id="cb41-1103"><a href="#cb41-1103"></a><span class="kw">end</span></span>
<span id="cb41-1104"><a href="#cb41-1104"></a></span>
<span id="cb41-1105"><a href="#cb41-1105"></a><span class="fu">poll_mechanism</span>(name) <span class="op">=</span> name <span class="op">==</span> <span class="st">&quot;kqueue&quot;</span> ? <span class="fu">WaitUsingKQueue</span>() <span class="op">:</span></span>
<span id="cb41-1106"><a href="#cb41-1106"></a>                       name <span class="op">==</span> <span class="st">&quot;epoll&quot;</span>  ? <span class="fu">WaitUsingEPoll</span>() <span class="op">:</span></span>
<span id="cb41-1107"><a href="#cb41-1107"></a>                       name <span class="op">==</span> <span class="st">&quot;poll&quot;</span>   ? <span class="fu">WaitUsingPosixPoll</span>() <span class="op">:</span></span>
<span id="cb41-1108"><a href="#cb41-1108"></a>                       name <span class="op">==</span> <span class="st">&quot;sleep&quot;</span>  ? <span class="fu">WaitBySleeping</span>() <span class="op">:</span></span>
<span id="cb41-1109"><a href="#cb41-1109"></a>                                          default_poll_mechanism</span>
<span id="cb41-1110"><a href="#cb41-1110"></a></span>
<span id="cb41-1111"><a href="#cb41-1111"></a><span class="kw">const</span> preferred_poll_mechanism <span class="op">=</span></span>
<span id="cb41-1112"><a href="#cb41-1112"></a>    <span class="fu">poll_mechanism</span>(<span class="pp">@load_preference</span>(<span class="st">&quot;waiting_mechanism&quot;</span>))</span></code></pre></div>
<h1 id="null-streams">Null Streams</h1>
<p><code>NullIn()</code> is an input stream that does nothing. It is intended to be used for testing Delegate Streams.</p>
<div class="sourceCode" id="cb42" data-startFrom="1121"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1120;"><span id="cb42-1121"><a href="#cb42-1121"></a><span class="kw">struct</span> NullIn <span class="op">&lt;:</span><span class="dt"> Stream </span><span class="kw">end</span></span>
<span id="cb42-1122"><a href="#cb42-1122"></a></span>
<span id="cb42-1123"><a href="#cb42-1123"></a><span class="fu">TransferDirection</span>(<span class="op">::</span><span class="dt">Type{NullIn})</span> <span class="op">=</span> <span class="fu">In</span>()</span>
<span id="cb42-1124"><a href="#cb42-1124"></a></span>
<span id="cb42-1125"><a href="#cb42-1125"></a><span class="fu">transfer</span>(io<span class="op">::</span><span class="dt">NullIn,</span> buf<span class="op">::</span><span class="dt">Ptr{UInt8},</span> n<span class="op">;</span> kw<span class="op">...</span>) <span class="op">=</span> n</span></code></pre></div>
<p><code>StreamProxy</code> wraps a stream and forwards all of the default stream methods.</p>
<div class="sourceCode" id="cb43" data-startFrom="1133"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1132;"><span id="cb43-1133"><a href="#cb43-1133"></a><span class="kw">abstract type</span> StreamProxy{T<span class="op">&lt;:</span><span class="dt">Stream</span>} <span class="op">&lt;:</span><span class="dt"> Stream </span><span class="kw">where</span> S <span class="kw">end</span></span>
<span id="cb43-1134"><a href="#cb43-1134"></a><span class="kw">abstract type</span> InDelegate{T} <span class="op">&lt;:</span><span class="dt"> StreamProxy{T} </span><span class="kw">end</span></span>
<span id="cb43-1135"><a href="#cb43-1135"></a><span class="kw">abstract type</span> FullInDelegate{T} <span class="op">&lt;:</span><span class="dt"> StreamProxy{T} </span><span class="kw">end</span></span>
<span id="cb43-1136"><a href="#cb43-1136"></a></span>
<span id="cb43-1137"><a href="#cb43-1137"></a><span class="fu">StreamDelegation</span>(<span class="op">::</span><span class="dt">Type{StreamProxy})</span> <span class="op">=</span> <span class="fu">DelegatedToSubstream</span>()</span>
<span id="cb43-1138"><a href="#cb43-1138"></a></span>
<span id="cb43-1139"><a href="#cb43-1139"></a></span>
<span id="cb43-1140"><a href="#cb43-1140"></a><span class="fu">include</span>(<span class="st">&quot;wrap.jl&quot;</span>)</span></code></pre></div>
<p><code>@delegate_io f</code> creates wrapper methods for function <code>f</code>. A separate method is created with a specific 2nd argument type for each 2nd argument type used in pre-existing methods of <code>f</code> (to avoid method selection ambiguity). e.g.</p>
<pre><code>f(io::IODelegate; kw...) = f(unwrap(io); kw...)
f(io::IODelegate, a2::T, a...; kw...) = f(unwrap(io), a2, a...; kw...)</code></pre>
<div class="sourceCode" id="cb45" data-startFrom="1151"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1150;"><span id="cb45-1151"><a href="#cb45-1151"></a><span class="kw">macro</span> <span class="fu">delegate_io</span>(f<span class="op">,</span> D<span class="op">=</span>FullInDelegate<span class="op">,</span> u<span class="op">=</span>unwrap)</span>
<span id="cb45-1152"><a href="#cb45-1152"></a>    methods <span class="op">=</span> [</span>
<span id="cb45-1153"><a href="#cb45-1153"></a>      <span class="fu">esc</span>(<span class="op">:</span>(( <span class="op">$</span><span class="fu">f</span>(io<span class="op">::</span><span class="dt">$D              </span><span class="op">;</span> k<span class="op">...</span>) <span class="op">=</span> <span class="op">$</span><span class="fu">f</span>(<span class="op">$</span><span class="fu">u</span>(io)          <span class="op">;</span> k<span class="op">...</span>)   )))<span class="op">,</span></span>
<span id="cb45-1154"><a href="#cb45-1154"></a>    ( <span class="fu">esc</span>(<span class="op">:</span>(( <span class="op">$</span><span class="fu">f</span>(io<span class="op">::</span><span class="dt">$D,</span> a<span class="op">::</span><span class="dt">$T,</span> aa<span class="op">...;</span> k<span class="op">...</span>) <span class="op">=</span> <span class="op">$</span><span class="fu">f</span>(<span class="op">$</span><span class="fu">u</span>(io)<span class="op">,</span> a<span class="op">,</span> aa<span class="op">...;</span> k<span class="op">...</span>)   )))</span>
<span id="cb45-1155"><a href="#cb45-1155"></a>                         <span class="cf">for</span> T <span class="kw">in</span> <span class="fu">arg2_types</span>(<span class="bu">Main</span>.<span class="fu">eval</span>(<span class="op">:</span>(<span class="op">$</span>f)))</span>
<span id="cb45-1156"><a href="#cb45-1156"></a>    )<span class="op">...</span>]</span>
<span id="cb45-1157"><a href="#cb45-1157"></a>    (m<span class="op">-&gt;</span><span class="pp">@debug</span> m).(methods)</span>
<span id="cb45-1158"><a href="#cb45-1158"></a>    <span class="fu">Expr</span>(<span class="op">:</span>block<span class="op">,</span> methods<span class="op">...</span>)</span>
<span id="cb45-1159"><a href="#cb45-1159"></a><span class="cf">end</span></span>
<span id="cb45-1160"><a href="#cb45-1160"></a></span>
<span id="cb45-1161"><a href="#cb45-1161"></a></span>
<span id="cb45-1162"><a href="#cb45-1162"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.read<span class="op">!</span></span>
<span id="cb45-1163"><a href="#cb45-1163"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.readuntil</span>
<span id="cb45-1164"><a href="#cb45-1164"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.readline</span>
<span id="cb45-1165"><a href="#cb45-1165"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.countlines</span>
<span id="cb45-1166"><a href="#cb45-1166"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.eachline</span>
<span id="cb45-1167"><a href="#cb45-1167"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.readeach</span>
<span id="cb45-1168"><a href="#cb45-1168"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.unsafe_read</span>
<span id="cb45-1169"><a href="#cb45-1169"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.peek</span>
<span id="cb45-1170"><a href="#cb45-1170"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.readavailable</span>
<span id="cb45-1171"><a href="#cb45-1171"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.mark</span>
<span id="cb45-1172"><a href="#cb45-1172"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.ismarked</span>
<span id="cb45-1173"><a href="#cb45-1173"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.unmark</span>
<span id="cb45-1174"><a href="#cb45-1174"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.reset</span>
<span id="cb45-1175"><a href="#cb45-1175"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.seek</span>
<span id="cb45-1176"><a href="#cb45-1176"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.position</span>
<span id="cb45-1177"><a href="#cb45-1177"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.seekend</span>
<span id="cb45-1178"><a href="#cb45-1178"></a><span class="pp">@delegate_io</span> <span class="bu">Base</span>.seekstart</span></code></pre></div>
<h1 id="bufferedio">BufferedIO</h1>
<p>Generic type for Buffered Input Wrappers.</p>
<p>See <code>BufferedIn</code> and <code>LazyBufferedIn</code> below.</p>
<div class="sourceCode" id="cb46" data-startFrom="1189"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1188;"><span id="cb46-1189"><a href="#cb46-1189"></a><span class="kw">abstract type</span> GenericBufferedIn{T} <span class="op">&lt;:</span><span class="dt"> InDelegate{T} </span><span class="kw">end</span></span>
<span id="cb46-1190"><a href="#cb46-1190"></a></span>
<span id="cb46-1191"><a href="#cb46-1191"></a><span class="fu">TransferCost</span>(<span class="op">::</span><span class="dt">Type{GenericBufferedIn{T}})</span> <span class="kw">where</span> T <span class="op">=</span> <span class="fu">LowTransferCost</span>()</span>
<span id="cb46-1192"><a href="#cb46-1192"></a></span>
<span id="cb46-1193"><a href="#cb46-1193"></a><span class="fu">ReadFragmentation</span>(<span class="op">::</span><span class="dt">Type{GenericBufferedIn{T}})</span> <span class="kw">where</span> T <span class="op">=</span> <span class="fu">ReadsBytes</span>()</span>
<span id="cb46-1194"><a href="#cb46-1194"></a></span>
<span id="cb46-1195"><a href="#cb46-1195"></a><span class="kw">function</span> <span class="fu">buffered_in_warning</span>(io)</span>
<span id="cb46-1196"><a href="#cb46-1196"></a>    <span class="cf">if</span> <span class="fu">ReadFragmentation</span>(io) <span class="op">!=</span> <span class="fu">ReadsBytes</span>()</span>
<span id="cb46-1197"><a href="#cb46-1197"></a>        <span class="pp">@warn</span> <span class="st">&quot;Wrapping $(typeof(io)) with `BufferedIn` causes &quot;</span> <span class="op">*</span></span>
<span id="cb46-1198"><a href="#cb46-1198"></a>              <span class="st">&quot;the $(ReadFragmentation(io)) trait to be ignored!&quot;</span></span>
<span id="cb46-1199"><a href="#cb46-1199"></a>    <span class="cf">end</span></span>
<span id="cb46-1200"><a href="#cb46-1200"></a>    <span class="cf">if</span> <span class="fu">TransferCost</span>(io) <span class="op">==</span> <span class="fu">LowTransferCost</span>()</span>
<span id="cb46-1201"><a href="#cb46-1201"></a>        <span class="pp">@warn</span> <span class="st">&quot;$(typeof(io)) already has LowTransfterCost. &quot;</span> <span class="op">*</span></span>
<span id="cb46-1202"><a href="#cb46-1202"></a>              <span class="st">&quot;Wrapping with `BufferedIn` may degrade performance.&quot;</span></span>
<span id="cb46-1203"><a href="#cb46-1203"></a>    <span class="cf">end</span></span>
<span id="cb46-1204"><a href="#cb46-1204"></a><span class="kw">end</span></span>
<span id="cb46-1205"><a href="#cb46-1205"></a></span>
<span id="cb46-1206"><a href="#cb46-1206"></a></span>
<span id="cb46-1207"><a href="#cb46-1207"></a><span class="bu">Base</span>.<span class="fu">eof</span>(ib<span class="op">::</span><span class="dt">GenericBufferedIn)</span> <span class="op">=</span> ( <span class="fu">bytesavailable</span>(ib.buffer) <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb46-1208"><a href="#cb46-1208"></a>                                 <span class="op">&amp;&amp;</span> <span class="fu">eof</span>(ib.io) )</span>
<span id="cb46-1209"><a href="#cb46-1209"></a></span>
<span id="cb46-1210"><a href="#cb46-1210"></a><span class="bu">Base</span>.<span class="fu">close</span>(ib<span class="op">::</span><span class="dt">GenericBufferedIn)</span> <span class="op">=</span> ( <span class="fu">take!</span>(ib.buffer)<span class="op">;</span></span>
<span id="cb46-1211"><a href="#cb46-1211"></a>                                      <span class="bu">Base</span>.<span class="fu">close</span>(ib.io) )</span></code></pre></div>
<p>Size of the internal buffer.</p>
<div class="sourceCode" id="cb47" data-startFrom="1217"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1216;"><span id="cb47-1217"><a href="#cb47-1217"></a><span class="fu">buffer_size</span>(io<span class="op">::</span><span class="dt">GenericBufferedIn)</span> <span class="op">=</span> io.buffer_size</span></code></pre></div>
<p>Buffer ~1 second of data by default.</p>
<div class="sourceCode" id="cb48" data-startFrom="1223"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1222;"><span id="cb48-1223"><a href="#cb48-1223"></a><span class="fu">default_buffer_size</span>(io) <span class="op">=</span> <span class="fu">DataRate</span>(io)</span></code></pre></div>
<p>Transfer bytes from the wrapped IO to the internal buffer.</p>
<div class="sourceCode" id="cb49" data-startFrom="1229"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1228;"><span id="cb49-1229"><a href="#cb49-1229"></a><span class="kw">function</span> <span class="fu">refill_internal_buffer</span>(io<span class="op">::</span><span class="dt">GenericBufferedIn,</span> n<span class="op">=</span>io.buffer_size<span class="op">;</span> kw<span class="op">...</span>)</span>
<span id="cb49-1230"><a href="#cb49-1230"></a></span>
<span id="cb49-1231"><a href="#cb49-1231"></a>    <span class="co"># If needed, expand the buffer.</span></span>
<span id="cb49-1232"><a href="#cb49-1232"></a>    iob <span class="op">=</span> io.buffer</span>
<span id="cb49-1233"><a href="#cb49-1233"></a>    <span class="pp">@assert</span> iob.append</span>
<span id="cb49-1234"><a href="#cb49-1234"></a>    <span class="bu">Base</span>.<span class="fu">ensureroom</span>(iob<span class="op">,</span> n)</span>
<span id="cb49-1235"><a href="#cb49-1235"></a>    <span class="fu">checkbounds</span>(iob.data<span class="op">,</span> iob.size<span class="op">+</span>n)</span>
<span id="cb49-1236"><a href="#cb49-1236"></a></span>
<span id="cb49-1237"><a href="#cb49-1237"></a>    <span class="co"># Transfer from the IO to the buffer.</span></span>
<span id="cb49-1238"><a href="#cb49-1238"></a>    p <span class="op">=</span> <span class="fu">pointer</span>(iob.data<span class="op">,</span> iob.size<span class="op">+</span><span class="fl">1</span>)</span>
<span id="cb49-1239"><a href="#cb49-1239"></a>    n <span class="op">=</span> GC.<span class="pp">@preserve</span> iob <span class="fu">transfer</span>(io.io<span class="op">,</span> p<span class="op">,</span> n<span class="op">;</span> kw<span class="op">...</span>)</span>
<span id="cb49-1240"><a href="#cb49-1240"></a>    iob.size <span class="op">+=</span> n</span>
<span id="cb49-1241"><a href="#cb49-1241"></a><span class="kw">end</span></span></code></pre></div>
<p>Shortcut to read one byte directly from buffer. Or, if the buffer is empty refill it.</p>
<div class="sourceCode" id="cb50" data-startFrom="1248"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1247;"><span id="cb50-1248"><a href="#cb50-1248"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">read</span>(io<span class="op">::</span><span class="dt">GenericBufferedIn,</span> <span class="op">::</span><span class="dt">Type{UInt8};</span> kw<span class="op">...</span>)</span>
<span id="cb50-1249"><a href="#cb50-1249"></a>    <span class="cf">if</span> <span class="fu">bytesavailable</span>(io.buffer) <span class="op">!=</span> <span class="fl">0</span></span>
<span id="cb50-1250"><a href="#cb50-1250"></a>        <span class="cf">return</span> <span class="bu">Base</span>.<span class="fu">read</span>(io.buffer<span class="op">,</span> <span class="dt">UInt8</span>)</span>
<span id="cb50-1251"><a href="#cb50-1251"></a>    <span class="cf">end</span></span>
<span id="cb50-1252"><a href="#cb50-1252"></a>    <span class="fu">eof</span>(io.io<span class="op">;</span> kw<span class="op">...</span>) <span class="op">&amp;&amp;</span> <span class="fu">throw</span>(<span class="fu">EOFError</span>())</span>
<span id="cb50-1253"><a href="#cb50-1253"></a>    <span class="fu">refill_internal_buffer</span>(io<span class="op">;</span> kw<span class="op">...</span>)</span>
<span id="cb50-1254"><a href="#cb50-1254"></a>    <span class="cf">return</span> <span class="bu">Base</span>.<span class="fu">read</span>(io.buffer<span class="op">,</span> <span class="dt">UInt8</span>)</span>
<span id="cb50-1255"><a href="#cb50-1255"></a><span class="kw">end</span></span></code></pre></div>
<p>Shortcut to peek into the buffer. Or, if the buffer is empty refill it.</p>
<div class="sourceCode" id="cb51" data-startFrom="1262"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1261;"><span id="cb51-1262"><a href="#cb51-1262"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">peek</span>(io<span class="op">::</span><span class="dt">GenericBufferedIn,</span> <span class="op">::</span><span class="dt">Type{T};</span> kw<span class="op">...</span>) <span class="kw">where</span> T</span>
<span id="cb51-1263"><a href="#cb51-1263"></a>    <span class="cf">if</span> <span class="fu">bytesavailable</span>(io.buffer) <span class="op">&gt;=</span> <span class="fu">sizeof</span>(T)</span>
<span id="cb51-1264"><a href="#cb51-1264"></a>        <span class="cf">return</span> <span class="bu">Base</span>.<span class="fu">peek</span>(io.buffer<span class="op">,</span> T)</span>
<span id="cb51-1265"><a href="#cb51-1265"></a>    <span class="cf">end</span></span>
<span id="cb51-1266"><a href="#cb51-1266"></a>    <span class="fu">eof</span>(io.io<span class="op">;</span> kw<span class="op">...</span>) <span class="op">&amp;&amp;</span> <span class="fu">throw</span>(<span class="fu">EOFError</span>())</span>
<span id="cb51-1267"><a href="#cb51-1267"></a>    <span class="fu">refill_internal_buffer</span>(io<span class="op">;</span> kw<span class="op">...</span>)</span>
<span id="cb51-1268"><a href="#cb51-1268"></a>    <span class="cf">return</span> <span class="bu">Base</span>.<span class="fu">peek</span>(io.buffer<span class="op">,</span> T)</span>
<span id="cb51-1269"><a href="#cb51-1269"></a><span class="kw">end</span></span>
<span id="cb51-1270"><a href="#cb51-1270"></a></span>
<span id="cb51-1271"><a href="#cb51-1271"></a></span>
<span id="cb51-1272"><a href="#cb51-1272"></a><span class="kw">function</span> <span class="fu">transfer</span>(io<span class="op">::</span><span class="dt">GenericBufferedIn,</span> <span class="op">::</span><span class="dt">In,</span> <span class="op">::</span><span class="dt">Ptr{UInt8},</span> <span class="op">::</span><span class="dt">RawPtr,</span></span>
<span id="cb51-1273"><a href="#cb51-1273"></a>                  n<span class="op">,</span> start<span class="op">,</span> deadline)</span>
<span id="cb51-1274"><a href="#cb51-1274"></a>    <span class="fu">transfer</span>(io<span class="op">,</span> buf<span class="op">,</span> n<span class="op">;</span> start<span class="op">,</span> deadline)</span>
<span id="cb51-1275"><a href="#cb51-1275"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="bufferedin">BufferedIn</h2>
<pre><code>BufferedIn(io; [buffer_size]) -&gt; IO</code></pre>
<p>Create a wrapper around <code>io</code> to buffer input transfers.</p>
<p>The wrapper will try to read <code>buffer_size</code> bytes into its buffer every time it transfers data from <code>io</code>.</p>
<p>The default <code>buffer_size</code> depends on <code>IOTratis.DataRate(io)</code>.</p>
<p><code>io</code> must not be used directly after the wrapper is created.</p>
<div class="sourceCode" id="cb53" data-startFrom="1292"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1291;"><span id="cb53-1292"><a href="#cb53-1292"></a><span class="kw">struct</span> BufferedIn{T} <span class="op">&lt;:</span><span class="dt"> GenericBufferedIn{T}</span></span>
<span id="cb53-1293"><a href="#cb53-1293"></a>    io<span class="op">::</span><span class="dt">T</span></span>
<span id="cb53-1294"><a href="#cb53-1294"></a>    buffer<span class="op">::</span><span class="dt">IOBuffer</span></span>
<span id="cb53-1295"><a href="#cb53-1295"></a>    buffer_size<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb53-1296"><a href="#cb53-1296"></a>    <span class="kw">function</span> <span class="fu">BufferedIn</span>(io<span class="op">::</span><span class="dt">T;</span> buffer_size<span class="op">=</span><span class="fu">default_buffer_size</span>(io)) <span class="kw">where</span> T</span>
<span id="cb53-1297"><a href="#cb53-1297"></a>        <span class="pp">@require</span> <span class="fu">TransferDirection</span>(io) <span class="op">==</span> <span class="fu">In</span>()</span>
<span id="cb53-1298"><a href="#cb53-1298"></a>        <span class="fu">buffered_in_warning</span>(io)</span>
<span id="cb53-1299"><a href="#cb53-1299"></a>        <span class="fu">new</span><span class="dt">{T}(</span>io<span class="op">,</span> <span class="fu">PipeBuffer</span>()<span class="op">,</span> buffer_size)</span>
<span id="cb53-1300"><a href="#cb53-1300"></a>    <span class="kw">end</span></span>
<span id="cb53-1301"><a href="#cb53-1301"></a><span class="kw">end</span></span>
<span id="cb53-1302"><a href="#cb53-1302"></a></span>
<span id="cb53-1303"><a href="#cb53-1303"></a><span class="fu">TransferSize</span>(<span class="op">::</span><span class="dt">Type{BufferedIn{T}})</span> <span class="kw">where</span> T <span class="op">=</span> <span class="fu">LimitedTransferSize</span>()</span>
<span id="cb53-1304"><a href="#cb53-1304"></a></span>
<span id="cb53-1305"><a href="#cb53-1305"></a><span class="fu">max_transfer_size</span>(io<span class="op">::</span><span class="dt">BufferedIn)</span> <span class="op">=</span> io.buffer_size</span>
<span id="cb53-1306"><a href="#cb53-1306"></a></span>
<span id="cb53-1307"><a href="#cb53-1307"></a><span class="bu">Base</span>.<span class="fu">bytesavailable</span>(io<span class="op">::</span><span class="dt">BufferedIn)</span> <span class="op">=</span> <span class="fu">bytesavailable</span>(io.buffer) </span>
<span id="cb53-1308"><a href="#cb53-1308"></a></span>
<span id="cb53-1309"><a href="#cb53-1309"></a></span>
<span id="cb53-1310"><a href="#cb53-1310"></a><span class="kw">function</span> <span class="fu">transfer</span>(io<span class="op">::</span><span class="dt">BufferedIn,</span> buf<span class="op">::</span><span class="dt">Ptr{UInt8},</span> n<span class="op">,</span> start<span class="op">::</span><span class="dt">Integer,</span> deadline)</span>
<span id="cb53-1311"><a href="#cb53-1311"></a>    <span class="pp">@info</span> <span class="st">&quot;transfer(t::BufferedIn, ...)&quot;</span></span>
<span id="cb53-1312"><a href="#cb53-1312"></a></span>
<span id="cb53-1313"><a href="#cb53-1313"></a>    iob <span class="op">=</span> io.buffer</span>
<span id="cb53-1314"><a href="#cb53-1314"></a>    <span class="co"># If there are not enough bytes in `iob`, read more from the wrapped IO.</span></span>
<span id="cb53-1315"><a href="#cb53-1315"></a>    <span class="cf">if</span> <span class="fu">bytesavailable</span>(iob) <span class="op">&lt;</span> n</span>
<span id="cb53-1316"><a href="#cb53-1316"></a>        <span class="fu">refill_internal_buffer</span>(io)</span>
<span id="cb53-1317"><a href="#cb53-1317"></a>    <span class="cf">end</span></span>
<span id="cb53-1318"><a href="#cb53-1318"></a></span>
<span id="cb53-1319"><a href="#cb53-1319"></a>    <span class="co"># Read available bytes from `iob` into the caller&#39;s `buffer`.</span></span>
<span id="cb53-1320"><a href="#cb53-1320"></a>    n <span class="op">=</span> <span class="fu">min</span>(n<span class="op">,</span> <span class="fu">bytesavailable</span>(iob))</span>
<span id="cb53-1321"><a href="#cb53-1321"></a>    <span class="fu">unsafe_read</span>(iob<span class="op">,</span> buf <span class="op">+</span> (start<span class="op">-</span><span class="fl">1</span>)<span class="op">,</span> n)</span>
<span id="cb53-1322"><a href="#cb53-1322"></a>    <span class="cf">return</span> n</span>
<span id="cb53-1323"><a href="#cb53-1323"></a><span class="kw">end</span></span></code></pre></div>
<p>Shortcut to delegate <code>readavailable</code> to the internal buffer.</p>
<div class="sourceCode" id="cb54" data-startFrom="1329"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1328;"><span id="cb54-1329"><a href="#cb54-1329"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">readavailable</span>(io<span class="op">::</span><span class="dt">BufferedIn;</span> kw<span class="op">...</span>)</span>
<span id="cb54-1330"><a href="#cb54-1330"></a>    <span class="cf">if</span> <span class="fu">bytesavailable</span>(io.buffer) <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb54-1331"><a href="#cb54-1331"></a>        <span class="fu">refill_internal_buffer</span>(io<span class="op">;</span> kw<span class="op">...</span>)</span>
<span id="cb54-1332"><a href="#cb54-1332"></a>    <span class="cf">end</span></span>
<span id="cb54-1333"><a href="#cb54-1333"></a>    <span class="cf">return</span> <span class="fu">readavailable</span>(io.buffer)</span>
<span id="cb54-1334"><a href="#cb54-1334"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="lazybufferedin">LazyBufferedIn</h2>
<pre><code>LazyBufferedIn(io; [buffer_size]) -&gt; IO</code></pre>
<p>Create a wrapper around <code>io</code> to buffer input transfers.</p>
<p>The internal buffer is only used when a small transfer is attempted or if <code>peek</code> is called. Most reads are fulfilled directly from the underling <code>io</code>. This avoids the overhead of double buffering in situations where there is an occasional need to read one byte at a time (e.g. <code>readuntil()</code>) but most reads are already of a reasonable size.</p>
<p>The default <code>buffer_size</code> depends on <code>IOTratis.DataRate(io)</code>.</p>
<p><code>io</code> must not be used directly after the wrapper is created.</p>
<div class="sourceCode" id="cb56" data-startFrom="1356"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1355;"><span id="cb56-1356"><a href="#cb56-1356"></a><span class="kw">struct</span> LazyBufferedIn{T} <span class="op">&lt;:</span><span class="dt"> GenericBufferedIn{T}</span></span>
<span id="cb56-1357"><a href="#cb56-1357"></a>    io<span class="op">::</span><span class="dt">T</span></span>
<span id="cb56-1358"><a href="#cb56-1358"></a>    buffer<span class="op">::</span><span class="dt">IOBuffer</span></span>
<span id="cb56-1359"><a href="#cb56-1359"></a>    buffer_size<span class="op">::</span><span class="dt">Int</span></span>
<span id="cb56-1360"><a href="#cb56-1360"></a>    <span class="kw">function</span> <span class="fu">LazyBufferedIn</span>(io<span class="op">::</span><span class="dt">T;</span> buffer_size<span class="op">=</span><span class="fu">default_buffer_size</span>(io)) <span class="kw">where</span> T</span>
<span id="cb56-1361"><a href="#cb56-1361"></a>        <span class="pp">@require</span> <span class="fu">TransferDirection</span>(io) <span class="op">==</span> <span class="fu">In</span>()</span>
<span id="cb56-1362"><a href="#cb56-1362"></a>        <span class="fu">buffered_in_warning</span>(io)</span>
<span id="cb56-1363"><a href="#cb56-1363"></a>        <span class="fu">new</span><span class="dt">{T}(</span>io<span class="op">,</span> <span class="fu">PipeBuffer</span>()<span class="op">,</span> buffer_size)</span>
<span id="cb56-1364"><a href="#cb56-1364"></a>    <span class="kw">end</span></span>
<span id="cb56-1365"><a href="#cb56-1365"></a><span class="kw">end</span></span>
<span id="cb56-1366"><a href="#cb56-1366"></a></span>
<span id="cb56-1367"><a href="#cb56-1367"></a></span>
<span id="cb56-1368"><a href="#cb56-1368"></a><span class="bu">Base</span>.<span class="fu">bytesavailable</span>(io<span class="op">::</span><span class="dt">LazyBufferedIn)</span> <span class="op">=</span> <span class="fu">bytesavailable</span>(io.buffer) <span class="op">+</span> </span>
<span id="cb56-1369"><a href="#cb56-1369"></a>                                          <span class="fu">bytesavailable</span>(io.io)<span class="op">;</span></span>
<span id="cb56-1370"><a href="#cb56-1370"></a></span>
<span id="cb56-1371"><a href="#cb56-1371"></a></span>
<span id="cb56-1372"><a href="#cb56-1372"></a><span class="kw">function</span> <span class="fu">transfer</span>(io<span class="op">::</span><span class="dt">LazyBufferedIn,</span> buf<span class="op">::</span><span class="dt">Ptr{UInt8},</span> n<span class="op">,</span> start<span class="op">::</span><span class="dt">Integer,</span> deadline)</span>
<span id="cb56-1373"><a href="#cb56-1373"></a>    <span class="pp">@info</span> <span class="st">&quot;transfer(t::LazyBufferedIn, ...)&quot;</span></span>
<span id="cb56-1374"><a href="#cb56-1374"></a></span>
<span id="cb56-1375"><a href="#cb56-1375"></a>    buf <span class="op">+=</span> (start<span class="op">-</span><span class="fl">1</span>)</span>
<span id="cb56-1376"><a href="#cb56-1376"></a></span>
<span id="cb56-1377"><a href="#cb56-1377"></a>    <span class="co"># First take bytes from the buffer.</span></span>
<span id="cb56-1378"><a href="#cb56-1378"></a>    iob <span class="op">=</span> io.buffer</span>
<span id="cb56-1379"><a href="#cb56-1379"></a>    count <span class="op">=</span> <span class="fu">bytesavailable</span>(iob)</span>
<span id="cb56-1380"><a href="#cb56-1380"></a>    <span class="cf">if</span> count <span class="op">&gt;</span> <span class="fl">0</span></span>
<span id="cb56-1381"><a href="#cb56-1381"></a>        count <span class="op">=</span> <span class="fu">min</span>(count<span class="op">,</span> n)</span>
<span id="cb56-1382"><a href="#cb56-1382"></a>        <span class="fu">unsafe_read</span>(iob<span class="op">,</span> buf<span class="op">,</span> count)</span>
<span id="cb56-1383"><a href="#cb56-1383"></a>    <span class="cf">end</span></span>
<span id="cb56-1384"><a href="#cb56-1384"></a></span>
<span id="cb56-1385"><a href="#cb56-1385"></a>    <span class="co"># Then read from the wrapped IO.</span></span>
<span id="cb56-1386"><a href="#cb56-1386"></a>    <span class="cf">if</span> n <span class="op">&gt;</span> count</span>
<span id="cb56-1387"><a href="#cb56-1387"></a>        count <span class="op">+=</span> <span class="fu">transfer</span>(io.io<span class="op">,</span> buf <span class="op">+</span> count<span class="op">,</span> n <span class="op">-</span> count<span class="op">;</span> deadline)</span>
<span id="cb56-1388"><a href="#cb56-1388"></a>    <span class="cf">end</span></span>
<span id="cb56-1389"><a href="#cb56-1389"></a></span>
<span id="cb56-1390"><a href="#cb56-1390"></a>    <span class="pp">@ensure</span> count <span class="op">&lt;=</span> n</span>
<span id="cb56-1391"><a href="#cb56-1391"></a>    <span class="cf">return</span> count</span>
<span id="cb56-1392"><a href="#cb56-1392"></a><span class="kw">end</span></span></code></pre></div>
<h1 id="timeout-io">Timeout IO</h1>
<pre><code>TimeoutIO(io; timeout) -&gt; IO</code></pre>
<p>The <code>TimeoutIO</code> wrapper adds a timeout deadline to an <code>io</code>. It is used to add timeout capability to Base.IO functions.</p>
<div class="sourceCode" id="cb58" data-startFrom="1404"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1403;"><span id="cb58-1404"><a href="#cb58-1404"></a><span class="kw">struct</span> TimeoutIO{T} <span class="op">&lt;:</span><span class="dt"> FullInDelegate{T}</span></span>
<span id="cb58-1405"><a href="#cb58-1405"></a>    io<span class="op">::</span><span class="dt">T</span></span>
<span id="cb58-1406"><a href="#cb58-1406"></a>    deadline<span class="op">::</span><span class="dt">Float64</span></span>
<span id="cb58-1407"><a href="#cb58-1407"></a>    <span class="kw">function</span> <span class="fu">TimeoutIO</span>(io<span class="op">::</span><span class="dt">T,</span> timeout) <span class="kw">where</span> T</span>
<span id="cb58-1408"><a href="#cb58-1408"></a>        <span class="pp">@require</span> timeout <span class="op">&lt;</span> <span class="cn">Inf</span></span>
<span id="cb58-1409"><a href="#cb58-1409"></a>        <span class="fu">new</span><span class="dt">{T}(</span>io<span class="op">,</span> <span class="fu">time</span>() <span class="op">+</span> timeout)</span>
<span id="cb58-1410"><a href="#cb58-1410"></a>    <span class="kw">end</span></span>
<span id="cb58-1411"><a href="#cb58-1411"></a><span class="kw">end</span></span>
<span id="cb58-1412"><a href="#cb58-1412"></a></span>
<span id="cb58-1413"><a href="#cb58-1413"></a><span class="fu">timeout_io</span>(io<span class="op">,</span> t) <span class="op">=</span> t <span class="op">==</span> <span class="cn">Inf</span> ? io <span class="op">:</span> <span class="fu">TimeoutIO</span>(io<span class="op">,</span> t)</span>
<span id="cb58-1414"><a href="#cb58-1414"></a></span>
<span id="cb58-1415"><a href="#cb58-1415"></a><span class="kw">function</span> <span class="fu">transfer</span>(t<span class="op">::</span><span class="dt">TimeoutIO{T},</span> buffer<span class="op">,</span> n<span class="op">;</span> start<span class="op">,</span> kw<span class="op">...</span>) <span class="kw">where</span> T</span>
<span id="cb58-1416"><a href="#cb58-1416"></a>    <span class="pp">@info</span> <span class="st">&quot;transfer(t::ITimeoutIO, ...)&quot;</span></span>
<span id="cb58-1417"><a href="#cb58-1417"></a>    <span class="fu">transfer</span>(t.io<span class="op">,</span> buffer<span class="op">,</span> n<span class="op">;</span> start<span class="op">,</span> deadline <span class="op">=</span> t.deadline)</span>
<span id="cb58-1418"><a href="#cb58-1418"></a><span class="kw">end</span></span></code></pre></div>
<h1 id="base.io-interface">Base.IO Interface</h1>
<div class="sourceCode" id="cb59" data-startFrom="1424"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1423;"><span id="cb59-1424"><a href="#cb59-1424"></a><span class="bu">Base</span>.<span class="fu">isreadable</span>(io<span class="op">::</span><span class="dt">TraitsIO)</span> <span class="op">=</span> <span class="fu">is_input</span>(io.stream)</span>
<span id="cb59-1425"><a href="#cb59-1425"></a><span class="bu">Base</span>.<span class="fu">iswritable</span>(io<span class="op">::</span><span class="dt">TraitsIO)</span> <span class="op">=</span> <span class="fu">is_output</span>(io.stream)</span></code></pre></div>
<h2 id="function-bytesavailable">Function <code>bytesavailable</code></h2>
<p><code>bytesavailable</code> is specialised on Transfer Size and Transfer Size Mechanism.</p>
<div class="sourceCode" id="cb60" data-startFrom="1433"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1432;"><span id="cb60-1433"><a href="#cb60-1433"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">bytesavailable</span>(io<span class="op">::</span><span class="dt">TraitsIO)</span></span>
<span id="cb60-1434"><a href="#cb60-1434"></a>    <span class="pp">@require</span> <span class="fu">isreadable</span>(io)</span>
<span id="cb60-1435"><a href="#cb60-1435"></a>    <span class="fu">_bytesavailable</span>(io<span class="op">,</span> <span class="fu">TransferSize</span>(io))</span>
<span id="cb60-1436"><a href="#cb60-1436"></a><span class="kw">end</span></span>
<span id="cb60-1437"><a href="#cb60-1437"></a></span>
<span id="cb60-1438"><a href="#cb60-1438"></a><span class="fu">_bytesavailable</span>(io<span class="op">,</span> <span class="op">::</span><span class="dt">UnknownTransferSize)</span> <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb60-1439"><a href="#cb60-1439"></a><span class="fu">_bytesavailable</span>(io<span class="op">,</span> <span class="op">::</span><span class="dt">KnownTransferSize)</span> <span class="op">=</span></span>
<span id="cb60-1440"><a href="#cb60-1440"></a>    <span class="fu">_bytesavailable</span>(io<span class="op">,</span> <span class="fu">TransferSizeMechanism</span>(io))</span></code></pre></div>
<h2 id="function-eof">Function <code>eof</code></h2>
<p><code>eof</code> is specialised on Total Size.</p>
<div class="sourceCode" id="cb61" data-startFrom="1448"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1447;"><span id="cb61-1448"><a href="#cb61-1448"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">eof</span>(io<span class="op">::</span><span class="dt">TraitsIO;</span> timeout<span class="op">=</span><span class="cn">Inf</span>)</span>
<span id="cb61-1449"><a href="#cb61-1449"></a>    <span class="pp">@require</span> <span class="fu">isreadable</span>(io)</span>
<span id="cb61-1450"><a href="#cb61-1450"></a>    <span class="fu">eof</span>(io<span class="op">,</span> <span class="fu">TotalSize</span>(io)<span class="op">;</span> timeout)</span>
<span id="cb61-1451"><a href="#cb61-1451"></a><span class="kw">end</span></span></code></pre></div>
<p>If Total Size is known then <code>eof</code> is reached when there are zero <code>bytesavailable</code>.</p>
<div class="sourceCode" id="cb62" data-startFrom="1457"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1456;"><span id="cb62-1457"><a href="#cb62-1457"></a><span class="bu">Base</span>.<span class="fu">eof</span>(io<span class="op">,</span> <span class="op">::</span><span class="dt">KnownTotalSize;</span> kw<span class="op">...</span>) <span class="op">=</span> <span class="fu">bytesavailable</span>(io) <span class="op">==</span> <span class="fl">0</span></span></code></pre></div>
<p>If Total Size is not known then <code>eof</code> must “block to wait for more data”.</p>
<div class="sourceCode" id="cb63" data-startFrom="1463"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1462;"><span id="cb63-1463"><a href="#cb63-1463"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">eof</span>(io<span class="op">,</span> <span class="op">::</span><span class="dt">UnknownTotalSize;</span> kw<span class="op">...</span>)</span>
<span id="cb63-1464"><a href="#cb63-1464"></a>    n <span class="op">=</span> <span class="fu">bytesavailable</span>(io)</span>
<span id="cb63-1465"><a href="#cb63-1465"></a>    <span class="cf">if</span> n <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb63-1466"><a href="#cb63-1466"></a>        <span class="fu">wait</span>(io<span class="op">;</span> kw<span class="op">...</span>)</span>
<span id="cb63-1467"><a href="#cb63-1467"></a>        n <span class="op">=</span> <span class="fu">bytesavailable</span>(io)</span>
<span id="cb63-1468"><a href="#cb63-1468"></a>    <span class="cf">end</span></span>
<span id="cb63-1469"><a href="#cb63-1469"></a>    <span class="cf">return</span> n <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb63-1470"><a href="#cb63-1470"></a><span class="kw">end</span></span>
<span id="cb63-1471"><a href="#cb63-1471"></a></span>
<span id="cb63-1472"><a href="#cb63-1472"></a><span class="bu">Base</span>.<span class="fu">eof</span>(io<span class="op">,</span> <span class="op">::</span><span class="dt">InfiniteTotalSize;</span> kw<span class="op">...</span>) <span class="op">=</span> (<span class="fu">wait</span>(io<span class="op">;</span> kw<span class="op">...</span>)<span class="op">;</span> <span class="cn">false</span>)</span></code></pre></div>
<h2 id="function-readio-t">Function <code>read(io, T)</code></h2>
<p>Single byte read is specialized based on the Transfer Cost. (Single byte read for High Transfer Cost falls through to the “does not support byte I/O” error from Base).</p>
<div class="sourceCode" id="cb64" data-startFrom="1483"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1482;"><span id="cb64-1483"><a href="#cb64-1483"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">read</span>(io<span class="op">::</span><span class="dt">TraitsIO,</span> <span class="op">::</span><span class="dt">Type{UInt8};</span> timeout<span class="op">=</span><span class="cn">Inf</span>)</span>
<span id="cb64-1484"><a href="#cb64-1484"></a>    <span class="pp">@require</span> <span class="fu">isreadable</span>(io)</span>
<span id="cb64-1485"><a href="#cb64-1485"></a>    <span class="fu">read</span>(io<span class="op">,</span> <span class="fu">TransferCost</span>(io)<span class="op">,</span> <span class="dt">UInt8</span><span class="op">;</span> timeout)</span>
<span id="cb64-1486"><a href="#cb64-1486"></a><span class="kw">end</span></span></code></pre></div>
<p>Allow single byte read for interfaces with Low Transfter Cost, but warn if a special Read Fragmentation trait is available.</p>
<div class="sourceCode" id="cb65" data-startFrom="1493"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1492;"><span id="cb65-1493"><a href="#cb65-1493"></a><span class="kw">function</span> <span class="fu">read</span>(io<span class="op">,</span> <span class="op">::</span><span class="dt">LowTransferCost,</span> <span class="op">::</span><span class="dt">Type{UInt8};</span> kw<span class="op">...</span>)</span>
<span id="cb65-1494"><a href="#cb65-1494"></a>    <span class="cf">if</span> <span class="fu">ReadFragmentation</span>(io) <span class="op">==</span> <span class="fu">ReadsLines</span>()</span>
<span id="cb65-1495"><a href="#cb65-1495"></a>        <span class="pp">@warn</span> <span class="st">&quot;read(::$(typeof(io)), UInt8): &quot;</span> <span class="op">*</span></span>
<span id="cb65-1496"><a href="#cb65-1496"></a>              <span class="st">&quot;$(typeof(io)) implements `IOTraits.ReadsLines`.&quot;</span> <span class="op">*</span></span>
<span id="cb65-1497"><a href="#cb65-1497"></a>              <span class="st">&quot;Reading one byte at a time may not be efficient.&quot;</span> <span class="op">*</span></span>
<span id="cb65-1498"><a href="#cb65-1498"></a>              <span class="st">&quot;Consider using `readline` instead.&quot;</span></span>
<span id="cb65-1499"><a href="#cb65-1499"></a>    <span class="cf">end</span></span>
<span id="cb65-1500"><a href="#cb65-1500"></a>    x <span class="op">=</span> <span class="fu">Ref</span><span class="dt">{UInt8}(</span>)</span>
<span id="cb65-1501"><a href="#cb65-1501"></a>    n <span class="op">=</span> GC.<span class="pp">@preserve</span> x <span class="fu">transfer</span>(io <span class="op">=&gt;</span> <span class="fu">pointer</span>(x)<span class="op">,</span> <span class="fl">1</span><span class="op">;</span> kw<span class="op">...</span>)</span>
<span id="cb65-1502"><a href="#cb65-1502"></a>    n <span class="op">==</span> <span class="fl">1</span> <span class="op">||</span> <span class="fu">throw</span>(<span class="fu">EOFError</span>())</span>
<span id="cb65-1503"><a href="#cb65-1503"></a>    <span class="cf">return</span> x[]</span>
<span id="cb65-1504"><a href="#cb65-1504"></a><span class="kw">end</span></span></code></pre></div>
<p>Read as String.<br />
Wrap with <code>TimeoutIO</code> if timeout is requested.</p>
<div class="sourceCode" id="cb66" data-startFrom="1511"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1510;"><span id="cb66-1511"><a href="#cb66-1511"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">read</span>(io<span class="op">::</span><span class="dt">TraitsIO,</span> <span class="op">::</span><span class="dt">Type{String};</span> timeout<span class="op">=</span><span class="cn">Inf</span>)</span>
<span id="cb66-1512"><a href="#cb66-1512"></a>    <span class="pp">@require</span> <span class="fu">isreadable</span>(io)</span>
<span id="cb66-1513"><a href="#cb66-1513"></a>    <span class="pp">@invoke</span> <span class="fu">String</span>(<span class="bu">Base</span>.<span class="fu">read</span>(<span class="fu">timeout_io</span>(io<span class="op">,</span> timeout)<span class="op">::</span><span class="dt">IO)</span>)</span>
<span id="cb66-1514"><a href="#cb66-1514"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="function-lengthio">Function <code>length(io)</code></h2>
<div class="sourceCode" id="cb67" data-startFrom="1519"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1518;"><span id="cb67-1519"><a href="#cb67-1519"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">length</span>(io<span class="op">::</span><span class="dt">TraitsIO)</span></span>
<span id="cb67-1520"><a href="#cb67-1520"></a>    <span class="pp">@require</span> <span class="fu">TotalSize</span>(io) isa KnownTotalSize</span>
<span id="cb67-1521"><a href="#cb67-1521"></a></span>
<span id="cb67-1522"><a href="#cb67-1522"></a>    <span class="fu">_length</span>(io<span class="op">,</span> <span class="fu">TotalSizeMechanism</span>(io))</span>
<span id="cb67-1523"><a href="#cb67-1523"></a><span class="kw">end</span></span>
<span id="cb67-1524"><a href="#cb67-1524"></a></span>
<span id="cb67-1525"><a href="#cb67-1525"></a><span class="fu">_length</span>(io<span class="op">,</span> <span class="op">::</span><span class="dt">SupportsStatSize)</span> <span class="op">=</span> <span class="fu">stat</span>(io).size</span></code></pre></div>
<h2 id="function-readbytes">Function <code>readbytes!</code></h2>
<div class="sourceCode" id="cb68" data-startFrom="1530"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1529;"><span id="cb68-1530"><a href="#cb68-1530"></a><span class="bu">Base</span>.<span class="fu">readbytes!</span>(io<span class="op">::</span><span class="dt">TraitsIO,</span> buf<span class="op">::</span><span class="dt">Vector{UInt8},</span> nbytes<span class="op">=</span><span class="fu">length</span>(buf)<span class="op">;</span> kw<span class="op">...</span>) <span class="op">=</span></span>
<span id="cb68-1531"><a href="#cb68-1531"></a>    <span class="fu">readbytes!</span>(io<span class="op">,</span> buf<span class="op">,</span> <span class="fu">UInt</span>(nbytes)<span class="op">;</span> kw<span class="op">...</span>)</span>
<span id="cb68-1532"><a href="#cb68-1532"></a></span>
<span id="cb68-1533"><a href="#cb68-1533"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">readbytes!</span>(io<span class="op">::</span><span class="dt">TraitsIO,</span> buf<span class="op">::</span><span class="dt">Vector{UInt8},</span> nbytes<span class="op">::</span><span class="dt">UInt;</span></span>
<span id="cb68-1534"><a href="#cb68-1534"></a>                         all<span class="op">::</span><span class="dt">Bool=</span><span class="cn">true</span><span class="op">,</span> timeout<span class="op">=</span><span class="cn">Inf</span>)</span>
<span id="cb68-1535"><a href="#cb68-1535"></a>    <span class="pp">@require</span> <span class="fu">isreadable</span>(io)</span>
<span id="cb68-1536"><a href="#cb68-1536"></a>    deadline <span class="op">=</span> <span class="fu">timeout_deadline</span>(timeout)</span>
<span id="cb68-1537"><a href="#cb68-1537"></a></span>
<span id="cb68-1538"><a href="#cb68-1538"></a>    lb<span class="op">::</span><span class="dt">Int </span><span class="op">=</span> <span class="fu">length</span>(buf)</span>
<span id="cb68-1539"><a href="#cb68-1539"></a>    nread <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb68-1540"><a href="#cb68-1540"></a>    <span class="cf">while</span> nread <span class="op">&lt;</span> nbytes</span>
<span id="cb68-1541"><a href="#cb68-1541"></a>        <span class="pp">@assert</span> nread <span class="op">&lt;=</span> lb</span>
<span id="cb68-1542"><a href="#cb68-1542"></a>        <span class="cf">if</span> (lb <span class="op">-</span> nread) <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb68-1543"><a href="#cb68-1543"></a>            lb <span class="op">=</span> lb <span class="op">==</span> <span class="fl">0</span> ? nbytes <span class="op">:</span> <span class="fu">min</span>(lb <span class="op">*</span> <span class="fl">10</span><span class="op">,</span> nbytes)</span>
<span id="cb68-1544"><a href="#cb68-1544"></a>            <span class="fu">resize!</span>(buf<span class="op">,</span> lb)</span>
<span id="cb68-1545"><a href="#cb68-1545"></a>        <span class="cf">end</span></span>
<span id="cb68-1546"><a href="#cb68-1546"></a>        <span class="pp">@assert</span> lb <span class="op">&gt;</span> nread</span>
<span id="cb68-1547"><a href="#cb68-1547"></a>        n <span class="op">=</span> <span class="fu">transfer</span>(io<span class="op">,</span> buf<span class="op">,</span> lb <span class="op">-</span> nread<span class="op">,</span> nread <span class="op">+</span> <span class="fl">1</span><span class="op">,</span> deadline)</span>
<span id="cb68-1548"><a href="#cb68-1548"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="fl">0</span> <span class="op">||</span> <span class="op">!</span>all</span>
<span id="cb68-1549"><a href="#cb68-1549"></a>            <span class="cf">break</span></span>
<span id="cb68-1550"><a href="#cb68-1550"></a>        <span class="cf">end</span></span>
<span id="cb68-1551"><a href="#cb68-1551"></a>        nread <span class="op">+=</span> n</span>
<span id="cb68-1552"><a href="#cb68-1552"></a>    <span class="cf">end</span></span>
<span id="cb68-1553"><a href="#cb68-1553"></a>    <span class="pp">@ensure</span> nread <span class="op">&lt;=</span> nbytes</span>
<span id="cb68-1554"><a href="#cb68-1554"></a>    <span class="cf">return</span> nread</span>
<span id="cb68-1555"><a href="#cb68-1555"></a><span class="kw">end</span></span>
<span id="cb68-1556"><a href="#cb68-1556"></a></span>
<span id="cb68-1557"><a href="#cb68-1557"></a><span class="fu">timeout_deadline</span>(timeout) <span class="op">=</span> timeout <span class="op">==</span> <span class="cn">Inf</span> ? <span class="cn">Inf</span> <span class="op">:</span> <span class="fu">time</span>() <span class="op">+</span> timeout</span></code></pre></div>
<h2 id="function-readio">Function <code>read(io)</code></h2>
<p>Read until end of file. Specialise on Total Size, Cursor Support and Mmap Support.</p>
<div class="sourceCode" id="cb69" data-startFrom="1566"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1565;"><span id="cb69-1566"><a href="#cb69-1566"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">read</span>(io<span class="op">;</span> timeout<span class="op">=</span><span class="cn">Inf</span>)</span>
<span id="cb69-1567"><a href="#cb69-1567"></a>    <span class="pp">@require</span> <span class="fu">isreadable</span>(io)</span>
<span id="cb69-1568"><a href="#cb69-1568"></a>    <span class="fu">read</span>(io<span class="op">,</span> <span class="fu">TotalSize</span>(io)<span class="op">,</span> <span class="fu">CursorSupport</span>(io)<span class="op">;</span> timeout)</span>
<span id="cb69-1569"><a href="#cb69-1569"></a><span class="kw">end</span></span>
<span id="cb69-1570"><a href="#cb69-1570"></a></span>
<span id="cb69-1571"><a href="#cb69-1571"></a></span>
<span id="cb69-1572"><a href="#cb69-1572"></a><span class="kw">function</span> <span class="fu">read</span>(io<span class="op">,</span> <span class="op">::</span><span class="dt">UnknownTotalSize,</span> <span class="op">::</span><span class="dt">NoCursors;</span> timeout<span class="op">=</span><span class="cn">Inf</span>)</span>
<span id="cb69-1573"><a href="#cb69-1573"></a>    n <span class="op">=</span> <span class="fu">default_buffer_size</span>(io)</span>
<span id="cb69-1574"><a href="#cb69-1574"></a>    buf <span class="op">=</span> <span class="fu">Vector</span><span class="dt">{UInt8}(</span><span class="cn">undef</span><span class="op">,</span> n)</span>
<span id="cb69-1575"><a href="#cb69-1575"></a>    <span class="fu">readbytes!</span>(io<span class="op">,</span> buf<span class="op">,</span> n<span class="op">;</span> timeout)</span>
<span id="cb69-1576"><a href="#cb69-1576"></a>    <span class="cf">return</span> buf</span>
<span id="cb69-1577"><a href="#cb69-1577"></a><span class="kw">end</span></span></code></pre></div>
<div class="sourceCode" id="cb70" data-startFrom="1583"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1582;"><span id="cb70-1583"><a href="#cb70-1583"></a><span class="kw">function</span> <span class="fu">read</span>(io<span class="op">,</span> <span class="op">::</span><span class="dt">KnownTotalSize,</span> <span class="op">::</span><span class="dt">AbstractSeekable;</span> kw<span class="op">...</span>)</span>
<span id="cb70-1584"><a href="#cb70-1584"></a>    n <span class="op">=</span> <span class="fu">length</span>(io) <span class="op">-</span> <span class="fu">position</span>(io)</span>
<span id="cb70-1585"><a href="#cb70-1585"></a>    buf <span class="op">=</span> <span class="fu">Vector</span><span class="dt">{UInt8}(</span><span class="cn">undef</span><span class="op">,</span> n)</span>
<span id="cb70-1586"><a href="#cb70-1586"></a>    <span class="fu">transfer_n</span>(io <span class="op">=&gt;</span> buffer<span class="op">,</span> n<span class="op">;</span> kw<span class="op">...</span>)</span>
<span id="cb70-1587"><a href="#cb70-1587"></a>    <span class="cf">return</span> buf</span>
<span id="cb70-1588"><a href="#cb70-1588"></a><span class="kw">end</span></span></code></pre></div>
<p>Transfer <code>n</code> items between <code>io</code> and <code>buf</code>.</p>
<p>Call <code>transfer</code> repeatedly until all <code>n</code> items have been Transferred, stopping only if end of file is reached.</p>
<p>Return the number of items transferred.</p>
<div class="sourceCode" id="cb71" data-startFrom="1599"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1598;"><span id="cb71-1599"><a href="#cb71-1599"></a><span class="kw">function</span> <span class="fu">transfer_n</span>(io<span class="op">,</span> buf<span class="op">::</span><span class="dt">Vector{UInt8},</span> n<span class="op">,</span> start<span class="op">,</span> deadline)</span>
<span id="cb71-1600"><a href="#cb71-1600"></a>    <span class="pp">@require</span> <span class="fu">length</span>(buf) <span class="op">==</span> (start<span class="op">-</span><span class="fl">1</span>) <span class="op">+</span> n</span>
<span id="cb71-1601"><a href="#cb71-1601"></a>    nread <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb71-1602"><a href="#cb71-1602"></a>    <span class="cf">while</span> nread <span class="op">&lt;</span> n</span>
<span id="cb71-1603"><a href="#cb71-1603"></a>        n <span class="op">=</span> <span class="fu">transfer</span>(io<span class="op">,</span> buf<span class="op">,</span> n <span class="op">-</span> nread<span class="op">,</span> start <span class="op">+</span> nread<span class="op">,</span> deadline)</span>
<span id="cb71-1604"><a href="#cb71-1604"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb71-1605"><a href="#cb71-1605"></a>            <span class="cf">break</span></span>
<span id="cb71-1606"><a href="#cb71-1606"></a>        <span class="cf">end</span></span>
<span id="cb71-1607"><a href="#cb71-1607"></a>        nread <span class="op">+=</span> n</span>
<span id="cb71-1608"><a href="#cb71-1608"></a>    <span class="cf">end</span></span>
<span id="cb71-1609"><a href="#cb71-1609"></a>    <span class="cf">return</span> n</span>
<span id="cb71-1610"><a href="#cb71-1610"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="function-readio-n">Function <code>read(io, n)</code></h2>
<div class="sourceCode" id="cb72" data-startFrom="1615"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1614;"><span id="cb72-1615"><a href="#cb72-1615"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">read</span>(io<span class="op">::</span><span class="dt">TraitsIO,</span> n<span class="op">::</span><span class="dt">Integer;</span> timeout<span class="op">=</span><span class="cn">Inf</span>)</span>
<span id="cb72-1616"><a href="#cb72-1616"></a>    <span class="pp">@require</span> <span class="fu">isreadable</span>(io)</span>
<span id="cb72-1617"><a href="#cb72-1617"></a>    <span class="pp">@invoke</span> <span class="bu">Base</span>.<span class="fu">read</span>(<span class="fu">timeout_io</span>(io<span class="op">,</span> timeout)<span class="op">::</span><span class="dt">IO,</span> n<span class="op">::</span><span class="dt">Integer)</span></span>
<span id="cb72-1618"><a href="#cb72-1618"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="function-unsafe_read">Function <code>unsafe_read</code></h2>
<p><code>unsafe_read</code> must keep trying until <code>nbytes</code> nave been transferred.</p>
<div class="sourceCode" id="cb73" data-startFrom="1626"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1625;"><span id="cb73-1626"><a href="#cb73-1626"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">unsafe_read</span>(io<span class="op">::</span><span class="dt">TraitsIO,</span> buf<span class="op">::</span><span class="dt">Ptr{UInt8},</span> nbytes<span class="op">::</span><span class="dt">UInt;</span></span>
<span id="cb73-1627"><a href="#cb73-1627"></a>                          deadline<span class="op">=</span><span class="cn">Inf</span>)</span>
<span id="cb73-1628"><a href="#cb73-1628"></a>    <span class="pp">@require</span> <span class="fu">isreadable</span>(io)</span>
<span id="cb73-1629"><a href="#cb73-1629"></a>    nread <span class="op">=</span> <span class="fl">0</span></span>
<span id="cb73-1630"><a href="#cb73-1630"></a>    <span class="pp">@debug</span> <span class="st">&quot;Base.unsafe_read(io::TraitsIO, buf::Ptr{UInt8}, nbytes::UInt)&quot;</span></span>
<span id="cb73-1631"><a href="#cb73-1631"></a>    <span class="cf">while</span> nread <span class="op">&lt;</span> nbytes</span>
<span id="cb73-1632"><a href="#cb73-1632"></a>        n <span class="op">=</span> <span class="fu">transfer</span>(io <span class="op">=&gt;</span> buf <span class="op">+</span> nread<span class="op">,</span> nbytes <span class="op">-</span> nread<span class="op">;</span> deadline)</span>
<span id="cb73-1633"><a href="#cb73-1633"></a>        <span class="cf">if</span> n <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb73-1634"><a href="#cb73-1634"></a>            <span class="fu">throw</span>(<span class="fu">EOFError</span>())</span>
<span id="cb73-1635"><a href="#cb73-1635"></a>        <span class="cf">end</span></span>
<span id="cb73-1636"><a href="#cb73-1636"></a>        nread <span class="op">+=</span> n</span>
<span id="cb73-1637"><a href="#cb73-1637"></a>    <span class="cf">end</span></span>
<span id="cb73-1638"><a href="#cb73-1638"></a>    <span class="pp">@ensure</span> nread <span class="op">==</span> nbytes</span>
<span id="cb73-1639"><a href="#cb73-1639"></a>    <span class="cn">nothing</span></span>
<span id="cb73-1640"><a href="#cb73-1640"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="function-readavailable">Function <code>readavailable</code></h2>
<pre><code>readavailable(io::TraitsIO; [timeout=0]) -&gt; Vector{UInt8}</code></pre>
<p>Read immediately available data from a stream.</p>
<p>If <code>TransferSize(io)</code> is <code>UnknownTransferSize()</code> the only way to know how much data is available is to attempt a transfer.</p>
<p>Otherwise, the amount of data immediately available can be queried using the <code>bytesavailable</code> function.</p>
<div class="sourceCode" id="cb75" data-startFrom="1657"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1656;"><span id="cb75-1657"><a href="#cb75-1657"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">readavailable</span>(io<span class="op">::</span><span class="dt">TraitsIO;</span> timeout<span class="op">=</span><span class="fl">0</span>)</span>
<span id="cb75-1658"><a href="#cb75-1658"></a>    <span class="pp">@require</span> <span class="fu">isreadable</span>(io)</span>
<span id="cb75-1659"><a href="#cb75-1659"></a>    n <span class="op">=</span> <span class="fu">bytesavailable</span>(io)</span>
<span id="cb75-1660"><a href="#cb75-1660"></a>    <span class="cf">if</span> n <span class="op">==</span> <span class="fl">0</span> </span>
<span id="cb75-1661"><a href="#cb75-1661"></a>        n <span class="op">=</span> <span class="fu">default_buffer_size</span>(io)</span>
<span id="cb75-1662"><a href="#cb75-1662"></a>    <span class="cf">end</span></span>
<span id="cb75-1663"><a href="#cb75-1663"></a>    buf <span class="op">=</span> <span class="fu">Vector</span><span class="dt">{UInt8}(</span><span class="cn">undef</span><span class="op">,</span> n)</span>
<span id="cb75-1664"><a href="#cb75-1664"></a>    n <span class="op">=</span> <span class="fu">transfer</span>(io<span class="op">,</span> buf<span class="op">;</span> timeout)</span>
<span id="cb75-1665"><a href="#cb75-1665"></a>    <span class="fu">resize!</span>(buf<span class="op">,</span> n)</span>
<span id="cb75-1666"><a href="#cb75-1666"></a><span class="kw">end</span></span></code></pre></div>
<h2 id="function-readline">Function <code>readline</code></h2>
<p><code>readline</code> is specialised based on the Read Fragmentation trait.</p>
<div class="sourceCode" id="cb76" data-startFrom="1675"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1674;"><span id="cb76-1675"><a href="#cb76-1675"></a><span class="kw">function</span> <span class="bu">Base</span>.<span class="fu">readline</span>(io<span class="op">::</span><span class="dt">TraitsIO;</span> timeout<span class="op">=</span><span class="cn">Inf</span><span class="op">,</span> kw<span class="op">...</span>)</span>
<span id="cb76-1676"><a href="#cb76-1676"></a>    <span class="pp">@require</span> <span class="fu">isreadable</span>(io)</span>
<span id="cb76-1677"><a href="#cb76-1677"></a>    <span class="fu">readline</span>(io<span class="op">,</span> <span class="fu">ReadFragmentation</span>(io)<span class="op">;</span> timeout<span class="op">,</span> kw<span class="op">...</span>)</span>
<span id="cb76-1678"><a href="#cb76-1678"></a><span class="kw">end</span></span></code></pre></div>
<p>If there is no special Read Fragmentation method, use <code>TimeoutIO</code> to support the timeout option.</p>
<div class="sourceCode" id="cb77" data-startFrom="1684"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1683;"><span id="cb77-1684"><a href="#cb77-1684"></a><span class="fu">readline</span>(io<span class="op">::</span><span class="dt">TraitsIO,</span> <span class="op">::</span><span class="dt">AnyReadFragmentation;</span> timeout<span class="op">,</span> kw<span class="op">...</span>) <span class="op">=</span></span>
<span id="cb77-1685"><a href="#cb77-1685"></a>    <span class="pp">@invoke</span> <span class="bu">Base</span>.<span class="fu">readline</span>(<span class="fu">timeout_io</span>(io<span class="op">,</span> timeout)<span class="op">::</span><span class="dt">IO;</span> kw<span class="op">...</span>)</span></code></pre></div>
<h3 id="readlineio-readslines"><code>readline(io, ::ReadsLines)</code></h3>
<p>Character or Terminal devices (<code>S_IFCHR</code>) are usually used in “canonical mode” (<code>ICANON</code>).</p>
<blockquote>
<p>“In canonical mode: Input is made available line by line.” <a href="https://man7.org/linux/man-pages/man3/termios.3.html">termios(3)</a>.</p>
</blockquote>
<p>For these devices calling <code>read(2)</code> will usually return exactly one line. It will only ever return an incomplete line if length exceeded <code>MAX_CANON</code>. Note that in canonical mode a line can be terminated by <code>CEOF</code> rather than “”, but <code>read(2)</code> does not return the <code>CEOF</code> character (e.g. when the shell sends a “bash$” prompt without a newline).</p>
<p>If <code>io</code> has the <code>ReadsLines</code> trait calling <code>transfer</code> once will read one line.</p>
<div class="sourceCode" id="cb78" data-startFrom="1705"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1704;"><span id="cb78-1705"><a href="#cb78-1705"></a><span class="kw">function</span> <span class="fu">readline</span>(io<span class="op">,</span> <span class="op">::</span><span class="dt">ReadsLines;</span> keep<span class="op">::</span><span class="dt">Bool=</span><span class="cn">false</span><span class="op">,</span> kw<span class="op">...</span>)</span>
<span id="cb78-1706"><a href="#cb78-1706"></a></span>
<span id="cb78-1707"><a href="#cb78-1707"></a>    v <span class="op">=</span> <span class="bu">Base</span>.<span class="fu">StringVector</span>(max_line)</span>
<span id="cb78-1708"><a href="#cb78-1708"></a>    n <span class="op">=</span> <span class="fu">transfer</span>(io <span class="op">=&gt;</span> v<span class="op">;</span> kw<span class="op">...</span>)</span>
<span id="cb78-1709"><a href="#cb78-1709"></a>    <span class="cf">if</span> n <span class="op">==</span> <span class="fl">0</span></span>
<span id="cb78-1710"><a href="#cb78-1710"></a>        <span class="cf">return</span> <span class="st">&quot;&quot;</span></span>
<span id="cb78-1711"><a href="#cb78-1711"></a>    <span class="cf">end</span></span>
<span id="cb78-1712"><a href="#cb78-1712"></a></span>
<span id="cb78-1713"><a href="#cb78-1713"></a>    <span class="co"># Trim end of line characters.</span></span>
<span id="cb78-1714"><a href="#cb78-1714"></a>    <span class="cf">while</span> <span class="op">!</span>keep <span class="op">&amp;&amp;</span> n <span class="op">&gt;</span> <span class="fl">0</span> <span class="op">&amp;&amp;</span> (v[n] <span class="op">==</span> <span class="fu">UInt8</span>(<span class="ch">&#39;\r&#39;</span>) <span class="op">||</span></span>
<span id="cb78-1715"><a href="#cb78-1715"></a>                             v[n] <span class="op">==</span> <span class="fu">UInt8</span>(<span class="ch">&#39;\n&#39;</span>))</span>
<span id="cb78-1716"><a href="#cb78-1716"></a>        n <span class="op">-=</span> <span class="fl">1</span></span>
<span id="cb78-1717"><a href="#cb78-1717"></a>    <span class="cf">end</span></span>
<span id="cb78-1718"><a href="#cb78-1718"></a></span>
<span id="cb78-1719"><a href="#cb78-1719"></a>    <span class="cf">return</span> <span class="fu">String</span>(<span class="fu">resize!</span>(v<span class="op">,</span> n))</span>
<span id="cb78-1720"><a href="#cb78-1720"></a><span class="kw">end</span></span>
<span id="cb78-1721"><a href="#cb78-1721"></a></span>
<span id="cb78-1722"><a href="#cb78-1722"></a><span class="kw">const</span> max_line <span class="op">=</span> <span class="fl">1024</span> <span class="co"># UnixIO.C.MAX_CANON</span></span></code></pre></div>
<h2 id="function-readuntil">Function <code>readuntil</code></h2>
<div class="sourceCode" id="cb79" data-startFrom="1727"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1726;"><span id="cb79-1727"><a href="#cb79-1727"></a><span class="bu">Base</span>.<span class="fu">readuntil</span>(io<span class="op">::</span><span class="dt">TraitsIO,</span> d<span class="op">::</span><span class="dt">AbstractChar;</span> timeout<span class="op">=</span><span class="cn">Inf</span><span class="op">,</span> kw<span class="op">...</span>) <span class="op">=</span></span>
<span id="cb79-1728"><a href="#cb79-1728"></a>    <span class="pp">@invoke</span> <span class="bu">Base</span>.<span class="fu">readuntil</span>(<span class="fu">timeout_io</span>(io<span class="op">,</span> timeout)<span class="op">::</span><span class="dt">IO,</span> d<span class="op">;</span> kw<span class="op">...</span>)</span></code></pre></div>
<h1 id="exports">Exports</h1>
<div class="sourceCode" id="cb80" data-startFrom="1734"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1733;"><span id="cb80-1734"><a href="#cb80-1734"></a><span class="kw">export</span> TraitsIO<span class="op">,</span> TransferDirection<span class="op">,</span> transfer</span>
<span id="cb80-1735"><a href="#cb80-1735"></a></span>
<span id="cb80-1736"><a href="#cb80-1736"></a><span class="kw">export</span> TotalSize<span class="op">,</span></span>
<span id="cb80-1737"><a href="#cb80-1737"></a>       UnknownTotalSize<span class="op">,</span> InfiniteTotalSize<span class="op">,</span> KnownTotalSize<span class="op">,</span> VariableTotalSize<span class="op">,</span></span>
<span id="cb80-1738"><a href="#cb80-1738"></a>       FixedTotalSize</span>
<span id="cb80-1739"><a href="#cb80-1739"></a></span>
<span id="cb80-1740"><a href="#cb80-1740"></a><span class="kw">export</span> TransferSize<span class="op">,</span></span>
<span id="cb80-1741"><a href="#cb80-1741"></a>       UnknownTransferSize<span class="op">,</span> KnownTransferSize<span class="op">,</span> LimitedTransferSize<span class="op">,</span></span>
<span id="cb80-1742"><a href="#cb80-1742"></a>       FixedTransferSize</span>
<span id="cb80-1743"><a href="#cb80-1743"></a></span>
<span id="cb80-1744"><a href="#cb80-1744"></a><span class="kw">export</span> TransferSizeMechanism<span class="op">,</span></span>
<span id="cb80-1745"><a href="#cb80-1745"></a>       NoSizeMechanism<span class="op">,</span> SupportsFIONREAD<span class="op">,</span> SupportsStatSize</span>
<span id="cb80-1746"><a href="#cb80-1746"></a></span>
<span id="cb80-1747"><a href="#cb80-1747"></a><span class="kw">export</span> ReadFragmentation<span class="op">,</span></span>
<span id="cb80-1748"><a href="#cb80-1748"></a>       ReadsBytes<span class="op">,</span> ReadsLines<span class="op">,</span> ReadsPackets<span class="op">,</span> ReadsRequestedSize</span>
<span id="cb80-1749"><a href="#cb80-1749"></a></span>
<span id="cb80-1750"><a href="#cb80-1750"></a><span class="kw">export</span> WaitingMechanism<span class="op">,</span></span>
<span id="cb80-1751"><a href="#cb80-1751"></a>       WaitBySleeping<span class="op">,</span> WaitUsingPosixPoll<span class="op">,</span> WaitUsingEPoll<span class="op">,</span> WaitUsingPidFD<span class="op">,</span></span>
<span id="cb80-1752"><a href="#cb80-1752"></a>       WaitUsingKQueue</span>
<span id="cb80-1753"><a href="#cb80-1753"></a></span>
<span id="cb80-1754"><a href="#cb80-1754"></a><span class="kw">export</span> CursorSupport<span class="op">,</span> AbstractSeekable<span class="op">,</span></span>
<span id="cb80-1755"><a href="#cb80-1755"></a>       NoCursors<span class="op">,</span></span>
<span id="cb80-1756"><a href="#cb80-1756"></a>       Seekable<span class="op">,</span></span>
<span id="cb80-1757"><a href="#cb80-1757"></a>       Markable</span></code></pre></div>
<h2 id="possibly-related-issues">Possibly Related Issues</h2>
<table>
<colgroup>
<col style="width: 18%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Issue</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/14747">14747</a></td>
<td>Intermittent deadlock in readbytes(open(echo $text)) on Linux ?</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/22832">22832</a></td>
<td>Deadlock in reading stdout from cmd.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/libuv/libuv/issues/1970">1970</a></td>
<td>Serial Port support.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/libuv/libuv/issues/2640">2640</a></td>
<td>Pseudo-tty support.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/libuv/libuv/issues/10292">10292</a></td>
<td>write on IOBuffer with a maxsize</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/libuv/libuv/issues/484">484</a></td>
<td>add uv_device_t as stream on windows and Linux to handle device IO</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/3887">3887</a></td>
<td>refactor I/O to do more buffering</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/28975">28975</a></td>
<td>readline not working for ls</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/24440">24440</a></td>
<td>Spawning turns IO race into process hang</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/20812">20812</a></td>
<td>Redirected STDOUT on macOS is hanging when more than 512 bytes are written at once</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/24717">24717</a></td>
<td>Pipe objects have lost their asyncness</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/36639">36639</a></td>
<td>slow printing in terminals</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/39727">39727</a></td>
<td>Bi-directional IOStream seems to mix input and output “Things work fine when I replace open/read/write with ccall to open/read/write, i.e. when I bypass julia IO.”</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/17070">17070</a></td>
<td>Keyword argument docs for read are misleading. (all=true)</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/40793">40793</a></td>
<td>readbytes!: support the all keyword for all methods. “I’ve encountered cases where it doesn’t seems block.”</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/24526">24526</a></td>
<td>Review of IO blocking behaviour</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/33799">33799</a></td>
<td>Don’t export position. Position is zero-based.</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/36954">36954</a></td>
<td>Rename <code>position</code> to <code>streampos</code>.</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/40500">40500</a></td>
<td><code>peek</code> breaks <code>mark</code>. “…any plans to publish a proper interface for io one day?”</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/41291">41291</a></td>
<td>PR: added docs for IO interface</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/40966">40966</a></td>
<td>sendfile: operation not supported error</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/35907">35907</a></td>
<td>Slow disk IO on MacOS</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/30044">30044</a></td>
<td>massive slowdowns using stdin/stdout “It seems like PipeEndpoint is just really, really slow.”</td>
</tr>
<tr class="even">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/24810">24810</a></td>
<td>Improve documentation for process interaction using pipes</td>
</tr>
<tr class="odd">
<td style="text-align: left;"><a href="https://github.com/JuliaLang/julia/issues/24242">24242</a></td>
<td>Add isseekable to Stream/IO interface?</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb81" data-startFrom="1827"><pre class="sourceCode numberSource julia numberLines lineAnchors"><code class="sourceCode julia" style="counter-reset: source-line 1826;"><span id="cb81-1827"><a href="#cb81-1827"></a><span class="kw">using</span> ReadmeDocs</span>
<span id="cb81-1828"><a href="#cb81-1828"></a></span>
<span id="cb81-1829"><a href="#cb81-1829"></a><span class="fu">include</span>(<span class="st">&quot;ioinfo.jl&quot;</span>) <span class="co"># Generate Method Resolution Info</span></span>
<span id="cb81-1830"><a href="#cb81-1830"></a></span>
<span id="cb81-1831"><a href="#cb81-1831"></a><span class="kw">end</span> <span class="co"># module IOTraits</span></span></code></pre></div>
<h1 id="method-resolution-info">Method Resolution Info</h1>
<h2 id="bufferedin-1">BufferedIn</h2>
<h2 id="io-traits">IO Traits</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Trait</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">TransferDirection</td>
<td style="text-align: left;">nothing</td>
</tr>
<tr class="even">
<td style="text-align: left;">TotalSize</td>
<td style="text-align: left;">UnknownTotalSize()</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TransferSize</td>
<td style="text-align: left;">LimitedTransferSize()</td>
</tr>
<tr class="even">
<td style="text-align: left;">ReadFragmentation</td>
<td style="text-align: left;">ReadsBytes()</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WaitingMechanism</td>
<td style="text-align: left;">WaitBySleeping()</td>
</tr>
</tbody>
</table>
<h2 id="core-read-methods">Core Read Methods</h2>
<table>
<colgroup>
<col style="width: 5%" />
<col style="width: 9%" />
<col style="width: 8%" />
<col style="width: 76%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Function</th>
<th style="text-align: left;">Args</th>
<th style="text-align: left;">File</th>
<th style="text-align: left;">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">isreadable</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching isreadable(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">isreadable(!Matched::Base.DevNull) at coreio.jl:12</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">isreadable(!Matched::Base.AbstractPipe) at io.jl:380</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">isreadable(!Matched::Base.GenericIOBuffer) at iobuffer.jl:234</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">read</td>
<td style="text-align: left;">Type{UInt8}</td>
<td style="text-align: left;">IOTraits.jl:1248</td>
<td style="text-align: left;">read(io::IOTraits.GenericBufferedIn, ::Type{UInt8}; kw…)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">unsafe_read</td>
<td style="text-align: left;">Ptr{UInt8}, UInt64</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching unsafe_read(::IOTraits.BufferedIn{IOTraits.NullIn}, ::Ptr{UInt8}, ::Int64)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unsafe_read(!Matched::IOTraits.FullInDelegate, ::Ptr{UInt8}, ::Any…; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1154</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unsafe_read(!Matched::IOTraits.FullInDelegate, ::Ptr, ::Any…; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1154</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unsafe_read(!Matched::IO, ::Ptr, ::Integer) at io.jl:722</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">eof</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">IOTraits.jl:1207</td>
<td style="text-align: left;">eof(ib::IOTraits.GenericBufferedIn)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">reseteof</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching reseteof(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">reseteof(!Matched::Base.AbstractPipe) at io.jl:415</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">reseteof(!Matched::Base.TTY) at stream.jl:656</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">reseteof(!Matched::IO) at io.jl:28</td>
</tr>
<tr class="odd">
<td style="text-align: right;">peek</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">io.jl:267</td>
<td style="text-align: left;">peek(s)</td>
</tr>
<tr class="even">
<td style="text-align: right;">peek</td>
<td style="text-align: left;">Type{UInt8}</td>
<td style="text-align: left;">IOTraits.jl:1262</td>
<td style="text-align: left;">peek(io::IOTraits.GenericBufferedIn, ::Type{T}; kw…) where T</td>
</tr>
<tr class="odd">
<td style="text-align: right;">peek</td>
<td style="text-align: left;">Type{Int64}</td>
<td style="text-align: left;">IOTraits.jl:1262</td>
<td style="text-align: left;">peek(io::IOTraits.GenericBufferedIn, ::Type{T}; kw…) where T</td>
</tr>
</tbody>
</table>
<h2 id="core-write-methods">Core Write Methods</h2>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 11%" />
<col style="width: 2%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Function</th>
<th style="text-align: left;">Args</th>
<th style="text-align: left;">File</th>
<th style="text-align: left;">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">iswritable</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching iswritable(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">iswritable(!Matched::Base.DevNull) at coreio.jl:13</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">iswritable(!Matched::Base.AbstractPipe) at io.jl:384</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">iswritable(!Matched::Base.GenericIOBuffer) at iobuffer.jl:235</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">write</td>
<td style="text-align: left;">UInt8</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching write(::IOTraits.BufferedIn{IOTraits.NullIn}, ::Int64)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">write(!Matched::AbstractString, ::Any, !Matched::Any…) at io.jl:420</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">write(!Matched::IO, ::Union{Float16, Float32, Float64, Int128, Int16, Int32, Int64, UInt128, UInt16, UInt32, UInt64}) at io.jl:649</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">write(!Matched::IO, ::Any) at io.jl:635</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">unsafe_write</td>
<td style="text-align: left;">Ptr{UInt8}, UInt64</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching unsafe_write(::IOTraits.BufferedIn{IOTraits.NullIn}, ::Ptr{UInt8}, ::Int64)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unsafe_write(!Matched::IO, ::Ptr, ::Integer) at io.jl:646</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unsafe_write(!Matched::IO, ::Ref{T}, ::Integer) where T at io.jl:644</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unsafe_write(!Matched::Base.DevNull, ::Ptr{UInt8}, !Matched::UInt64) at coreio.jl:17</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">flush</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching flush(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">flush(!Matched::Base.DevNull) at coreio.jl:19</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">flush(!Matched::TextDisplay) at multimedia.jl:253</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">flush(!Matched::IOStream) at iostream.jl:66</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
</tbody>
</table>
<h2 id="state-methods">State Methods</h2>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 4%" />
<col style="width: 14%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Function</th>
<th style="text-align: left;">Args</th>
<th style="text-align: left;">File</th>
<th style="text-align: left;">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">close</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">IOTraits.jl:1210</td>
<td style="text-align: left;">close(ib::IOTraits.GenericBufferedIn)</td>
</tr>
<tr class="even">
<td style="text-align: right;">isopen</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">IOTraits.jl:272</td>
<td style="text-align: left;">isopen(s::IOTraits.Stream)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">lock</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching lock(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">lock(::Any, !Matched::Base.GenericCondition) at condition.jl:78</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">lock(::Any, !Matched::Base.AbstractLock) at lock.jl:184</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">lock(::Any, !Matched::WeakKeyDict) at weakkeydict.jl:87</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">unlock</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching unlock(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unlock(::Any, !Matched::Base.GenericCondition) at condition.jl:79</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unlock(!Matched::IOContext) at show.jl:334</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unlock(!Matched::Base.AlwaysLockedST) at condition.jl:50</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
</tbody>
</table>
<h2 id="cursor-methods">Cursor Methods</h2>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 5%" />
<col style="width: 3%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Function</th>
<th style="text-align: left;">Args</th>
<th style="text-align: left;">File</th>
<th style="text-align: left;">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">skip</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching skip(::IOTraits.BufferedIn{IOTraits.NullIn}, ::Int64)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">skip(!Matched::Base.GenericIOBuffer, ::Integer) at iobuffer.jl:243</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">skip(!Matched::IOStream, ::Integer) at iostream.jl:184</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">skip(!Matched::Base.Filesystem.File, ::Integer) at filesystem.jl:232</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">seek</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching seek(::IOTraits.BufferedIn{IOTraits.NullIn}, ::Int64)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seek(!Matched::Base.GenericIOBuffer, ::Integer) at iobuffer.jl:250</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seek(!Matched::Base.Libc.FILE, ::Integer) at libc.jl:97</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seek(!Matched::IOStream, ::Integer) at iostream.jl:127</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">position</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching position(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">position(!Matched::Base.GenericIOBuffer) at iobuffer.jl:241</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">position(!Matched::Base.Libc.FILE) at libc.jl:103</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">position(!Matched::IOStream) at iostream.jl:216</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">seekstart</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching seekstart(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seekstart(!Matched::IO) at iostream.jl:154</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seekstart(!Matched::IOTraits.FullInDelegate; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1153</td>
</tr>
<tr class="odd">
<td style="text-align: right;">seekend</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching seekend(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seekend(!Matched::Base.GenericIOBuffer) at iobuffer.jl:263</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seekend(!Matched::IOStream) at iostream.jl:161</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seekend(!Matched::Base.Filesystem.File) at filesystem.jl:226</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">mark</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching mark(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">mark(!Matched::Base.AbstractPipe) at io.jl:380</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">mark(!Matched::Base.LibuvStream) at stream.jl:1265</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">mark(!Matched::IOTraits.FullInDelegate; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1153</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">unmark</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching unmark(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unmark(!Matched::Base.AbstractPipe) at io.jl:380</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unmark(!Matched::Base.LibuvStream) at stream.jl:1266</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unmark(!Matched::IOTraits.FullInDelegate; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1153</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">reset</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching reset(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">reset(!Matched::Base.AbstractPipe) at io.jl:380</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">reset(!Matched::Base.LibuvStream) at stream.jl:1267</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">reset(!Matched::IOTraits.FullInDelegate; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1153</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">ismarked</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching ismarked(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">ismarked(!Matched::Base.AbstractPipe) at io.jl:380</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">ismarked(!Matched::Base.LibuvStream) at stream.jl:1268</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">ismarked(!Matched::IOTraits.FullInDelegate; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1153</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
</tbody>
</table>
<h2 id="extra-read-methods">Extra Read Methods</h2>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Function</th>
<th style="text-align: left;">Args</th>
<th style="text-align: left;">File</th>
<th style="text-align: left;">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">bytesavailable</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">IOTraits.jl:1307</td>
<td style="text-align: left;">bytesavailable(io::IOTraits.BufferedIn)</td>
</tr>
<tr class="even">
<td style="text-align: right;">max_transfer_size</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">IOTraits.jl:1305</td>
<td style="text-align: left;">max_transfer_size(io::IOTraits.BufferedIn)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">readavailable</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">IOTraits.jl:1329</td>
<td style="text-align: left;">readavailable(io::IOTraits.BufferedIn; kw…)</td>
</tr>
<tr class="even">
<td style="text-align: right;">readline</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching readline(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readline() at io.jl:506</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readline(!Matched::AbstractString; keep) at io.jl:500</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readline(!Matched::IOStream; keep) at iostream.jl:444</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">read</td>
<td style="text-align: left;">Type{Int64}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching read(::IOTraits.BufferedIn{IOTraits.NullIn}, ::Type{Int64})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::Base.GenericIOBuffer, ::Union{Type{Float16}, Type{Float32}, Type{Float64}, Type{Int128}, Type{Int16}, Type{Int32}, Type{Int64}, Type{UInt128}, Type{UInt16}, Type{UInt32}, Type{UInt64}}) at iobuffer.jl:189</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(::IOTraits.GenericBufferedIn, !Matched::Type{UInt8}; kw…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1248</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::AbstractString, ::Type{T}) where T at io.jl:434</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">read</td>
<td style="text-align: left;">Type{String}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching read(::IOTraits.BufferedIn{IOTraits.NullIn}, ::Type{String})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::Base.AbstractCmd, ::Type{String}) at process.jl:421</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::TraitsIO, ::Type{String}; timeout) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1511</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(::IOTraits.GenericBufferedIn, !Matched::Type{UInt8}; kw…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1248</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">read</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching read(::IOTraits.BufferedIn{IOTraits.NullIn}, ::Int64)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::Base.GenericIOBuffer, ::Integer) at iobuffer.jl:471</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::TraitsIO, ::Integer; timeout) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1615</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(::IOTraits.GenericBufferedIn, !Matched::Type{UInt8}; kw…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1248</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">readbytes!</td>
<td style="text-align: left;">Vector{UInt8}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching readbytes!(::IOTraits.BufferedIn{IOTraits.NullIn}, ::Vector{UInt8})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readbytes!(!Matched::Base.GenericIOBuffer, ::Array{UInt8, N} where N) at iobuffer.jl:460</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readbytes!(!Matched::Base.GenericIOBuffer, ::Array{UInt8, N} where N, !Matched::Int64) at iobuffer.jl:461</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readbytes!(!Matched::Base.GenericIOBuffer, ::Array{UInt8, N} where N, !Matched::Any) at iobuffer.jl:460</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">readbytes!</td>
<td style="text-align: left;">AbstractVector{UInt8}, Number</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching AbstractVector{UInt8}()</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">AbstractArray{T, N}(!Matched::AbstractArray{S, N}) where {T, N, S} at array.jl:541</td>
</tr>
<tr class="odd">
<td style="text-align: right;">read!</td>
<td style="text-align: left;">AbstractArray</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching AbstractArray()</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">AbstractArray(!Matched::Union{LinearAlgebra.QR, LinearAlgebra.QRCompactWY}) at /Users/julia/buildbot/worker/package_macos64/build/usr/share/julia/stdlib/v1.6/LinearAlgebra/src/qr.jl:433</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">AbstractArray(!Matched::LinearAlgebra.CholeskyPivoted) at /Users/julia/buildbot/worker/package_macos64/build/usr/share/julia/stdlib/v1.6/LinearAlgebra/src/cholesky.jl:435</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">AbstractArray(!Matched::LinearAlgebra.LQ) at /Users/julia/buildbot/worker/package_macos64/build/usr/share/julia/stdlib/v1.6/LinearAlgebra/src/lq.jl:119</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">readuntil</td>
<td style="text-align: left;">Any</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no constructors have been defined for Any</td>
</tr>
<tr class="even">
<td style="text-align: right;">countlines</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching countlines(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">countlines(!Matched::IO; eol) at io.jl:1175</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">countlines(!Matched::AbstractString; eol) at io.jl:1192</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">countlines(!Matched::IOTraits.FullInDelegate; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1153</td>
</tr>
<tr class="even">
<td style="text-align: right;">eachline</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching eachline(::IOTraits.BufferedIn{IOTraits.NullIn})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">eachline() at io.jl:1004</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">eachline(!Matched::IO; keep) at io.jl:1004</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">eachline(!Matched::AbstractString; keep) at io.jl:1008</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">readeach</td>
<td style="text-align: left;">Type{Char}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching readeach(::IOTraits.BufferedIn{IOTraits.NullIn}, ::Type{Char})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readeach(!Matched::IOT, ::Type) where IOT&lt;:IO at io.jl:1047</td>
</tr>
<tr class="odd">
<td style="text-align: right;">readeach</td>
<td style="text-align: left;">Type{Int64}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching readeach(::IOTraits.BufferedIn{IOTraits.NullIn}, ::Type{Int64})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readeach(!Matched::IOT, ::Type) where IOT&lt;:IO at io.jl:1047</td>
</tr>
<tr class="odd">
<td style="text-align: right;">readeach</td>
<td style="text-align: left;">Type{UInt8}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching readeach(::IOTraits.BufferedIn{IOTraits.NullIn}, ::Type{UInt8})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readeach(!Matched::IOT, ::Type) where IOT&lt;:IO at io.jl:1047</td>
</tr>
</tbody>
</table>
<h2 id="nullin">NullIn</h2>
<h2 id="io-traits-1">IO Traits</h2>
<table>
<thead>
<tr class="header">
<th style="text-align: left;">Trait</th>
<th style="text-align: left;">Value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">TransferDirection</td>
<td style="text-align: left;">IOTraits.In()</td>
</tr>
<tr class="even">
<td style="text-align: left;">TotalSize</td>
<td style="text-align: left;">UnknownTotalSize()</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TransferSize</td>
<td style="text-align: left;">UnknownTransferSize()</td>
</tr>
<tr class="even">
<td style="text-align: left;">ReadFragmentation</td>
<td style="text-align: left;">ReadsBytes()</td>
</tr>
<tr class="odd">
<td style="text-align: left;">WaitingMechanism</td>
<td style="text-align: left;">WaitBySleeping()</td>
</tr>
</tbody>
</table>
<h2 id="core-read-methods-1">Core Read Methods</h2>
<table>
<colgroup>
<col style="width: 3%" />
<col style="width: 5%" />
<col style="width: 2%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Function</th>
<th style="text-align: left;">Args</th>
<th style="text-align: left;">File</th>
<th style="text-align: left;">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">isreadable</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching isreadable(::IOTraits.NullIn)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">isreadable(!Matched::Base.DevNull) at coreio.jl:12</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">isreadable(!Matched::Base.AbstractPipe) at io.jl:380</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">isreadable(!Matched::Base.GenericIOBuffer) at iobuffer.jl:234</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">read</td>
<td style="text-align: left;">Type{UInt8}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching read(::IOTraits.NullIn, ::Type{UInt8})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::Base.GenericIOBuffer, ::Type{UInt8}) at iobuffer.jl:212</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::TraitsIO, ::Type{UInt8}; timeout) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1483</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::IOTraits.GenericBufferedIn, ::Type{UInt8}; kw…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1248</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">unsafe_read</td>
<td style="text-align: left;">Ptr{UInt8}, UInt64</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching unsafe_read(::IOTraits.NullIn, ::Ptr{UInt8}, ::Int64)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unsafe_read(!Matched::IOTraits.FullInDelegate, ::Ptr{UInt8}, ::Any…; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1154</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unsafe_read(!Matched::IOTraits.FullInDelegate, ::Ptr, ::Any…; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1154</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unsafe_read(!Matched::IO, ::Ptr, ::Integer) at io.jl:722</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">eof</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching eof(::IOTraits.NullIn)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">eof(::Any, !Matched::InfiniteTotalSize; kw…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1472</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">eof(::Any, !Matched::UnknownTotalSize; kw…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1463</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">eof(::Any, !Matched::KnownTotalSize; kw…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1457</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">reseteof</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching reseteof(::IOTraits.NullIn)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">reseteof(!Matched::Base.AbstractPipe) at io.jl:415</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">reseteof(!Matched::Base.TTY) at stream.jl:656</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">reseteof(!Matched::IO) at io.jl:28</td>
</tr>
<tr class="odd">
<td style="text-align: right;">peek</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">io.jl:267</td>
<td style="text-align: left;">peek(s)</td>
</tr>
<tr class="even">
<td style="text-align: right;">peek</td>
<td style="text-align: left;">Type{UInt8}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching peek(::IOTraits.NullIn, ::Type{UInt8})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">peek(!Matched::Base.Iterators.Stateful, ::Any) at iterators.jl:1299</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">peek(!Matched::IOTraits.GenericBufferedIn, ::Type{T}; kw…) where T at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1262</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">peek(!Matched::IOTraits.FullInDelegate, ::Type{UInt8}, !Matched::Any…; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1154</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">peek</td>
<td style="text-align: left;">Type{Int64}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching peek(::IOTraits.NullIn, ::Type{Int64})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">peek(!Matched::Base.Iterators.Stateful, ::Any) at iterators.jl:1299</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">peek(!Matched::IOTraits.GenericBufferedIn, ::Type{T}; kw…) where T at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1262</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">peek(!Matched::IOTraits.FullInDelegate, ::Union{Type{Float16}, Type{Float32}, Type{Float64}, Type{Int128}, Type{Int16}, Type{Int32}, Type{Int64}, Type{UInt128}, Type{UInt16}, Type{UInt32}, Type{UInt64}}, !Matched::Any…; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1154</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
</tbody>
</table>
<h2 id="core-write-methods-1">Core Write Methods</h2>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 11%" />
<col style="width: 2%" />
<col style="width: 78%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Function</th>
<th style="text-align: left;">Args</th>
<th style="text-align: left;">File</th>
<th style="text-align: left;">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">iswritable</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching iswritable(::IOTraits.NullIn)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">iswritable(!Matched::Base.DevNull) at coreio.jl:13</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">iswritable(!Matched::Base.AbstractPipe) at io.jl:384</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">iswritable(!Matched::Base.GenericIOBuffer) at iobuffer.jl:235</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">write</td>
<td style="text-align: left;">UInt8</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching write(::IOTraits.NullIn, ::Int64)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">write(!Matched::AbstractString, ::Any, !Matched::Any…) at io.jl:420</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">write(!Matched::IO, ::Union{Float16, Float32, Float64, Int128, Int16, Int32, Int64, UInt128, UInt16, UInt32, UInt64}) at io.jl:649</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">write(!Matched::IO, ::Any) at io.jl:635</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">unsafe_write</td>
<td style="text-align: left;">Ptr{UInt8}, UInt64</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching unsafe_write(::IOTraits.NullIn, ::Ptr{UInt8}, ::Int64)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unsafe_write(!Matched::IO, ::Ptr, ::Integer) at io.jl:646</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unsafe_write(!Matched::IO, ::Ref{T}, ::Integer) where T at io.jl:644</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unsafe_write(!Matched::Base.DevNull, ::Ptr{UInt8}, !Matched::UInt64) at coreio.jl:17</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">flush</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching flush(::IOTraits.NullIn)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">flush(!Matched::Base.DevNull) at coreio.jl:19</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">flush(!Matched::TextDisplay) at multimedia.jl:253</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">flush(!Matched::IOStream) at iostream.jl:66</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
</tbody>
</table>
<h2 id="state-methods-1">State Methods</h2>
<table>
<colgroup>
<col style="width: 7%" />
<col style="width: 4%" />
<col style="width: 14%" />
<col style="width: 73%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Function</th>
<th style="text-align: left;">Args</th>
<th style="text-align: left;">File</th>
<th style="text-align: left;">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">close</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">IOTraits.jl:274</td>
<td style="text-align: left;">close(s::IOTraits.Stream)</td>
</tr>
<tr class="even">
<td style="text-align: right;">isopen</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">IOTraits.jl:272</td>
<td style="text-align: left;">isopen(s::IOTraits.Stream)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">lock</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching lock(::IOTraits.NullIn)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">lock(::Any, !Matched::Base.GenericCondition) at condition.jl:78</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">lock(::Any, !Matched::Base.AbstractLock) at lock.jl:184</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">lock(::Any, !Matched::WeakKeyDict) at weakkeydict.jl:87</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">unlock</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching unlock(::IOTraits.NullIn)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unlock(::Any, !Matched::Base.GenericCondition) at condition.jl:79</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unlock(!Matched::IOContext) at show.jl:334</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unlock(!Matched::Base.AlwaysLockedST) at condition.jl:50</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
</tbody>
</table>
<h2 id="cursor-methods-1">Cursor Methods</h2>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 5%" />
<col style="width: 3%" />
<col style="width: 84%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Function</th>
<th style="text-align: left;">Args</th>
<th style="text-align: left;">File</th>
<th style="text-align: left;">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">skip</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching skip(::IOTraits.NullIn, ::Int64)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">skip(!Matched::Base.GenericIOBuffer, ::Integer) at iobuffer.jl:243</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">skip(!Matched::IOStream, ::Integer) at iostream.jl:184</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">skip(!Matched::Base.Filesystem.File, ::Integer) at filesystem.jl:232</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">seek</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching seek(::IOTraits.NullIn, ::Int64)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seek(!Matched::Base.GenericIOBuffer, ::Integer) at iobuffer.jl:250</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seek(!Matched::Base.Libc.FILE, ::Integer) at libc.jl:97</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seek(!Matched::IOStream, ::Integer) at iostream.jl:127</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">position</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching position(::IOTraits.NullIn)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">position(!Matched::Base.GenericIOBuffer) at iobuffer.jl:241</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">position(!Matched::Base.Libc.FILE) at libc.jl:103</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">position(!Matched::IOStream) at iostream.jl:216</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">seekstart</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching seekstart(::IOTraits.NullIn)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seekstart(!Matched::IO) at iostream.jl:154</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seekstart(!Matched::IOTraits.FullInDelegate; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1153</td>
</tr>
<tr class="odd">
<td style="text-align: right;">seekend</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching seekend(::IOTraits.NullIn)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seekend(!Matched::Base.GenericIOBuffer) at iobuffer.jl:263</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seekend(!Matched::IOStream) at iostream.jl:161</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">seekend(!Matched::Base.Filesystem.File) at filesystem.jl:226</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">mark</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching mark(::IOTraits.NullIn)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">mark(!Matched::Base.AbstractPipe) at io.jl:380</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">mark(!Matched::Base.LibuvStream) at stream.jl:1265</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">mark(!Matched::IOTraits.FullInDelegate; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1153</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">unmark</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching unmark(::IOTraits.NullIn)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unmark(!Matched::Base.AbstractPipe) at io.jl:380</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unmark(!Matched::Base.LibuvStream) at stream.jl:1266</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">unmark(!Matched::IOTraits.FullInDelegate; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1153</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">reset</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching reset(::IOTraits.NullIn)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">reset(!Matched::Base.AbstractPipe) at io.jl:380</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">reset(!Matched::Base.LibuvStream) at stream.jl:1267</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">reset(!Matched::IOTraits.FullInDelegate; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1153</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">ismarked</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching ismarked(::IOTraits.NullIn)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">ismarked(!Matched::Base.AbstractPipe) at io.jl:380</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">ismarked(!Matched::Base.LibuvStream) at stream.jl:1268</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">ismarked(!Matched::IOTraits.FullInDelegate; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1153</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
</tbody>
</table>
<h2 id="extra-read-methods-1">Extra Read Methods</h2>
<table>
<colgroup>
<col style="width: 6%" />
<col style="width: 10%" />
<col style="width: 5%" />
<col style="width: 77%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: right;">Function</th>
<th style="text-align: left;">Args</th>
<th style="text-align: left;">File</th>
<th style="text-align: left;">Method</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">bytesavailable</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching bytesavailable(::IOTraits.NullIn)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">bytesavailable(!Matched::Base.AbstractPipe) at io.jl:403</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">bytesavailable(!Matched::Base.GenericIOBuffer) at iobuffer.jl:240</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">bytesavailable(!Matched::IOStream) at iostream.jl:377</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">max_transfer_size</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">IOTraits.jl:857</td>
<td style="text-align: left;">max_transfer_size(stream)</td>
</tr>
<tr class="odd">
<td style="text-align: right;">readavailable</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching readavailable(::IOTraits.NullIn)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readavailable(!Matched::Base.AbstractPipe) at io.jl:380</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readavailable(!Matched::Base.GenericIOBuffer) at iobuffer.jl:470</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readavailable(!Matched::IOStream) at iostream.jl:379</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">readline</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching readline(::IOTraits.NullIn)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readline() at io.jl:506</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readline(!Matched::AbstractString; keep) at io.jl:500</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readline(!Matched::IOStream; keep) at iostream.jl:444</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">read</td>
<td style="text-align: left;">Type{Int64}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching read(::IOTraits.NullIn, ::Type{Int64})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::Base.GenericIOBuffer, ::Union{Type{Float16}, Type{Float32}, Type{Float64}, Type{Int128}, Type{Int16}, Type{Int32}, Type{Int64}, Type{UInt128}, Type{UInt16}, Type{UInt32}, Type{UInt64}}) at iobuffer.jl:189</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::AbstractString, ::Type{T}) where T at io.jl:434</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::AbstractString, ::Any…) at io.jl:432</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">read</td>
<td style="text-align: left;">Type{String}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching read(::IOTraits.NullIn, ::Type{String})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::Base.AbstractCmd, ::Type{String}) at process.jl:421</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::TraitsIO, ::Type{String}; timeout) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1511</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::AbstractString, ::Type{T}) where T at io.jl:434</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">read</td>
<td style="text-align: left;">Integer</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching read(::IOTraits.NullIn, ::Int64)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::Base.GenericIOBuffer, ::Integer) at iobuffer.jl:471</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::TraitsIO, ::Integer; timeout) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1615</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">read(!Matched::AbstractString, ::Any…) at io.jl:432</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">readbytes!</td>
<td style="text-align: left;">Vector{UInt8}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching readbytes!(::IOTraits.NullIn, ::Vector{UInt8})</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readbytes!(!Matched::Base.GenericIOBuffer, ::Array{UInt8, N} where N) at iobuffer.jl:460</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readbytes!(!Matched::Base.GenericIOBuffer, ::Array{UInt8, N} where N, !Matched::Int64) at iobuffer.jl:461</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readbytes!(!Matched::Base.GenericIOBuffer, ::Array{UInt8, N} where N, !Matched::Any) at iobuffer.jl:460</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">readbytes!</td>
<td style="text-align: left;">AbstractVector{UInt8}, Number</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching AbstractVector{UInt8}()</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">AbstractArray{T, N}(!Matched::AbstractArray{S, N}) where {T, N, S} at array.jl:541</td>
</tr>
<tr class="odd">
<td style="text-align: right;">read!</td>
<td style="text-align: left;">AbstractArray</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching AbstractArray()</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">AbstractArray(!Matched::Union{LinearAlgebra.QR, LinearAlgebra.QRCompactWY}) at /Users/julia/buildbot/worker/package_macos64/build/usr/share/julia/stdlib/v1.6/LinearAlgebra/src/qr.jl:433</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">AbstractArray(!Matched::LinearAlgebra.CholeskyPivoted) at /Users/julia/buildbot/worker/package_macos64/build/usr/share/julia/stdlib/v1.6/LinearAlgebra/src/cholesky.jl:435</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">AbstractArray(!Matched::LinearAlgebra.LQ) at /Users/julia/buildbot/worker/package_macos64/build/usr/share/julia/stdlib/v1.6/LinearAlgebra/src/lq.jl:119</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="even">
<td style="text-align: right;">readuntil</td>
<td style="text-align: left;">Any</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no constructors have been defined for Any</td>
</tr>
<tr class="even">
<td style="text-align: right;">countlines</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching countlines(::IOTraits.NullIn)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">countlines(!Matched::IO; eol) at io.jl:1175</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">countlines(!Matched::AbstractString; eol) at io.jl:1192</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">countlines(!Matched::IOTraits.FullInDelegate; k…) at /Users/samoconnor/git/jlpi/UnixIO/packages/IOTraits/src/IOTraits.jl:1153</td>
</tr>
<tr class="even">
<td style="text-align: right;">eachline</td>
<td style="text-align: left;"></td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching eachline(::IOTraits.NullIn)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">eachline() at io.jl:1004</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">eachline(!Matched::IO; keep) at io.jl:1004</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">eachline(!Matched::AbstractString; keep) at io.jl:1008</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">…</td>
</tr>
<tr class="odd">
<td style="text-align: right;">readeach</td>
<td style="text-align: left;">Type{Char}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching readeach(::IOTraits.NullIn, ::Type{Char})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readeach(!Matched::IOT, ::Type) where IOT&lt;:IO at io.jl:1047</td>
</tr>
<tr class="odd">
<td style="text-align: right;">readeach</td>
<td style="text-align: left;">Type{Int64}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching readeach(::IOTraits.NullIn, ::Type{Int64})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readeach(!Matched::IOT, ::Type) where IOT&lt;:IO at io.jl:1047</td>
</tr>
<tr class="odd">
<td style="text-align: right;">readeach</td>
<td style="text-align: left;">Type{UInt8}</td>
<td style="text-align: left;">⚠️</td>
<td style="text-align: left;">ErrorException(“no unique matching method found for the specified argument types”)</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">MethodError: no method matching readeach(::IOTraits.NullIn, ::Type{UInt8})</td>
</tr>
<tr class="odd">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">Closest candidates are:</td>
</tr>
<tr class="even">
<td style="text-align: right;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;"></td>
<td style="text-align: left;">readeach(!Matched::IOT, ::Type) where IOT&lt;:IO at io.jl:1047</td>
</tr>
</tbody>
</table>
</main>

<script>
;(function() {
  // Non-essential if user has JavaScript off. Just makes checkboxes look nicer.
  var selector = '.task-list > li > input[type="checkbox"]';
  var checkboxes = document.querySelectorAll(selector);
  Array.from(checkboxes).forEach((checkbox) => {
    var wasChecked = checkbox.checked;
    checkbox.disabled = false;
    checkbox.addEventListener('click', (ev) => {ev.target.checked = wasChecked});
  });
})();
</script>
</body>
</html>
